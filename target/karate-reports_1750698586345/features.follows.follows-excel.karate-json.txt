{"failedCount":0,"prefixedPath":"classpath:features\/follows\/follows-excel.feature","packageQualifiedName":"features.follows.follows-excel","loopIndex":-1,"relativePath":"features\/follows\/follows-excel.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":776900,"startTime":1750677637831,"endTime":1750677637832,"millis":0.7769,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"},"stepLog":"18:20:37.797 karate.env system property was: null \n"},{"result":{"nanos":8553500,"startTime":1750677637834,"endTime":1750677637843,"millis":8.5535,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:37.838 karate.env system property was: null \n"},{"result":{"nanos":35459800,"startTime":1750677637843,"endTime":1750677637878,"millis":35.4598,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def readExcel = read('classpath:utils\/read-excel.js')"}},{"result":{"nanos":16308500,"startTime":1750677637879,"endTime":1750677637895,"millis":16.3085,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def writeToExcel = read('classpath:utils\/write-excel.js')"}},{"result":{"nanos":671400,"startTime":1750677637895,"endTime":1750677637896,"millis":0.6714,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def excelFilePath = 'src\/test\/java\/data\/data.xlsx'"}},{"result":{"nanos":608600,"startTime":1750677637896,"endTime":1750677637897,"millis":0.6086,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def sheetName = 'follows'"}},{"result":{"nanos":938864600,"startTime":1750677637897,"endTime":1750677638836,"millis":938.8646,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def testData = readExcel(excelFilePath, sheetName)"},"stepLog":"18:20:38.724 Headers found: [\n  \"bearerToken\",\n  \"followingId\",\n  \"testDescription\",\n  \"expectedStatus\",\n  \"expectedResult\",\n  \"responseStatus\",\n  \"result\",\n  \"testStatus\",\n  \"failureReason\"\n]\n \n18:20:38.829 Read data from Excel: [\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"e9d11364-4838-4613-8a69-26196a17a82c\",\n    \"testDescription\": \"Follow hợp lệ\",\n    \"expectedStatus\": 201.0,\n    \"expectedResult\": \"{\\\"message\\\": \\\"Theo dõi thành công\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Theo dõi thành công\\\",\\\"statusCode\\\":201,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"5e03f7a0-c266-4424-b452-28d02fd1b643\\\",\\\"followerId\\\":\\\"08515b05-2d3e-4789-ad60-db35525a4970\\\",\\\"followingId\\\":\\\"9d86c52d-4ad6-4386-a1ac-a54bcd0987bc\\\",\\\"followStatus\\\":\\\"accepted\\\",\\\"createdAt\\\":\\\"2025-06-23T11:18:36.516Z\\\"}}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 200, got 201\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"NULL_VALUE\",\n    \"testDescription\": \"Kiểm tra trường null\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"followingId không thể bị null\\\"}\",\n    \"responseStatus\": \"500\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.findUnique()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:22:47\\\\n\\\\n  19   throw new ForbiddenException('Không thể theo dõi chính mình');\\\\n  20 }\\\\n  21 \\\\n→ 22 const existing = await this.prisma.follow.findUnique({\\\\n       where: {\\\\n         followerId_followingId: {\\\\n           followerId: \\\\\\\"08515b05-2d3e-4789-ad60-db35525a4970\\\\\\\",\\\\n     +     followingId: String\\\\n         }\\\\n       }\\\\n     })\\\\n\\\\nArgument `followingId` must not be null.\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:36.700Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"\",\n    \"testDescription\": \"followingId rỗng\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"followingId không thể để trống\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:36.839Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"NO_TOKEN\",\n    \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n    \"testDescription\": \"Thiếu token xác thực\",\n    \"expectedStatus\": 401.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:36.871Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"INVALID_TOKEN\",\n    \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n    \"testDescription\": \"Token không hợp lệ\",\n    \"expectedStatus\": 401.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:36.890Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"nonexistent123\",\n    \"testDescription\": \"followingId không tồn tại\",\n    \"expectedStatus\": 404.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Không tìm thấy người dùng\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.073Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"testDescription\": \"Follow chính mình\",\n    \"expectedStatus\": 403.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"không thể follow chính mình\\\"}\",\n    \"responseStatus\": \"403\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":403,\\\"message\\\":\\\"Không thể theo dõi chính mình\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.130Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n    \"testDescription\": \"Đã follow trước đó\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"đã follow người dùng này rồi\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Theo dõi thành công\\\",\\\"statusCode\\\":201,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"fedfe777-4a40-4455-b839-7592bdb5981a\\\",\\\"followerId\\\":\\\"08515b05-2d3e-4789-ad60-db35525a4970\\\",\\\"followingId\\\":\\\"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\\\",\\\"followStatus\\\":\\\"accepted\\\",\\\"createdAt\\\":\\\"2025-06-23T11:18:37.240Z\\\"}}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 201\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"invalid_id!@#\",\n    \"testDescription\": \"followingId không hợp lệ\",\n    \"expectedStatus\": 404.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Không đúng định dạng followingId\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.432Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"user123' OR '1'='1\",\n    \"testDescription\": \"Kiểm tra SQL Injection\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Lỗi đầu vào\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.542Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"<script>alert(\\\"xss\\\")<\/script>\",\n    \"testDescription\": \"Kiểm tra XSS\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Lỗi đầu vào\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.658Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \" \",\n    \"testDescription\": \"Kiểm tra khoảng trắng\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"followingId không thể chứa khoảng trắng\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.764Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"user😊123\",\n    \"testDescription\": \"Kiểm tra ký tự Unicode\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Sai định dạng followingId\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.871Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n    \"testDescription\": \"Kiểm tra độ dài followingId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"followingId vượt quá độ dài tối đa\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.987Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  }\n]\n \n"},{"result":{"nanos":6789800,"startTime":1750677638836,"endTime":1750677638843,"millis":6.7898,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"print 'Đọc được ' + testData.length + ' test cases từ Excel sheet: ' + sheetName"},"stepLog":"18:20:38.843 [print] Đọc được 14 test cases từ Excel sheet: follows \n"},{"result":{"nanos":15965400,"startTime":1750677638843,"endTime":1750677638859,"millis":15.9654,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def testResults = []"}},{"result":{"nanos":944800,"startTime":1750677638859,"endTime":1750677638860,"millis":0.9448,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def globalBearerToken = config.bearerToken"}},{"result":{"nanos":1165100,"startTime":1750677638860,"endTime":1750677638861,"millis":1.1651,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"print 'Sử dụng global bearer token từ config:', globalBearerToken"},"stepLog":"18:20:38.861 [print] Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":2605100,"startTime":1750677638861,"endTime":1750677638864,"millis":2.6051,"status":"passed"},"step":{"endLine":35,"line":17,"prefix":"*","docString":"function(testCase, actualStatus, actualResponse) {\n  var expectedStatus = testCase.expectedStatus;\n        \n  \/\/ Chỉ so sánh Status Code\n  if (actualStatus != expectedStatus) {\n    return {\n      status: 'FAIL',\n      reason: 'Status mismatch: Expected ' + expectedStatus + ', got ' + actualStatus\n    };\n  }\n        \n  return {\n    status: 'PASS',\n    reason: 'All validations passed'\n  };\n}","index":0,"text":"def evaluateTestCase ="}},{"result":{"nanos":3730200,"startTime":1750677638864,"endTime":1750677638868,"millis":3.7302,"status":"passed"},"step":{"endLine":107,"line":37,"prefix":"*","docString":"function(testCase, index) {\n  karate.log('Đang chạy test case #' + (index + 1) + ': ' + testCase.testDescription);\n        \n  var bearerToken = '';\n        \n  \/\/ Sử dụng bearer token từ test case hoặc global config\n  if (testCase.bearerToken && testCase.bearerToken.trim() !== '') {\n    if (testCase.bearerToken === 'NO_TOKEN') {\n      \/\/ TC4: Không có token\n      bearerToken = '';\n      karate.log('Test case không sử dụng token');\n    } else if (testCase.bearerToken === 'INVALID_TOKEN') {\n      \/\/ TC5: Token không hợp lệ\n      bearerToken = 'invalid_token_123';\n      karate.log('Test case sử dụng token không hợp lệ');\n    } else {\n      \/\/ Sử dụng token từ Excel nếu có\n      bearerToken = testCase.bearerToken;\n      karate.log('Sử dụng bearer token từ Excel:', bearerToken);\n    }\n  } else {\n    \/\/ Sử dụng global token từ config\n    bearerToken = globalBearerToken;\n    karate.log('Sử dụng global bearer token từ config:', bearerToken);\n  }\n        \n  \/\/ Gọi API follows\n  var response = karate.call('classpath:features\/helpers\/follows-single-call.feature', {\n    bearerToken: bearerToken,\n    followingId: testCase.followingId || ''\n  });\n        \n  var actualStatus = response.actualStatus;\n  var actualResult = '';\n        \n  \/\/ Ghi response thực tế vào result\n  if (response.actualResponse) {\n    actualResult = JSON.stringify(response.actualResponse);\n  } else {\n    actualResult = 'No response body';\n  }\n        \n  \/\/ ===== ĐÁNH GIÁ PASS\/FAIL =====\n  var testEvaluation = evaluateTestCase(testCase, actualStatus, response.actualResponse);\n        \n  \/\/ Log kết quả đánh giá\n  if (testEvaluation.status === 'FAIL') {\n    karate.log('❌ TEST FAILED - ' + testEvaluation.reason);\n  } else {\n    karate.log('✅ TEST PASSED - ' + testEvaluation.reason);\n  }\n        \n  \/\/ Log chi tiết để debug\n  karate.log('Test Case Data:', testCase);\n  karate.log('Expected Status:', testCase.expectedStatus);\n  karate.log('Expected Result:', testCase.expectedResult);\n  karate.log('Actual Status:', actualStatus);\n  karate.log('Test Status:', testEvaluation.status);\n        \n  karate.log('Test case #' + (index + 1) + ' - Status: ' + actualStatus + ', Test Result: ' + testEvaluation.status);\n        \n  return {\n    responseStatus: actualStatus,\n    result: actualResult,\n    testStatus: testEvaluation.status,\n    failureReason: testEvaluation.reason\n  };\n}","index":1,"text":"def runTest ="}},{"result":{"nanos":1261700,"startTime":1750677638868,"endTime":1750677638869,"millis":1.2617,"status":"passed"},"step":{"line":109,"prefix":"*","index":2,"text":"print 'Bắt đầu chạy từng test case...'"},"stepLog":"18:20:38.869 [print] Bắt đầu chạy từng test case... \n"},{"result":{"nanos":2260647000,"startTime":1750677638869,"endTime":1750677641130,"millis":2260.647,"status":"passed"},"step":{"line":110,"prefix":"*","index":3,"text":"def results = karate.map(testData, runTest)"},"stepLog":"18:20:41.129 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n18:20:41.129 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n  \"testDescription\": \"Kiểm tra độ dài followingId\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"followingId vượt quá độ dài tối đa\\\"}\",\n  \"responseStatus\": \"404\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.987Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n}\n \n18:20:41.129 Expected Status: 400.0 \n18:20:41.129 Expected Result: {\"error\": \"followingId vượt quá độ dài tối đa\"} \n18:20:41.129 Actual Status: 404 \n18:20:41.129 Test Status: FAIL \n18:20:41.129 Test case #14 - Status: 404, Test Result: FAIL \n","callResults":[{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":640.6765,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":"e9d11364-4838-4613-8a69-26196a17a82c"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":11222400,"startTime":1750677638897,"endTime":1750677638908,"millis":11.2224,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:38.874 Đang chạy test case #1: Follow hợp lệ \n18:20:38.875 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:38.905 karate.env system property was: null \n"},{"result":{"nanos":1264700,"startTime":1750677638909,"endTime":1750677638910,"millis":1.2647,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":6835700,"startTime":1750677638910,"endTime":1750677638917,"millis":6.8357,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":3841400,"startTime":1750677638917,"endTime":1750677638921,"millis":3.8414,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":1321500,"startTime":1750677638921,"endTime":1750677638922,"millis":1.3215,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":1408800,"startTime":1750677638922,"endTime":1750677638923,"millis":1.4088,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":472200,"startTime":1750677638923,"endTime":1750677638923,"millis":0.4722,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":610866300,"startTime":1750677638925,"endTime":1750677639536,"millis":610.8663,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:39.218 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 54\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"e9d11364-4838-4613-8a69-26196a17a82c\"\n}\n\n\n18:20:39.534 response time in milliseconds: 312\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 295\n1 < ETag: W\/\"127-zkEShFSUL0Oww0vj8kLc\/b\/lMEg\"\n1 < Date: Mon, 23 Jun 2025 11:20:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Theo dõi thành công\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"cc4a84e8-4fa8-4763-b1ab-3e67fab108f8\",\n    \"followerId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"followingId\": \"e9d11364-4838-4613-8a69-26196a17a82c\",\n    \"followStatus\": \"accepted\",\n    \"createdAt\": \"2025-06-23T11:20:39.399Z\"\n  }\n}\n\n\n"},{"result":{"nanos":421400,"startTime":1750677639536,"endTime":1750677639536,"millis":0.4214,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":227000,"startTime":1750677639536,"endTime":1750677639536,"millis":0.227,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":1076600,"startTime":1750677639536,"endTime":1750677639537,"millis":1.0766,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:39.537 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":773500,"startTime":1750677639537,"endTime":1750677639538,"millis":0.7735,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:39.538 [print] Request body: {\n  \"followingId\": \"e9d11364-4838-4613-8a69-26196a17a82c\"\n}\n \n"},{"result":{"nanos":945000,"startTime":1750677639538,"endTime":1750677639539,"millis":0.945,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:39.539 [print] Response status: 201 body: {\n  \"message\": \"Theo dõi thành công\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"cc4a84e8-4fa8-4763-b1ab-3e67fab108f8\",\n    \"followerId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"followingId\": \"e9d11364-4838-4613-8a69-26196a17a82c\",\n    \"followStatus\": \"accepted\",\n    \"createdAt\": \"2025-06-23T11:20:39.399Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":640.6765,"startTime":1750677638897,"failed":false,"refId":"[1:3]","endTime":1750677639539,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":63.1622,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":"NULL_VALUE"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2187000,"startTime":1750677639562,"endTime":1750677639564,"millis":2.187,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:39.552 ✅ TEST PASSED - All validations passed \n18:20:39.552 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"e9d11364-4838-4613-8a69-26196a17a82c\",\n  \"testDescription\": \"Follow hợp lệ\",\n  \"expectedStatus\": 201.0,\n  \"expectedResult\": \"{\\\"message\\\": \\\"Theo dõi thành công\\\"}\",\n  \"responseStatus\": \"201\",\n  \"result\": \"{\\\"message\\\":\\\"Theo dõi thành công\\\",\\\"statusCode\\\":201,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"5e03f7a0-c266-4424-b452-28d02fd1b643\\\",\\\"followerId\\\":\\\"08515b05-2d3e-4789-ad60-db35525a4970\\\",\\\"followingId\\\":\\\"9d86c52d-4ad6-4386-a1ac-a54bcd0987bc\\\",\\\"followStatus\\\":\\\"accepted\\\",\\\"createdAt\\\":\\\"2025-06-23T11:18:36.516Z\\\"}}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 200, got 201\"\n}\n \n18:20:39.552 Expected Status: 201.0 \n18:20:39.552 Expected Result: {\"message\": \"Theo dõi thành công\"} \n18:20:39.553 Actual Status: 201 \n18:20:39.553 Test Status: PASS \n18:20:39.554 Test case #1 - Status: 201, Test Result: PASS \n18:20:39.555 Đang chạy test case #2: Kiểm tra trường null \n18:20:39.555 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:39.563 karate.env system property was: null \n"},{"result":{"nanos":192000,"startTime":1750677639564,"endTime":1750677639564,"millis":0.192,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":256100,"startTime":1750677639564,"endTime":1750677639564,"millis":0.2561,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":276900,"startTime":1750677639564,"endTime":1750677639564,"millis":0.2769,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":2258700,"startTime":1750677639565,"endTime":1750677639567,"millis":2.2587,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":449900,"startTime":1750677639567,"endTime":1750677639567,"millis":0.4499,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":115000,"startTime":1750677639568,"endTime":1750677639568,"millis":0.115,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":54712000,"startTime":1750677639568,"endTime":1750677639623,"millis":54.712,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:39.569 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 20\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": null\n}\n\n\n18:20:39.621 response time in milliseconds: 52\n1 < 500\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 647\n1 < ETag: W\/\"287-7NPMF47z1uUNFcVhxb3StHmthSg\"\n1 < Date: Mon, 23 Jun 2025 11:20:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.findUnique()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:22:47\\n\\n  19   throw new ForbiddenException('Không thể theo dõi chính mình');\\n  20 }\\n  21 \\n→ 22 const existing = await this.prisma.follow.findUnique({\\n       where: {\\n         followerId_followingId: {\\n           followerId: \\\"08515b05-2d3e-4789-ad60-db35525a4970\\\",\\n     +     followingId: String\\n         }\\n       }\\n     })\\n\\nArgument `followingId` must not be null.\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:39.619Z\"\n}\n\n\n"},{"result":{"nanos":500900,"startTime":1750677639623,"endTime":1750677639624,"millis":0.5009,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":319600,"startTime":1750677639623,"endTime":1750677639623,"millis":0.3196,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":842200,"startTime":1750677639624,"endTime":1750677639625,"millis":0.8422,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:39.624 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":488500,"startTime":1750677639624,"endTime":1750677639624,"millis":0.4885,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:39.625 [print] Request body: {\n  \"followingId\": null\n}\n \n"},{"result":{"nanos":563400,"startTime":1750677639625,"endTime":1750677639626,"millis":0.5634,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:39.625 [print] Response status: 500 body: {\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.findUnique()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:22:47\\n\\n  19   throw new ForbiddenException('Không thể theo dõi chính mình');\\n  20 }\\n  21 \\n→ 22 const existing = await this.prisma.follow.findUnique({\\n       where: {\\n         followerId_followingId: {\\n           followerId: \\\"08515b05-2d3e-4789-ad60-db35525a4970\\\",\\n     +     followingId: String\\n         }\\n       }\\n     })\\n\\nArgument `followingId` must not be null.\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:39.619Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":63.1622,"startTime":1750677639561,"failed":false,"refId":"[1:3]","endTime":1750677639626,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":149.2378,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":""},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3379500,"startTime":1750677639646,"endTime":1750677639649,"millis":3.3795,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:39.631 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 \n18:20:39.631 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"NULL_VALUE\",\n  \"testDescription\": \"Kiểm tra trường null\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"followingId không thể bị null\\\"}\",\n  \"responseStatus\": \"500\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.findUnique()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:22:47\\\\n\\\\n  19   throw new ForbiddenException('Không thể theo dõi chính mình');\\\\n  20 }\\\\n  21 \\\\n→ 22 const existing = await this.prisma.follow.findUnique({\\\\n       where: {\\\\n         followerId_followingId: {\\\\n           followerId: \\\\\\\"08515b05-2d3e-4789-ad60-db35525a4970\\\\\\\",\\\\n     +     followingId: String\\\\n         }\\\\n       }\\\\n     })\\\\n\\\\nArgument `followingId` must not be null.\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:36.700Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n}\n \n18:20:39.632 Expected Status: 400.0 \n18:20:39.632 Expected Result: {\"error\": \"followingId không thể bị null\"} \n18:20:39.632 Actual Status: 500 \n18:20:39.633 Test Status: FAIL \n18:20:39.633 Test case #2 - Status: 500, Test Result: FAIL \n18:20:39.634 Đang chạy test case #3: followingId rỗng \n18:20:39.634 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:39.648 karate.env system property was: null \n"},{"result":{"nanos":421200,"startTime":1750677639649,"endTime":1750677639649,"millis":0.4212,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":503500,"startTime":1750677639649,"endTime":1750677639650,"millis":0.5035,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":689700,"startTime":1750677639650,"endTime":1750677639651,"millis":0.6897,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":162700,"startTime":1750677639650,"endTime":1750677639650,"millis":0.1627,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":302000,"startTime":1750677639651,"endTime":1750677639651,"millis":0.302,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":111500,"startTime":1750677639651,"endTime":1750677639651,"millis":0.1115,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":142405500,"startTime":1750677639651,"endTime":1750677639793,"millis":142.4055,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:39.652 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 18\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"\"\n}\n\n\n18:20:39.793 response time in milliseconds: 140\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 137\n1 < ETag: W\/\"89-CTTpZdvCwT25Y6xUIwubFfTEmSQ\"\n1 < Date: Mon, 23 Jun 2025 11:20:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:39.791Z\"\n}\n\n\n"},{"result":{"nanos":190800,"startTime":1750677639793,"endTime":1750677639793,"millis":0.1908,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":143400,"startTime":1750677639794,"endTime":1750677639794,"millis":0.1434,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":450300,"startTime":1750677639794,"endTime":1750677639794,"millis":0.4503,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:39.794 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":191600,"startTime":1750677639794,"endTime":1750677639794,"millis":0.1916,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:39.794 [print] Request body: {\n  \"followingId\": \"\"\n}\n \n"},{"result":{"nanos":286100,"startTime":1750677639795,"endTime":1750677639795,"millis":0.2861,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:39.795 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:39.791Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":149.2378,"startTime":1750677639646,"failed":false,"refId":"[1:3]","endTime":1750677639795,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":22.5235,"callArg":{"bearerToken":"","followingId":"e7b38cb7-6701-40d9-a3bd-f53fc4d43457"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2825900,"startTime":1750677639804,"endTime":1750677639807,"millis":2.8259,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:39.796 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n18:20:39.796 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"\",\n  \"testDescription\": \"followingId rỗng\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"followingId không thể để trống\\\"}\",\n  \"responseStatus\": \"404\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:36.839Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n}\n \n18:20:39.796 Expected Status: 400.0 \n18:20:39.796 Expected Result: {\"error\": \"followingId không thể để trống\"} \n18:20:39.796 Actual Status: 404 \n18:20:39.796 Test Status: FAIL \n18:20:39.797 Test case #3 - Status: 404, Test Result: FAIL \n18:20:39.797 Đang chạy test case #4: Thiếu token xác thực \n18:20:39.797 Test case không sử dụng token \n18:20:39.806 karate.env system property was: null \n"},{"result":{"nanos":204600,"startTime":1750677639807,"endTime":1750677639807,"millis":0.2046,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":96800,"startTime":1750677639807,"endTime":1750677639807,"millis":0.0968,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":10736500,"startTime":1750677639807,"endTime":1750677639818,"millis":10.7365,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":547100,"startTime":1750677639819,"endTime":1750677639820,"millis":0.5471,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":905100,"startTime":1750677639819,"endTime":1750677639820,"millis":0.9051,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":122700,"startTime":1750677639820,"endTime":1750677639820,"millis":0.1227,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":5876600,"startTime":1750677639820,"endTime":1750677639826,"millis":5.8766,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:39.821 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: #(Authorization)\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 54\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\"\n}\n\n\n18:20:39.825 response time in milliseconds: 4\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 116\n1 < ETag: W\/\"74-wseupfXh+3sDtTAhuL+4LM2e5mI\"\n1 < Date: Mon, 23 Jun 2025 11:20:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:39.824Z\"\n}\n\n\n"},{"result":{"nanos":200500,"startTime":1750677639826,"endTime":1750677639826,"millis":0.2005,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":116700,"startTime":1750677639826,"endTime":1750677639826,"millis":0.1167,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":430500,"startTime":1750677639826,"endTime":1750677639826,"millis":0.4305,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:39.827 [print] Calling follows API với bearerToken:  \n"},{"result":{"nanos":221700,"startTime":1750677639827,"endTime":1750677639827,"millis":0.2217,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:39.827 [print] Request body: {\n  \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\"\n}\n \n"},{"result":{"nanos":238800,"startTime":1750677639827,"endTime":1750677639827,"millis":0.2388,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:39.827 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:39.824Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":22.5235,"startTime":1750677639804,"failed":false,"refId":"[1:3]","endTime":1750677639827,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":11.1445,"callArg":{"bearerToken":"invalid_token_123","followingId":"e7b38cb7-6701-40d9-a3bd-f53fc4d43457"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2314800,"startTime":1750677639837,"endTime":1750677639839,"millis":2.3148,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:39.828 ✅ TEST PASSED - All validations passed \n18:20:39.828 Test Case Data: {\n  \"bearerToken\": \"NO_TOKEN\",\n  \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n  \"testDescription\": \"Thiếu token xác thực\",\n  \"expectedStatus\": 401.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:36.871Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"All validations passed\"\n}\n \n18:20:39.828 Expected Status: 401.0 \n18:20:39.828 Expected Result: {\"error\": \"Unauthorized\"} \n18:20:39.828 Actual Status: 401 \n18:20:39.828 Test Status: PASS \n18:20:39.830 Test case #4 - Status: 401, Test Result: PASS \n18:20:39.830 Đang chạy test case #5: Token không hợp lệ \n18:20:39.830 Test case sử dụng token không hợp lệ \n18:20:39.838 karate.env system property was: null \n"},{"result":{"nanos":183600,"startTime":1750677639839,"endTime":1750677639839,"millis":0.1836,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":235700,"startTime":1750677639840,"endTime":1750677639840,"millis":0.2357,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":303900,"startTime":1750677639840,"endTime":1750677639840,"millis":0.3039,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":133400,"startTime":1750677639840,"endTime":1750677639840,"millis":0.1334,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":259600,"startTime":1750677639840,"endTime":1750677639840,"millis":0.2596,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":72100,"startTime":1750677639841,"endTime":1750677639841,"millis":0.0721,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":6142400,"startTime":1750677639841,"endTime":1750677639847,"millis":6.1424,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:39.841 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer invalid_token_123\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 54\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\"\n}\n\n\n18:20:39.846 response time in milliseconds: 4\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 116\n1 < ETag: W\/\"74-KF+9OWeYtVMCpZgFwEx05zyDQjg\"\n1 < Date: Mon, 23 Jun 2025 11:20:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:39.844Z\"\n}\n\n\n"},{"result":{"nanos":254600,"startTime":1750677639846,"endTime":1750677639846,"millis":0.2546,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":144400,"startTime":1750677639847,"endTime":1750677639847,"millis":0.1444,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":660500,"startTime":1750677639847,"endTime":1750677639848,"millis":0.6605,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:39.848 [print] Calling follows API với bearerToken: invalid_token_123 \n"},{"result":{"nanos":238200,"startTime":1750677639848,"endTime":1750677639848,"millis":0.2382,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:39.848 [print] Request body: {\n  \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\"\n}\n \n"},{"result":{"nanos":201300,"startTime":1750677639848,"endTime":1750677639848,"millis":0.2013,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:39.848 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:39.844Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":11.1445,"startTime":1750677639837,"failed":false,"refId":"[1:3]","endTime":1750677639848,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":147.3683,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":"nonexistent123"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1961400,"startTime":1750677639857,"endTime":1750677639859,"millis":1.9614,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:39.849 ✅ TEST PASSED - All validations passed \n18:20:39.849 Test Case Data: {\n  \"bearerToken\": \"INVALID_TOKEN\",\n  \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n  \"testDescription\": \"Token không hợp lệ\",\n  \"expectedStatus\": 401.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:36.890Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"All validations passed\"\n}\n \n18:20:39.849 Expected Status: 401.0 \n18:20:39.849 Expected Result: {\"error\": \"Unauthorized\"} \n18:20:39.849 Actual Status: 401 \n18:20:39.850 Test Status: PASS \n18:20:39.850 Test case #5 - Status: 401, Test Result: PASS \n18:20:39.850 Đang chạy test case #6: followingId không tồn tại \n18:20:39.850 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:39.858 karate.env system property was: null \n"},{"result":{"nanos":140800,"startTime":1750677639858,"endTime":1750677639858,"millis":0.1408,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":204900,"startTime":1750677639859,"endTime":1750677639859,"millis":0.2049,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":263300,"startTime":1750677639859,"endTime":1750677639859,"millis":0.2633,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":122100,"startTime":1750677639859,"endTime":1750677639859,"millis":0.1221,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":208800,"startTime":1750677639859,"endTime":1750677639859,"millis":0.2088,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":81800,"startTime":1750677639859,"endTime":1750677639859,"millis":0.0818,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":142452200,"startTime":1750677639860,"endTime":1750677640002,"millis":142.4522,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:39.861 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 32\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"nonexistent123\"\n}\n\n\n18:20:40.002 response time in milliseconds: 140\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 137\n1 < ETag: W\/\"89-E7e17KvIM\/TXaySJmJHKGwSPgTk\"\n1 < Date: Mon, 23 Jun 2025 11:20:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:39.999Z\"\n}\n\n\n"},{"result":{"nanos":274400,"startTime":1750677640003,"endTime":1750677640003,"millis":0.2744,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":154900,"startTime":1750677640003,"endTime":1750677640003,"millis":0.1549,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":465700,"startTime":1750677640003,"endTime":1750677640003,"millis":0.4657,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:40.003 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":263000,"startTime":1750677640003,"endTime":1750677640003,"millis":0.263,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:40.003 [print] Request body: {\n  \"followingId\": \"nonexistent123\"\n}\n \n"},{"result":{"nanos":775000,"startTime":1750677640004,"endTime":1750677640005,"millis":0.775,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:40.004 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:39.999Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":147.3683,"startTime":1750677639857,"failed":false,"refId":"[1:3]","endTime":1750677640004,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":60.3171,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":"08515b05-2d3e-4789-ad60-db35525a4970"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2493700,"startTime":1750677640017,"endTime":1750677640019,"millis":2.4937,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:40.006 ✅ TEST PASSED - All validations passed \n18:20:40.006 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"nonexistent123\",\n  \"testDescription\": \"followingId không tồn tại\",\n  \"expectedStatus\": 404.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Không tìm thấy người dùng\\\"}\",\n  \"responseStatus\": \"404\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.073Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"All validations passed\"\n}\n \n18:20:40.007 Expected Status: 404.0 \n18:20:40.007 Expected Result: {\"error\": \"Không tìm thấy người dùng\"} \n18:20:40.007 Actual Status: 404 \n18:20:40.007 Test Status: PASS \n18:20:40.007 Test case #6 - Status: 404, Test Result: PASS \n18:20:40.008 Đang chạy test case #7: Follow chính mình \n18:20:40.008 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:40.018 karate.env system property was: null \n"},{"result":{"nanos":236800,"startTime":1750677640019,"endTime":1750677640019,"millis":0.2368,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":269200,"startTime":1750677640019,"endTime":1750677640019,"millis":0.2692,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":316300,"startTime":1750677640019,"endTime":1750677640019,"millis":0.3163,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":127600,"startTime":1750677640019,"endTime":1750677640019,"millis":0.1276,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":291400,"startTime":1750677640019,"endTime":1750677640019,"millis":0.2914,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":87800,"startTime":1750677640020,"endTime":1750677640020,"millis":0.0878,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":53623400,"startTime":1750677640020,"endTime":1750677640074,"millis":53.6234,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:40.022 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 54\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"08515b05-2d3e-4789-ad60-db35525a4970\"\n}\n\n\n18:20:40.072 response time in milliseconds: 49\n1 < 403\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 139\n1 < ETag: W\/\"8b-QAajPSUPYPdacNcw7ZvK7\/g1kqY\"\n1 < Date: Mon, 23 Jun 2025 11:20:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 403,\n  \"message\": \"Không thể theo dõi chính mình\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.068Z\"\n}\n\n\n"},{"result":{"nanos":491100,"startTime":1750677640074,"endTime":1750677640074,"millis":0.4911,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":227800,"startTime":1750677640075,"endTime":1750677640075,"millis":0.2278,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":910000,"startTime":1750677640075,"endTime":1750677640076,"millis":0.91,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:40.076 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":564900,"startTime":1750677640076,"endTime":1750677640077,"millis":0.5649,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:40.077 [print] Request body: {\n  \"followingId\": \"08515b05-2d3e-4789-ad60-db35525a4970\"\n}\n \n"},{"result":{"nanos":677100,"startTime":1750677640077,"endTime":1750677640078,"millis":0.6771,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:40.078 [print] Response status: 403 body: {\n  \"success\": false,\n  \"statusCode\": 403,\n  \"message\": \"Không thể theo dõi chính mình\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.068Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":60.3171,"startTime":1750677640015,"failed":false,"refId":"[1:3]","endTime":1750677640078,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":102.9724,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":"e7b38cb7-6701-40d9-a3bd-f53fc4d43457"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3330800,"startTime":1750677640090,"endTime":1750677640093,"millis":3.3308,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:40.078 ✅ TEST PASSED - All validations passed \n18:20:40.079 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n  \"testDescription\": \"Follow chính mình\",\n  \"expectedStatus\": 403.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"không thể follow chính mình\\\"}\",\n  \"responseStatus\": \"403\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":403,\\\"message\\\":\\\"Không thể theo dõi chính mình\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.130Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"All validations passed\"\n}\n \n18:20:40.079 Expected Status: 403.0 \n18:20:40.079 Expected Result: {\"error\": \"không thể follow chính mình\"} \n18:20:40.079 Actual Status: 403 \n18:20:40.079 Test Status: PASS \n18:20:40.079 Test case #7 - Status: 403, Test Result: PASS \n18:20:40.080 Đang chạy test case #8: Đã follow trước đó \n18:20:40.080 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:40.092 karate.env system property was: null \n"},{"result":{"nanos":276200,"startTime":1750677640093,"endTime":1750677640093,"millis":0.2762,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":691700,"startTime":1750677640094,"endTime":1750677640095,"millis":0.6917,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":413900,"startTime":1750677640095,"endTime":1750677640095,"millis":0.4139,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":237600,"startTime":1750677640095,"endTime":1750677640095,"millis":0.2376,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":572100,"startTime":1750677640095,"endTime":1750677640096,"millis":0.5721,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":113600,"startTime":1750677640096,"endTime":1750677640096,"millis":0.1136,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":95479800,"startTime":1750677640096,"endTime":1750677640191,"millis":95.4798,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:40.098 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 54\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\"\n}\n\n\n18:20:40.190 response time in milliseconds: 92\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 301\n1 < ETag: W\/\"12d-5NbAlnRQ+WKK20mv8G7C0TS64eA\"\n1 < Date: Mon, 23 Jun 2025 11:20:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã theo dõi trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"fedfe777-4a40-4455-b839-7592bdb5981a\",\n    \"followerId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n    \"followStatus\": \"accepted\",\n    \"createdAt\": \"2025-06-23T11:18:37.240Z\"\n  }\n}\n\n\n"},{"result":{"nanos":272800,"startTime":1750677640192,"endTime":1750677640192,"millis":0.2728,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":147900,"startTime":1750677640192,"endTime":1750677640192,"millis":0.1479,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":507300,"startTime":1750677640193,"endTime":1750677640194,"millis":0.5073,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:40.193 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":398500,"startTime":1750677640193,"endTime":1750677640193,"millis":0.3985,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:40.193 [print] Request body: {\n  \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\"\n}\n \n"},{"result":{"nanos":530200,"startTime":1750677640193,"endTime":1750677640194,"millis":0.5302,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:40.193 [print] Response status: 201 body: {\n  \"message\": \"Đã theo dõi trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"fedfe777-4a40-4455-b839-7592bdb5981a\",\n    \"followerId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n    \"followStatus\": \"accepted\",\n    \"createdAt\": \"2025-06-23T11:18:37.240Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":102.9724,"startTime":1750677640090,"failed":false,"refId":"[1:3]","endTime":1750677640194,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":216.5751,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":"invalid_id!@#"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":70258900,"startTime":1750677640205,"endTime":1750677640275,"millis":70.2589,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:40.196 ❌ TEST FAILED - Status mismatch: Expected 400, got 201 \n18:20:40.196 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n  \"testDescription\": \"Đã follow trước đó\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"đã follow người dùng này rồi\\\"}\",\n  \"responseStatus\": \"201\",\n  \"result\": \"{\\\"message\\\":\\\"Theo dõi thành công\\\",\\\"statusCode\\\":201,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"fedfe777-4a40-4455-b839-7592bdb5981a\\\",\\\"followerId\\\":\\\"08515b05-2d3e-4789-ad60-db35525a4970\\\",\\\"followingId\\\":\\\"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\\\",\\\"followStatus\\\":\\\"accepted\\\",\\\"createdAt\\\":\\\"2025-06-23T11:18:37.240Z\\\"}}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 201\"\n}\n \n18:20:40.196 Expected Status: 400.0 \n18:20:40.196 Expected Result: {\"error\": \"đã follow người dùng này rồi\"} \n18:20:40.197 Actual Status: 201 \n18:20:40.197 Test Status: FAIL \n18:20:40.197 Test case #8 - Status: 201, Test Result: FAIL \n18:20:40.197 Đang chạy test case #9: followingId không hợp lệ \n18:20:40.198 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:40.275 karate.env system property was: null \n"},{"result":{"nanos":331100,"startTime":1750677640276,"endTime":1750677640276,"millis":0.3311,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":464600,"startTime":1750677640276,"endTime":1750677640276,"millis":0.4646,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":2134200,"startTime":1750677640277,"endTime":1750677640279,"millis":2.1342,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":285700,"startTime":1750677640279,"endTime":1750677640279,"millis":0.2857,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":482900,"startTime":1750677640280,"endTime":1750677640280,"millis":0.4829,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":91400,"startTime":1750677640280,"endTime":1750677640280,"millis":0.0914,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":140827700,"startTime":1750677640280,"endTime":1750677640421,"millis":140.8277,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:40.282 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 31\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"invalid_id!@#\"\n}\n\n\n18:20:40.420 response time in milliseconds: 138\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 137\n1 < ETag: W\/\"89-vWFZo1HruRGqpQpVrGkXlCwhXqs\"\n1 < Date: Mon, 23 Jun 2025 11:20:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.419Z\"\n}\n\n\n"},{"result":{"nanos":213500,"startTime":1750677640421,"endTime":1750677640421,"millis":0.2135,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":143200,"startTime":1750677640421,"endTime":1750677640421,"millis":0.1432,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":494500,"startTime":1750677640422,"endTime":1750677640422,"millis":0.4945,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:40.422 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":346800,"startTime":1750677640422,"endTime":1750677640422,"millis":0.3468,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:40.422 [print] Request body: {\n  \"followingId\": \"invalid_id!@#\"\n}\n \n"},{"result":{"nanos":500600,"startTime":1750677640423,"endTime":1750677640424,"millis":0.5006,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:40.423 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.419Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":216.5751,"startTime":1750677640205,"failed":false,"refId":"[1:3]","endTime":1750677640423,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":143.5377,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":"user123' OR '1'='1"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2623900,"startTime":1750677640431,"endTime":1750677640434,"millis":2.6239,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:40.424 ✅ TEST PASSED - All validations passed \n18:20:40.424 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"invalid_id!@#\",\n  \"testDescription\": \"followingId không hợp lệ\",\n  \"expectedStatus\": 404.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Không đúng định dạng followingId\\\"}\",\n  \"responseStatus\": \"404\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.432Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"All validations passed\"\n}\n \n18:20:40.424 Expected Status: 404.0 \n18:20:40.424 Expected Result: {\"error\": \"Không đúng định dạng followingId\"} \n18:20:40.424 Actual Status: 404 \n18:20:40.424 Test Status: PASS \n18:20:40.424 Test case #9 - Status: 404, Test Result: PASS \n18:20:40.426 Đang chạy test case #10: Kiểm tra SQL Injection \n18:20:40.426 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:40.433 karate.env system property was: null \n"},{"result":{"nanos":198800,"startTime":1750677640434,"endTime":1750677640434,"millis":0.1988,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":432900,"startTime":1750677640434,"endTime":1750677640434,"millis":0.4329,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":321600,"startTime":1750677640434,"endTime":1750677640434,"millis":0.3216,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":127400,"startTime":1750677640435,"endTime":1750677640435,"millis":0.1274,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":184600,"startTime":1750677640435,"endTime":1750677640435,"millis":0.1846,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":54700,"startTime":1750677640435,"endTime":1750677640435,"millis":0.0547,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":136977300,"startTime":1750677640435,"endTime":1750677640572,"millis":136.9773,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:40.437 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 36\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"user123' OR '1'='1\"\n}\n\n\n18:20:40.572 response time in milliseconds: 133\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 137\n1 < ETag: W\/\"89-qZ+tUghXwMYR7hQr3Cl2ZTNBhLA\"\n1 < Date: Mon, 23 Jun 2025 11:20:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.569Z\"\n}\n\n\n"},{"result":{"nanos":217800,"startTime":1750677640572,"endTime":1750677640572,"millis":0.2178,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":179500,"startTime":1750677640573,"endTime":1750677640573,"millis":0.1795,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":1157500,"startTime":1750677640573,"endTime":1750677640574,"millis":1.1575,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:40.573 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":648900,"startTime":1750677640575,"endTime":1750677640576,"millis":0.6489,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:40.575 [print] Request body: {\n  \"followingId\": \"user123' OR '1'='1\"\n}\n \n"},{"result":{"nanos":412800,"startTime":1750677640575,"endTime":1750677640575,"millis":0.4128,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:40.575 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.569Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":143.5377,"startTime":1750677640431,"failed":false,"refId":"[1:3]","endTime":1750677640576,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":141.6557,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":"<script>alert(\"xss\")<\/script>"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3883300,"startTime":1750677640584,"endTime":1750677640588,"millis":3.8833,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:40.577 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n18:20:40.577 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"user123' OR '1'='1\",\n  \"testDescription\": \"Kiểm tra SQL Injection\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Lỗi đầu vào\\\"}\",\n  \"responseStatus\": \"404\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.542Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n}\n \n18:20:40.577 Expected Status: 400.0 \n18:20:40.577 Expected Result: {\"error\": \"Lỗi đầu vào\"} \n18:20:40.577 Actual Status: 404 \n18:20:40.577 Test Status: FAIL \n18:20:40.577 Test case #10 - Status: 404, Test Result: FAIL \n18:20:40.578 Đang chạy test case #11: Kiểm tra XSS \n18:20:40.578 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:40.586 karate.env system property was: null \n"},{"result":{"nanos":362200,"startTime":1750677640588,"endTime":1750677640588,"millis":0.3622,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":685100,"startTime":1750677640588,"endTime":1750677640589,"millis":0.6851,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":758400,"startTime":1750677640590,"endTime":1750677640591,"millis":0.7584,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":246500,"startTime":1750677640591,"endTime":1750677640591,"millis":0.2465,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":834600,"startTime":1750677640591,"endTime":1750677640592,"millis":0.8346,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":213900,"startTime":1750677640591,"endTime":1750677640591,"millis":0.2139,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":133521400,"startTime":1750677640592,"endTime":1750677640726,"millis":133.5214,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:40.595 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 50\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"<script>alert(\\\"xss\\\")<\/script>\"\n}\n\n\n18:20:40.725 response time in milliseconds: 130\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 137\n1 < ETag: W\/\"89-FBaj2QEA7PS\/A60S9oYgaoXmjhs\"\n1 < Date: Mon, 23 Jun 2025 11:20:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.723Z\"\n}\n\n\n"},{"result":{"nanos":167900,"startTime":1750677640726,"endTime":1750677640726,"millis":0.1679,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":81900,"startTime":1750677640726,"endTime":1750677640726,"millis":0.0819,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":384700,"startTime":1750677640726,"endTime":1750677640726,"millis":0.3847,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:40.727 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":252600,"startTime":1750677640727,"endTime":1750677640727,"millis":0.2526,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:40.727 [print] Request body: {\n  \"followingId\": \"<script>alert(\\\"xss\\\")<\/script>\"\n}\n \n"},{"result":{"nanos":263200,"startTime":1750677640727,"endTime":1750677640727,"millis":0.2632,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:40.727 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.723Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":141.6557,"startTime":1750677640584,"failed":false,"refId":"[1:3]","endTime":1750677640727,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":128.2043,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":" "},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1622500,"startTime":1750677640733,"endTime":1750677640735,"millis":1.6225,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:40.728 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n18:20:40.728 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"<script>alert(\\\"xss\\\")<\/script>\",\n  \"testDescription\": \"Kiểm tra XSS\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Lỗi đầu vào\\\"}\",\n  \"responseStatus\": \"404\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.658Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n}\n \n18:20:40.728 Expected Status: 400.0 \n18:20:40.728 Expected Result: {\"error\": \"Lỗi đầu vào\"} \n18:20:40.729 Actual Status: 404 \n18:20:40.729 Test Status: FAIL \n18:20:40.729 Test case #11 - Status: 404, Test Result: FAIL \n18:20:40.729 Đang chạy test case #12: Kiểm tra khoảng trắng \n18:20:40.729 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:40.734 karate.env system property was: null \n"},{"result":{"nanos":181400,"startTime":1750677640734,"endTime":1750677640734,"millis":0.1814,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":217300,"startTime":1750677640735,"endTime":1750677640735,"millis":0.2173,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":238400,"startTime":1750677640735,"endTime":1750677640735,"millis":0.2384,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":115300,"startTime":1750677640735,"endTime":1750677640735,"millis":0.1153,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":164600,"startTime":1750677640735,"endTime":1750677640735,"millis":0.1646,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":43500,"startTime":1750677640735,"endTime":1750677640735,"millis":0.0435,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":124436300,"startTime":1750677640735,"endTime":1750677640859,"millis":124.4363,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:40.736 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 19\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \" \"\n}\n\n\n18:20:40.860 response time in milliseconds: 123\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 137\n1 < ETag: W\/\"89-hYSh3RtGcspkslWRmg3EPdz8+S0\"\n1 < Date: Mon, 23 Jun 2025 11:20:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.858Z\"\n}\n\n\n"},{"result":{"nanos":173700,"startTime":1750677640860,"endTime":1750677640860,"millis":0.1737,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":104700,"startTime":1750677640861,"endTime":1750677640861,"millis":0.1047,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":439500,"startTime":1750677640861,"endTime":1750677640861,"millis":0.4395,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:40.861 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":219900,"startTime":1750677640861,"endTime":1750677640861,"millis":0.2199,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:40.861 [print] Request body: {\n  \"followingId\": \" \"\n}\n \n"},{"result":{"nanos":247200,"startTime":1750677640861,"endTime":1750677640861,"millis":0.2472,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:40.861 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.858Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":128.2043,"startTime":1750677640733,"failed":false,"refId":"[1:3]","endTime":1750677640861,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":118.0899,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":"user😊123"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1875600,"startTime":1750677640869,"endTime":1750677640871,"millis":1.8756,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:40.863 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n18:20:40.863 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \" \",\n  \"testDescription\": \"Kiểm tra khoảng trắng\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"followingId không thể chứa khoảng trắng\\\"}\",\n  \"responseStatus\": \"404\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.764Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n}\n \n18:20:40.863 Expected Status: 400.0 \n18:20:40.863 Expected Result: {\"error\": \"followingId không thể chứa khoảng trắng\"} \n18:20:40.863 Actual Status: 404 \n18:20:40.863 Test Status: FAIL \n18:20:40.863 Test case #12 - Status: 404, Test Result: FAIL \n18:20:40.864 Đang chạy test case #13: Kiểm tra ký tự Unicode \n18:20:40.864 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:40.870 karate.env system property was: null \n"},{"result":{"nanos":157300,"startTime":1750677640870,"endTime":1750677640870,"millis":0.1573,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":177100,"startTime":1750677640871,"endTime":1750677640871,"millis":0.1771,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":263400,"startTime":1750677640871,"endTime":1750677640871,"millis":0.2634,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":108900,"startTime":1750677640871,"endTime":1750677640871,"millis":0.1089,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":149900,"startTime":1750677640871,"endTime":1750677640871,"millis":0.1499,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":44100,"startTime":1750677640871,"endTime":1750677640871,"millis":0.0441,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":114205000,"startTime":1750677640871,"endTime":1750677640985,"millis":114.205,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:40.872 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 29\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"user😊123\"\n}\n\n\n18:20:40.985 response time in milliseconds: 113\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 137\n1 < ETag: W\/\"89-XoU8bCxLd7eVKXySE5NNZTHgc9s\"\n1 < Date: Mon, 23 Jun 2025 11:20:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.983Z\"\n}\n\n\n"},{"result":{"nanos":139200,"startTime":1750677640986,"endTime":1750677640986,"millis":0.1392,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":84500,"startTime":1750677640986,"endTime":1750677640986,"millis":0.0845,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":362800,"startTime":1750677640986,"endTime":1750677640986,"millis":0.3628,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:40.986 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":211700,"startTime":1750677640986,"endTime":1750677640986,"millis":0.2117,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:40.986 [print] Request body: {\n  \"followingId\": \"user😊123\"\n}\n \n"},{"result":{"nanos":310400,"startTime":1750677640987,"endTime":1750677640987,"millis":0.3104,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:40.987 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:40.983Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":118.0899,"startTime":1750677640869,"failed":false,"refId":"[1:3]","endTime":1750677640987,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/follows-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":131.7348,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA","followingId":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"},"failedCount":0,"packageQualifiedName":"features.helpers.follows-single-call","relativePath":"features\/helpers\/follows-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2640800,"startTime":1750677640995,"endTime":1750677640998,"millis":2.6408,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:20:40.988 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n18:20:40.988 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"user😊123\",\n  \"testDescription\": \"Kiểm tra ký tự Unicode\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Sai định dạng followingId\\\"}\",\n  \"responseStatus\": \"404\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy người dùng\\\",\\\"path\\\":\\\"\/follows\\\",\\\"timestamp\\\":\\\"2025-06-23T11:18:37.871Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n}\n \n18:20:40.988 Expected Status: 400.0 \n18:20:40.988 Expected Result: {\"error\": \"Sai định dạng followingId\"} \n18:20:40.988 Actual Status: 404 \n18:20:40.988 Test Status: FAIL \n18:20:40.989 Test case #13 - Status: 404, Test Result: FAIL \n18:20:40.989 Đang chạy test case #14: Kiểm tra độ dài followingId \n18:20:40.989 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:20:40.996 karate.env system property was: null \n"},{"result":{"nanos":388600,"startTime":1750677640998,"endTime":1750677640998,"millis":0.3886,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/follows'"}},{"result":{"nanos":278600,"startTime":1750677640998,"endTime":1750677640998,"millis":0.2786,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":305900,"startTime":1750677640998,"endTime":1750677640998,"millis":0.3059,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":132400,"startTime":1750677640999,"endTime":1750677640999,"millis":0.1324,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def followingIdValue = followingId === 'NULL_VALUE' ? null : followingId"}},{"result":{"nanos":223000,"startTime":1750677640999,"endTime":1750677640999,"millis":0.223,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def requestBody = { followingId: '#(followingIdValue)' }"}},{"result":{"nanos":65200,"startTime":1750677640999,"endTime":1750677640999,"millis":0.0652,"status":"passed"},"step":{"line":14,"prefix":"And","index":6,"text":"request requestBody"}},{"result":{"nanos":125999900,"startTime":1750677640999,"endTime":1750677641125,"millis":125.9999,"status":"passed"},"step":{"line":15,"prefix":"When","index":7,"text":"method POST"},"stepLog":"18:20:41.001 request:\n1 > POST http:\/\/localhost:3000\/follows\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 55\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"followingId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"\n}\n\n\n18:20:41.124 response time in milliseconds: 123\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 137\n1 < ETag: W\/\"89-YhaRM\/pEDXUoIlKx9CeM2rxYFyU\"\n1 < Date: Mon, 23 Jun 2025 11:20:41 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:41.122Z\"\n}\n\n\n"},{"result":{"nanos":221400,"startTime":1750677641125,"endTime":1750677641125,"millis":0.2214,"status":"passed"},"step":{"line":16,"prefix":"Then","index":8,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":161600,"startTime":1750677641125,"endTime":1750677641125,"millis":0.1616,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"def actualResponse = response"}},{"result":{"nanos":641600,"startTime":1750677641125,"endTime":1750677641126,"millis":0.6416,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Calling follows API với bearerToken:', bearerToken"},"stepLog":"18:20:41.125 [print] Calling follows API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":413700,"startTime":1750677641127,"endTime":1750677641127,"millis":0.4137,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Request body:', requestBody"},"stepLog":"18:20:41.127 [print] Request body: {\n  \"followingId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"\n}\n \n"},{"result":{"nanos":262100,"startTime":1750677641127,"endTime":1750677641127,"millis":0.2621,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:20:41.127 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy người dùng\",\n  \"path\": \"\/follows\",\n  \"timestamp\": \"2025-06-23T11:20:41.122Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API follows với bearer token và followingId","description":"","durationMillis":131.7348,"startTime":1750677640995,"failed":false,"refId":"[1:3]","endTime":1750677641127,"exampleIndex":-1}],"name":"Follows Single Call Helper - Thực hiện API call follows với bearer token","passedCount":1}]},{"result":{"nanos":257800,"startTime":1750677641130,"endTime":1750677641130,"millis":0.2578,"status":"passed"},"step":{"line":111,"prefix":"*","index":4,"text":"def testResults = results"}},{"result":{"nanos":146000,"startTime":1750677641130,"endTime":1750677641130,"millis":0.146,"status":"passed"},"step":{"comments":["# Đếm số test cases pass\/fail"],"line":114,"prefix":"*","index":5,"text":"def passedTests = []"}},{"result":{"nanos":92400,"startTime":1750677641130,"endTime":1750677641130,"millis":0.0924,"status":"passed"},"step":{"line":115,"prefix":"*","index":6,"text":"def failedTests = []"}},{"result":{"nanos":6170100,"startTime":1750677641130,"endTime":1750677641136,"millis":6.1701,"status":"passed"},"step":{"line":116,"prefix":"*","index":7,"text":"karate.forEach(testResults, function(test) { if (test.testStatus === 'PASS') passedTests.push(test); else failedTests.push(test); })"}},{"result":{"nanos":972500,"startTime":1750677641137,"endTime":1750677641138,"millis":0.9725,"status":"passed"},"step":{"line":118,"prefix":"*","index":8,"text":"print '=== FOLLOWS TEST SUMMARY ==='"},"stepLog":"18:20:41.137 [print] === FOLLOWS TEST SUMMARY === \n"},{"result":{"nanos":879400,"startTime":1750677641137,"endTime":1750677641138,"millis":0.8794,"status":"passed"},"step":{"line":119,"prefix":"*","index":9,"text":"print 'Total test cases: ' + testResults.length"},"stepLog":"18:20:41.138 [print] Total test cases: 14 \n"},{"result":{"nanos":707300,"startTime":1750677641138,"endTime":1750677641139,"millis":0.7073,"status":"passed"},"step":{"line":120,"prefix":"*","index":10,"text":"print 'Passed: ' + passedTests.length"},"stepLog":"18:20:41.139 [print] Passed: 6 \n"},{"result":{"nanos":638700,"startTime":1750677641139,"endTime":1750677641140,"millis":0.6387,"status":"passed"},"step":{"line":121,"prefix":"*","index":11,"text":"print 'Failed: ' + failedTests.length"},"stepLog":"18:20:41.139 [print] Failed: 8 \n"},{"result":{"nanos":10375200,"startTime":1750677641139,"endTime":1750677641149,"millis":10.3752,"status":"passed"},"step":{"line":122,"prefix":"*","index":12,"text":"if (testResults.length > 0) print ('Success rate: ' + Math.round((passedTests.length \/ testResults.length) * 100) + '%')"}},{"result":{"nanos":3562800,"startTime":1750677641151,"endTime":1750677641155,"millis":3.5628,"status":"passed"},"step":{"comments":["# Log failed tests"],"line":125,"prefix":"*","index":13,"text":"if (failedTests.length > 0) karate.forEach(failedTests, function(test, index) { karate.log('❌ Failed test #' + (index + 1) + ': ' + test.failureReason); })"},"stepLog":"18:20:41.152 ❌ Failed test #1: Status mismatch: Expected 400, got 500 \n18:20:41.153 ❌ Failed test #2: Status mismatch: Expected 400, got 404 \n18:20:41.153 ❌ Failed test #3: Status mismatch: Expected 400, got 201 \n18:20:41.154 ❌ Failed test #4: Status mismatch: Expected 400, got 404 \n18:20:41.154 ❌ Failed test #5: Status mismatch: Expected 400, got 404 \n18:20:41.154 ❌ Failed test #6: Status mismatch: Expected 400, got 404 \n18:20:41.154 ❌ Failed test #7: Status mismatch: Expected 400, got 404 \n18:20:41.154 ❌ Failed test #8: Status mismatch: Expected 400, got 404 \n"},{"result":{"nanos":825800,"startTime":1750677641154,"endTime":1750677641155,"millis":0.8258,"status":"passed"},"step":{"line":127,"prefix":"*","index":14,"text":"print 'Hoàn thành tất cả test cases follows. Đang ghi kết quả vào Excel...'"},"stepLog":"18:20:41.155 [print] Hoàn thành tất cả test cases follows. Đang ghi kết quả vào Excel... \n"},{"result":{"nanos":312957100,"startTime":1750677641155,"endTime":1750677641468,"millis":312.9571,"status":"passed"},"step":{"comments":["# Ghi kết quả vào Excel"],"line":130,"prefix":"*","index":15,"text":"def writeSuccess = writeToExcel(excelFilePath, sheetName, testResults)"}},{"result":{"nanos":1358700,"startTime":1750677641467,"endTime":1750677641468,"millis":1.3587,"status":"passed"},"step":{"line":131,"prefix":"*","index":16,"text":"if (writeSuccess) karate.log('✅ Đã ghi kết quả follows vào Excel thành công!')"},"stepLog":"18:20:41.470 ✅ Đã ghi kết quả follows vào Excel thành công! \n"},{"result":{"nanos":574400,"startTime":1750677641470,"endTime":1750677641471,"millis":0.5744,"status":"passed"},"step":{"line":132,"prefix":"*","index":17,"text":"if (!writeSuccess) karate.log('❌ Lỗi khi ghi kết quả follows vào Excel!')"}},{"result":{"nanos":1622400,"startTime":1750677641470,"endTime":1750677641472,"millis":1.6224,"status":"passed"},"step":{"comments":["# Warning nếu có test cases failed"],"line":135,"prefix":"*","index":18,"text":"if (failedTests.length > 0) karate.log('⚠️ WARNING: ' + failedTests.length + ' out of ' + testResults.length + ' test cases failed')"},"stepLog":"18:20:41.472 ⚠️ WARNING: 8 out of 14 test cases failed \n"}],"executorName":"main","line":16,"name":"Chạy tất cả test cases follows từ Excel","description":"","durationMillis":3635.493,"startTime":1750677637665,"failed":false,"refId":"[1:16]","endTime":1750677641472,"exampleIndex":-1}],"callDepth":0,"name":"Follows Testing từ Excel - Sheet follows","description":"","resultDate":"2025-06-23 06:20:41 PM","durationMillis":3635.493,"passedCount":1}