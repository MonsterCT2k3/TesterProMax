{"failedCount":0,"prefixedPath":"classpath:features\/unlike\/unlike-excel.feature","packageQualifiedName":"features.unlike.unlike-excel","loopIndex":-1,"relativePath":"features\/unlike\/unlike-excel.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1007500,"startTime":1750696897304,"endTime":1750696897305,"millis":1.0075,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"},"stepLog":"23:41:37.258 karate.env system property was: null \n"},{"result":{"nanos":14495700,"startTime":1750696897308,"endTime":1750696897322,"millis":14.4957,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:37.316 karate.env system property was: null \n"},{"result":{"nanos":45310700,"startTime":1750696897323,"endTime":1750696897368,"millis":45.3107,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def readExcel = read('classpath:utils\/read-excel.js')"}},{"result":{"nanos":21312100,"startTime":1750696897368,"endTime":1750696897389,"millis":21.3121,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def writeToExcel = read('classpath:utils\/write-excel.js')"}},{"result":{"nanos":682800,"startTime":1750696897390,"endTime":1750696897391,"millis":0.6828,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def excelFilePath = 'src\/test\/java\/data\/data.xlsx'"}},{"result":{"nanos":756600,"startTime":1750696897391,"endTime":1750696897392,"millis":0.7566,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def sheetName = 'unlike'"}},{"result":{"nanos":960179400,"startTime":1750696897392,"endTime":1750696898352,"millis":960.1794,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def testData = readExcel(excelFilePath, sheetName)"},"stepLog":"23:41:38.239 Headers found: [\n  \"bearerToken\",\n  \"targetId\",\n  \"testDescription\",\n  \"expectedStatus\",\n  \"expectedResult\",\n  \"responseStatus\",\n  \"result\",\n  \"testStatus\",\n  \"failureReason\"\n]\n \n23:41:38.343 Read data from Excel: [\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"e3f481cc-53c6-41c8-9a28-cd2f9c4f2f46\",\n    \"testDescription\": \"Unlike post hợp lệ\",\n    \"expectedStatus\": 200.0,\n    \"expectedResult\": \"{\\\"message\\\": \\\"Unliked successfully\\\"}\",\n    \"responseStatus\": \"200\",\n    \"result\": \"{\\\"message\\\":\\\"Đã bỏ thích\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"EMPTY\",\n    \"testDescription\": \"Thiếu trường targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId is required\\\"}\",\n    \"responseStatus\": \"500\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.like.findUnique()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\like\\\\\\\\like.service.ts:64:41\\\\n\\\\n  61 }\\\\n  62 \\\\n  63 async unlike(userId: string, targetId: string, type: string) {\\\\n→ 64   const like = await this.prisma.like.findUnique({\\\\n         where: {\\\\n           userId_targetId_type: {\\\\n             userId: \\\\\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\\\\\",\\\\n             type: \\\\\\\"post\\\\\\\",\\\\n       +     targetId: String\\\\n           }\\\\n         }\\\\n       })\\\\n\\\\nArgument `targetId` is missing.\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:07.580Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"\",\n    \"testDescription\": \"targetId rỗng\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot be empty\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy lượt thích\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:07.687Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"NO_TOKEN\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"testDescription\": \"Thiếu token xác thực\",\n    \"expectedStatus\": 401.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:07.739Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"INVALID_TOKEN\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"testDescription\": \"Token không hợp lệ\",\n    \"expectedStatus\": 401.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid or expired token\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:07.770Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"nonexistent-id-123\",\n    \"testDescription\": \"targetId không tồn tại\",\n    \"expectedStatus\": 404.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Target not found\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy lượt thích\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:07.848Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"testDescription\": \"Chưa like trước đó\",\n    \"expectedStatus\": 404.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Not liked yet\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy lượt thích\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:07.933Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"invalid_id!@#\",\n    \"testDescription\": \"targetId không hợp lệ format\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid targetId format\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy lượt thích\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:08.015Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"target123' OR '1'='1\",\n    \"testDescription\": \"Kiểm tra SQL Injection trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n    \"responseStatus\": 404.0,\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy lượt thích\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:08.101Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"<script>alert(\\\"xss\\\")<\/script>\",\n    \"testDescription\": \"Kiểm tra XSS trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy lượt thích\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:08.184Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \" \",\n    \"testDescription\": \"Kiểm tra khoảng trắng trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot contain only whitespace\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy lượt thích\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:08.275Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"NULL_VALUE\",\n    \"testDescription\": \"Kiểm tra trường null targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot be null\\\"}\",\n    \"responseStatus\": \"500\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.like.findUnique()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\like\\\\\\\\like.service.ts:64:41\\\\n\\\\n  61 }\\\\n  62 \\\\n  63 async unlike(userId: string, targetId: string, type: string) {\\\\n→ 64   const like = await this.prisma.like.findUnique({\\\\n         where: {\\\\n           userId_targetId_type: {\\\\n             userId: \\\\\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\\\\\",\\\\n             type: \\\\\\\"post\\\\\\\",\\\\n       +     targetId: String\\\\n           }\\\\n         }\\\\n       })\\\\n\\\\nArgument `targetId` must not be null.\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:08.331Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n    \"testDescription\": \"Kiểm tra độ dài targetId quá dài\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId exceeds maximum length\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy lượt thích\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:08.419Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"target@#$%^&*()\",\n    \"testDescription\": \"Kiểm tra ký tự đặc biệt trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid targetId format\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Không tìm thấy lượt thích\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:32:08.509Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"\",\n    \"testDescription\": \"\",\n    \"expectedStatus\": \"\",\n    \"expectedResult\": \"\",\n    \"responseStatus\": \"\",\n    \"result\": \"\",\n    \"testStatus\": \"\",\n    \"failureReason\": \"\"\n  }\n]\n \n"},{"result":{"nanos":5387600,"startTime":1750696898353,"endTime":1750696898358,"millis":5.3876,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"print 'Đọc được ' + testData.length + ' test cases từ Excel sheet: ' + sheetName"},"stepLog":"23:41:38.358 [print] Đọc được 15 test cases từ Excel sheet: unlike \n"},{"result":{"nanos":18679100,"startTime":1750696898358,"endTime":1750696898377,"millis":18.6791,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def testResults = []"}},{"result":{"nanos":1459200,"startTime":1750696898376,"endTime":1750696898377,"millis":1.4592,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def globalBearerToken = config.bearerToken"}},{"result":{"nanos":2185600,"startTime":1750696898379,"endTime":1750696898381,"millis":2.1856,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"print 'Sử dụng global bearer token từ config:', globalBearerToken"},"stepLog":"23:41:38.381 [print] Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":3020000,"startTime":1750696898381,"endTime":1750696898384,"millis":3.02,"status":"passed"},"step":{"endLine":36,"line":17,"prefix":"*","docString":"function(testCase, actualStatus, actualResponse) {\n  var expectedStatus = testCase.expectedStatus;\n        \n  \/\/ Kiểm tra Status Code (Bắt buộc)\n  if (actualStatus != expectedStatus) {\n    return {\n      status: 'FAIL',\n      reason: 'Status mismatch: Expected ' + expectedStatus + ', got ' + actualStatus\n    };\n  }\n        \n  \/\/ Nếu status code khớp thì PASS\n  return {\n    status: 'PASS',\n    reason: 'All validations passed'\n  };\n}","index":0,"text":"def evaluateTestCase ="}},{"result":{"nanos":8102400,"startTime":1750696898384,"endTime":1750696898392,"millis":8.1024,"status":"passed"},"step":{"endLine":100,"line":38,"prefix":"*","docString":"function(testCase, index) {\n  karate.log('Đang chạy test case #' + (index + 1) + ': ' + testCase.testDescription);\n        \n  var bearerToken = '';\n        \n  \/\/ Sử dụng bearer token từ test case hoặc global config\n  if (testCase.bearerToken && testCase.bearerToken.trim() !== '') {\n    if (testCase.bearerToken === 'NO_TOKEN') {\n      \/\/ TC4: Không có token\n      bearerToken = '';\n      karate.log('Test case không sử dụng token');\n    } else if (testCase.bearerToken === 'INVALID_TOKEN') {\n      \/\/ TC5: Token không hợp lệ\n      bearerToken = 'invalid_token_123';\n      karate.log('Test case sử dụng token không hợp lệ');\n    } else {\n      \/\/ Sử dụng token từ Excel nếu có\n      bearerToken = testCase.bearerToken;\n      karate.log('Sử dụng bearer token từ Excel:', bearerToken);\n    }\n  } else {\n    \/\/ Sử dụng global token từ config\n    bearerToken = globalBearerToken;\n    karate.log('Sử dụng global bearer token từ config:', bearerToken);\n  }\n        \n  \/\/ Gọi API unlike (type cố định là \"post\")\n  var response = karate.call('classpath:features\/helpers\/unlike-single-call.feature', {\n    bearerToken: bearerToken,\n    targetId: testCase.targetId || ''\n  });\n        \n  var actualStatus = response.actualStatus;\n  var actualResult = '';\n        \n  \/\/ Ghi response thực tế vào result\n  if (response.actualResponse) {\n    actualResult = JSON.stringify(response.actualResponse);\n  } else {\n    actualResult = 'No response body';\n  }\n        \n  \/\/ ===== ĐÁNH GIÁ TEST CASE =====\n  var testEvaluation = evaluateTestCase(testCase, actualStatus, response.actualResponse);\n        \n  if (testEvaluation.status === 'PASS') {\n    karate.log('✅ TEST PASSED - ' + testEvaluation.reason);\n  } else {\n    karate.log('❌ TEST FAILED - ' + testEvaluation.reason);\n  }\n        \n  karate.log('Test case #' + (index + 1) + ' - Status: ' + actualStatus + ', Result: ' + actualResult);\n        \n  return {\n    responseStatus: actualStatus,\n    result: actualResult,\n    testStatus: testEvaluation.status,\n    failureReason: testEvaluation.reason\n  };\n}","index":1,"text":"def runTest ="}},{"result":{"nanos":1073900,"startTime":1750696898392,"endTime":1750696898393,"millis":1.0739,"status":"passed"},"step":{"line":102,"prefix":"*","index":2,"text":"print 'Bắt đầu chạy từng test case...'"},"stepLog":"23:41:38.393 [print] Bắt đầu chạy từng test case... \n"},{"result":{"nanos":1989948700,"startTime":1750696898394,"endTime":1750696900384,"millis":1989.9487,"status":"passed"},"step":{"line":103,"prefix":"*","index":3,"text":"def results = karate.map(testData, runTest)"},"stepLog":"23:41:40.383 ❌ TEST FAILED - Status mismatch: Expected , got 404 \n23:41:40.383 Test case #15 - Status: 404, Result: {\"success\":false,\"statusCode\":404,\"message\":\"Không tìm thấy lượt thích\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:40.376Z\"} \n","callResults":[{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":630.5864,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"e3f481cc-53c6-41c8-9a28-cd2f9c4f2f46"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":18232800,"startTime":1750696898424,"endTime":1750696898442,"millis":18.2328,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:38.398 Đang chạy test case #1: Unlike post hợp lệ \n23:41:38.400 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:38.431 karate.env system property was: null \n"},{"result":{"nanos":3165100,"startTime":1750696898444,"endTime":1750696898447,"millis":3.1651,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":10961100,"startTime":1750696898447,"endTime":1750696898458,"millis":10.9611,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":10416000,"startTime":1750696898459,"endTime":1750696898469,"millis":10.416,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":2137500,"startTime":1750696898469,"endTime":1750696898471,"millis":2.1375,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":8304100,"startTime":1750696898472,"endTime":1750696898480,"millis":8.3041,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":2572900,"startTime":1750696898480,"endTime":1750696898483,"millis":2.5729,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":3947300,"startTime":1750696898483,"endTime":1750696898487,"millis":3.9473,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":1083000,"startTime":1750696898487,"endTime":1750696898488,"millis":1.083,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":564965400,"startTime":1750696898488,"endTime":1750696899053,"millis":564.9654,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:38.915 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:39.052 response time in milliseconds: 135\n1 < 200\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 66\n1 < ETag: W\/\"42-ZW95nhVL3cRDS6oE\/ew2VwZ8cMw\"\n1 < Date: Mon, 23 Jun 2025 16:41:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã bỏ thích\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n\n\n"},{"result":{"nanos":392500,"startTime":1750696899053,"endTime":1750696899053,"millis":0.3925,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":222300,"startTime":1750696899053,"endTime":1750696899053,"millis":0.2223,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":1029600,"startTime":1750696899054,"endTime":1750696899055,"millis":1.0296,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:39.055 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":1484400,"startTime":1750696899055,"endTime":1750696899056,"millis":1.4844,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:39.056 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":1672400,"startTime":1750696899056,"endTime":1750696899058,"millis":1.6724,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:39.058 [print] Response status: 200 body: {\n  \"message\": \"Đã bỏ thích\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":630.5864,"startTime":1750696898424,"failed":false,"refId":"[1:3]","endTime":1750696899058,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":85.9402,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"EMPTY"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":23252000,"startTime":1750696899100,"endTime":1750696899123,"millis":23.252,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:39.079 ✅ TEST PASSED - All validations passed \n23:41:39.081 Test case #1 - Status: 200, Result: {\"message\":\"Đã bỏ thích\",\"statusCode\":200,\"status\":\"success\"} \n23:41:39.084 Đang chạy test case #2: Thiếu trường targetId \n23:41:39.084 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:39.109 karate.env system property was: null \n"},{"result":{"nanos":2096700,"startTime":1750696899123,"endTime":1750696899125,"millis":2.0967,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":3395300,"startTime":1750696899126,"endTime":1750696899129,"millis":3.3953,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":1619800,"startTime":1750696899129,"endTime":1750696899131,"millis":1.6198,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":907400,"startTime":1750696899131,"endTime":1750696899132,"millis":0.9074,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":1933700,"startTime":1750696899132,"endTime":1750696899134,"millis":1.9337,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":946100,"startTime":1750696899134,"endTime":1750696899135,"millis":0.9461,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":784600,"startTime":1750696899135,"endTime":1750696899136,"millis":0.7846,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":420600,"startTime":1750696899136,"endTime":1750696899136,"millis":0.4206,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":47589000,"startTime":1750696899136,"endTime":1750696899184,"millis":47.589,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:39.138 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 15\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"type\": \"post\"\n}\n\n\n23:41:39.183 response time in milliseconds: 43\n1 < 500\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 653\n1 < ETag: W\/\"28d-PQYUhpho56KodJUr9rAZbX\/Bvgc\"\n1 < Date: Mon, 23 Jun 2025 16:41:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.like.findUnique()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\like\\\\like.service.ts:64:41\\n\\n  61 }\\n  62 \\n  63 async unlike(userId: string, targetId: string, type: string) {\\n→ 64   const like = await this.prisma.like.findUnique({\\n         where: {\\n           userId_targetId_type: {\\n             userId: \\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\n             type: \\\"post\\\",\\n       +     targetId: String\\n           }\\n         }\\n       })\\n\\nArgument `targetId` is missing.\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.179Z\"\n}\n\n\n"},{"result":{"nanos":921400,"startTime":1750696899184,"endTime":1750696899185,"millis":0.9214,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":287800,"startTime":1750696899184,"endTime":1750696899184,"millis":0.2878,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":718700,"startTime":1750696899186,"endTime":1750696899187,"millis":0.7187,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:39.186 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":694600,"startTime":1750696899186,"endTime":1750696899187,"millis":0.6946,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:39.187 [print] Request body: {\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":372500,"startTime":1750696899187,"endTime":1750696899187,"millis":0.3725,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:39.187 [print] Response status: 500 body: {\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.like.findUnique()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\like\\\\like.service.ts:64:41\\n\\n  61 }\\n  62 \\n  63 async unlike(userId: string, targetId: string, type: string) {\\n→ 64   const like = await this.prisma.like.findUnique({\\n         where: {\\n           userId_targetId_type: {\\n             userId: \\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\n             type: \\\"post\\\",\\n       +     targetId: String\\n           }\\n         }\\n       })\\n\\nArgument `targetId` is missing.\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.179Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":85.9402,"startTime":1750696899100,"failed":false,"refId":"[1:3]","endTime":1750696899188,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":81.6441,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":""},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3926200,"startTime":1750696899205,"endTime":1750696899209,"millis":3.9262,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:39.195 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 \n23:41:39.196 Test case #2 - Status: 500, Result: {\"success\":false,\"statusCode\":500,\"message\":\"\\nInvalid `this.prisma.like.findUnique()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\like\\\\like.service.ts:64:41\\n\\n  61 }\\n  62 \\n  63 async unlike(userId: string, targetId: string, type: string) {\\n→ 64   const like = await this.prisma.like.findUnique({\\n         where: {\\n           userId_targetId_type: {\\n             userId: \\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\n             type: \\\"post\\\",\\n       +     targetId: String\\n           }\\n         }\\n       })\\n\\nArgument `targetId` is missing.\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:39.179Z\"} \n23:41:39.197 Đang chạy test case #3: targetId rỗng \n23:41:39.198 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:39.208 karate.env system property was: null \n"},{"result":{"nanos":354900,"startTime":1750696899210,"endTime":1750696899210,"millis":0.3549,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":875700,"startTime":1750696899210,"endTime":1750696899211,"millis":0.8757,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":875600,"startTime":1750696899211,"endTime":1750696899212,"millis":0.8756,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":288900,"startTime":1750696899211,"endTime":1750696899211,"millis":0.2889,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":148100,"startTime":1750696899212,"endTime":1750696899212,"millis":0.1481,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":68100,"startTime":1750696899212,"endTime":1750696899212,"millis":0.0681,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":798800,"startTime":1750696899212,"endTime":1750696899213,"millis":0.7988,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":177600,"startTime":1750696899212,"endTime":1750696899212,"millis":0.1776,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":71470200,"startTime":1750696899212,"endTime":1750696899283,"millis":71.4702,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:39.215 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:39.284 response time in milliseconds: 68\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 135\n1 < ETag: W\/\"87-GT1SDfAa2sRAxlepmg0iQh3nvxM\"\n1 < Date: Mon, 23 Jun 2025 16:41:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.281Z\"\n}\n\n\n"},{"result":{"nanos":297000,"startTime":1750696899285,"endTime":1750696899285,"millis":0.297,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":235200,"startTime":1750696899285,"endTime":1750696899285,"millis":0.2352,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":697000,"startTime":1750696899286,"endTime":1750696899287,"millis":0.697,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:39.286 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":732700,"startTime":1750696899286,"endTime":1750696899287,"millis":0.7327,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:39.286 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":698100,"startTime":1750696899287,"endTime":1750696899288,"millis":0.6981,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:39.287 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.281Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":81.6441,"startTime":1750696899205,"failed":false,"refId":"[1:3]","endTime":1750696899287,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":54.9709,"callArg":{"bearerToken":"","targetId":"c8161412-bc98-49ec-88ff-57b99cc2ce67"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":6465600,"startTime":1750696899304,"endTime":1750696899310,"millis":6.4656,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:39.290 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n23:41:39.290 Test case #3 - Status: 404, Result: {\"success\":false,\"statusCode\":404,\"message\":\"Không tìm thấy lượt thích\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:39.281Z\"} \n23:41:39.292 Đang chạy test case #4: Thiếu token xác thực \n23:41:39.292 Test case không sử dụng token \n23:41:39.308 karate.env system property was: null \n"},{"result":{"nanos":523300,"startTime":1750696899311,"endTime":1750696899312,"millis":0.5233,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":279000,"startTime":1750696899311,"endTime":1750696899311,"millis":0.279,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":29018000,"startTime":1750696899312,"endTime":1750696899341,"millis":29.018,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":1646800,"startTime":1750696899341,"endTime":1750696899343,"millis":1.6468,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":497300,"startTime":1750696899342,"endTime":1750696899342,"millis":0.4973,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":164000,"startTime":1750696899344,"endTime":1750696899344,"millis":0.164,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":1813900,"startTime":1750696899344,"endTime":1750696899346,"millis":1.8139,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":261600,"startTime":1750696899345,"endTime":1750696899345,"millis":0.2616,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":10238900,"startTime":1750696899346,"endTime":1750696899356,"millis":10.2389,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:39.348 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: #(Authorization)\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:39.355 response time in milliseconds: 6\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 114\n1 < ETag: W\/\"72-uNJYVp90qJFuUubUbfT0uOkgxwA\"\n1 < Date: Mon, 23 Jun 2025 16:41:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.352Z\"\n}\n\n\n"},{"result":{"nanos":289800,"startTime":1750696899357,"endTime":1750696899357,"millis":0.2898,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":173600,"startTime":1750696899357,"endTime":1750696899357,"millis":0.1736,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":858100,"startTime":1750696899357,"endTime":1750696899358,"millis":0.8581,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:39.358 [print] Calling unlike API với bearerToken:  \n"},{"result":{"nanos":1154500,"startTime":1750696899358,"endTime":1750696899359,"millis":1.1545,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:39.359 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":1586500,"startTime":1750696899359,"endTime":1750696899361,"millis":1.5865,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:39.361 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.352Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":54.9709,"startTime":1750696899304,"failed":false,"refId":"[1:3]","endTime":1750696899361,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":15.7967,"callArg":{"bearerToken":"invalid_token_123","targetId":"c8161412-bc98-49ec-88ff-57b99cc2ce67"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2515000,"startTime":1750696899375,"endTime":1750696899378,"millis":2.515,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:39.363 ✅ TEST PASSED - All validations passed \n23:41:39.363 Test case #4 - Status: 401, Result: {\"success\":false,\"statusCode\":401,\"message\":\"Unauthorized\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:39.352Z\"} \n23:41:39.364 Đang chạy test case #5: Token không hợp lệ \n23:41:39.365 Test case sử dụng token không hợp lệ \n23:41:39.376 karate.env system property was: null \n"},{"result":{"nanos":324700,"startTime":1750696899379,"endTime":1750696899379,"millis":0.3247,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":456700,"startTime":1750696899379,"endTime":1750696899379,"millis":0.4567,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":503600,"startTime":1750696899379,"endTime":1750696899380,"millis":0.5036,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":265800,"startTime":1750696899380,"endTime":1750696899380,"millis":0.2658,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":121900,"startTime":1750696899380,"endTime":1750696899380,"millis":0.1219,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":53300,"startTime":1750696899380,"endTime":1750696899380,"millis":0.0533,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":362200,"startTime":1750696899380,"endTime":1750696899380,"millis":0.3622,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":225600,"startTime":1750696899381,"endTime":1750696899381,"millis":0.2256,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":8007500,"startTime":1750696899381,"endTime":1750696899389,"millis":8.0075,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:39.382 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer invalid_token_123\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:39.389 response time in milliseconds: 7\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 114\n1 < ETag: W\/\"72-30ovmgWs+cQmanDrZNmrHoGnceQ\"\n1 < Date: Mon, 23 Jun 2025 16:41:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.386Z\"\n}\n\n\n"},{"result":{"nanos":228400,"startTime":1750696899389,"endTime":1750696899389,"millis":0.2284,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":206300,"startTime":1750696899390,"endTime":1750696899390,"millis":0.2063,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":1152100,"startTime":1750696899390,"endTime":1750696899391,"millis":1.1521,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:39.391 [print] Calling unlike API với bearerToken: invalid_token_123 \n"},{"result":{"nanos":816800,"startTime":1750696899391,"endTime":1750696899392,"millis":0.8168,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:39.391 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":556800,"startTime":1750696899392,"endTime":1750696899393,"millis":0.5568,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:39.392 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.386Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":15.7967,"startTime":1750696899375,"failed":false,"refId":"[1:3]","endTime":1750696899392,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":118.6685,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"nonexistent-id-123"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":8697200,"startTime":1750696899423,"endTime":1750696899432,"millis":8.6972,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:39.394 ✅ TEST PASSED - All validations passed \n23:41:39.394 Test case #5 - Status: 401, Result: {\"success\":false,\"statusCode\":401,\"message\":\"Unauthorized\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:39.386Z\"} \n23:41:39.395 Đang chạy test case #6: targetId không tồn tại \n23:41:39.395 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:39.430 karate.env system property was: null \n"},{"result":{"nanos":267300,"startTime":1750696899431,"endTime":1750696899431,"millis":0.2673,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":1780600,"startTime":1750696899432,"endTime":1750696899434,"millis":1.7806,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":2383200,"startTime":1750696899434,"endTime":1750696899436,"millis":2.3832,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":387800,"startTime":1750696899436,"endTime":1750696899436,"millis":0.3878,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":130700,"startTime":1750696899437,"endTime":1750696899437,"millis":0.1307,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":53600,"startTime":1750696899437,"endTime":1750696899437,"millis":0.0536,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":584500,"startTime":1750696899437,"endTime":1750696899438,"millis":0.5845,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":168600,"startTime":1750696899438,"endTime":1750696899438,"millis":0.1686,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":100844000,"startTime":1750696899438,"endTime":1750696899539,"millis":100.844,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:39.440 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:39.537 response time in milliseconds: 96\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 135\n1 < ETag: W\/\"87-pkQpds0cAmJsOZRaARnsjquyayc\"\n1 < Date: Mon, 23 Jun 2025 16:41:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.527Z\"\n}\n\n\n"},{"result":{"nanos":271800,"startTime":1750696899539,"endTime":1750696899539,"millis":0.2718,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":171200,"startTime":1750696899539,"endTime":1750696899539,"millis":0.1712,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":981700,"startTime":1750696899540,"endTime":1750696899541,"millis":0.9817,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:39.540 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":1139300,"startTime":1750696899541,"endTime":1750696899542,"millis":1.1393,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:39.542 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":807000,"startTime":1750696899542,"endTime":1750696899543,"millis":0.807,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:39.543 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.527Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":118.6685,"startTime":1750696899422,"failed":false,"refId":"[1:3]","endTime":1750696899543,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":109.2138,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"c8161412-bc98-49ec-88ff-57b99cc2ce67"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":5588400,"startTime":1750696899564,"endTime":1750696899570,"millis":5.5884,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:39.545 ✅ TEST PASSED - All validations passed \n23:41:39.545 Test case #6 - Status: 404, Result: {\"success\":false,\"statusCode\":404,\"message\":\"Không tìm thấy lượt thích\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:39.527Z\"} \n23:41:39.546 Đang chạy test case #7: Chưa like trước đó \n23:41:39.547 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:39.567 karate.env system property was: null \n"},{"result":{"nanos":1015400,"startTime":1750696899571,"endTime":1750696899572,"millis":1.0154,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":2141000,"startTime":1750696899572,"endTime":1750696899574,"millis":2.141,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":1061100,"startTime":1750696899573,"endTime":1750696899574,"millis":1.0611,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":3621500,"startTime":1750696899576,"endTime":1750696899580,"millis":3.6215,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":418600,"startTime":1750696899580,"endTime":1750696899580,"millis":0.4186,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":234800,"startTime":1750696899580,"endTime":1750696899580,"millis":0.2348,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":807000,"startTime":1750696899580,"endTime":1750696899581,"millis":0.807,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":351100,"startTime":1750696899581,"endTime":1750696899581,"millis":0.3511,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":90541000,"startTime":1750696899581,"endTime":1750696899672,"millis":90.541,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:39.584 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:39.671 response time in milliseconds: 86\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 135\n1 < ETag: W\/\"87-95LSDFLUFA3umKKfFMbFDqblizU\"\n1 < Date: Mon, 23 Jun 2025 16:41:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.667Z\"\n}\n\n\n"},{"result":{"nanos":258900,"startTime":1750696899673,"endTime":1750696899673,"millis":0.2589,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":107700,"startTime":1750696899673,"endTime":1750696899673,"millis":0.1077,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":999300,"startTime":1750696899673,"endTime":1750696899674,"millis":0.9993,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:39.674 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":1067500,"startTime":1750696899674,"endTime":1750696899675,"millis":1.0675,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:39.675 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":1000500,"startTime":1750696899675,"endTime":1750696899676,"millis":1.0005,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:39.676 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.667Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":109.2138,"startTime":1750696899564,"failed":false,"refId":"[1:3]","endTime":1750696899676,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":104.9087,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"invalid_id!@#"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2812800,"startTime":1750696899692,"endTime":1750696899695,"millis":2.8128,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:39.678 ✅ TEST PASSED - All validations passed \n23:41:39.679 Test case #7 - Status: 404, Result: {\"success\":false,\"statusCode\":404,\"message\":\"Không tìm thấy lượt thích\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:39.667Z\"} \n23:41:39.680 Đang chạy test case #8: targetId không hợp lệ format \n23:41:39.681 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:39.693 karate.env system property was: null \n"},{"result":{"nanos":953500,"startTime":1750696899695,"endTime":1750696899696,"millis":0.9535,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":1091700,"startTime":1750696899698,"endTime":1750696899699,"millis":1.0917,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":1659100,"startTime":1750696899700,"endTime":1750696899702,"millis":1.6591,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":2596600,"startTime":1750696899701,"endTime":1750696899704,"millis":2.5966,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":360700,"startTime":1750696899703,"endTime":1750696899703,"millis":0.3607,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":131000,"startTime":1750696899703,"endTime":1750696899703,"millis":0.131,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":885900,"startTime":1750696899705,"endTime":1750696899706,"millis":0.8859,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":412100,"startTime":1750696899706,"endTime":1750696899706,"millis":0.4121,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":90622700,"startTime":1750696899707,"endTime":1750696899798,"millis":90.6227,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:39.710 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:39.795 response time in milliseconds: 83\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 135\n1 < ETag: W\/\"87-YO9MC9MRpfDBjIFxI4SmFaCvVjI\"\n1 < Date: Mon, 23 Jun 2025 16:41:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.791Z\"\n}\n\n\n"},{"result":{"nanos":423800,"startTime":1750696899798,"endTime":1750696899798,"millis":0.4238,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":258600,"startTime":1750696899798,"endTime":1750696899798,"millis":0.2586,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":862300,"startTime":1750696899799,"endTime":1750696899800,"millis":0.8623,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:39.799 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":1138800,"startTime":1750696899799,"endTime":1750696899800,"millis":1.1388,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:39.800 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":699100,"startTime":1750696899800,"endTime":1750696899801,"millis":0.6991,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:39.800 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.791Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":104.9087,"startTime":1750696899692,"failed":false,"refId":"[1:3]","endTime":1750696899802,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":84.6158,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"target123' OR '1'='1"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":6544400,"startTime":1750696899816,"endTime":1750696899823,"millis":6.5444,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:39.804 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n23:41:39.804 Test case #8 - Status: 404, Result: {\"success\":false,\"statusCode\":404,\"message\":\"Không tìm thấy lượt thích\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:39.791Z\"} \n23:41:39.805 Đang chạy test case #9: Kiểm tra SQL Injection trong targetId \n23:41:39.805 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:39.821 karate.env system property was: null \n"},{"result":{"nanos":507200,"startTime":1750696899824,"endTime":1750696899825,"millis":0.5072,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":357900,"startTime":1750696899824,"endTime":1750696899824,"millis":0.3579,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":411900,"startTime":1750696899825,"endTime":1750696899825,"millis":0.4119,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":195100,"startTime":1750696899825,"endTime":1750696899825,"millis":0.1951,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":76300,"startTime":1750696899825,"endTime":1750696899825,"millis":0.0763,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":73500,"startTime":1750696899825,"endTime":1750696899825,"millis":0.0735,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":409000,"startTime":1750696899825,"endTime":1750696899825,"millis":0.409,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":133400,"startTime":1750696899826,"endTime":1750696899826,"millis":0.1334,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":74178800,"startTime":1750696899826,"endTime":1750696899900,"millis":74.1788,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:39.828 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:39.900 response time in milliseconds: 72\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 135\n1 < ETag: W\/\"87-HbL0QItEk7K13Rs0wJqS\/i\/yLGw\"\n1 < Date: Mon, 23 Jun 2025 16:41:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.898Z\"\n}\n\n\n"},{"result":{"nanos":130000,"startTime":1750696899901,"endTime":1750696899901,"millis":0.13,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":71100,"startTime":1750696899901,"endTime":1750696899901,"millis":0.0711,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":479600,"startTime":1750696899901,"endTime":1750696899901,"millis":0.4796,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:39.902 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":625900,"startTime":1750696899902,"endTime":1750696899903,"millis":0.6259,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:39.902 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":421700,"startTime":1750696899902,"endTime":1750696899902,"millis":0.4217,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:39.903 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.898Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":84.6158,"startTime":1750696899816,"failed":false,"refId":"[1:3]","endTime":1750696899903,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":83.0745,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"<script>alert(\"xss\")<\/script>"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2774900,"startTime":1750696899912,"endTime":1750696899915,"millis":2.7749,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:39.904 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n23:41:39.904 Test case #9 - Status: 404, Result: {\"success\":false,\"statusCode\":404,\"message\":\"Không tìm thấy lượt thích\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:39.898Z\"} \n23:41:39.904 Đang chạy test case #10: Kiểm tra XSS trong targetId \n23:41:39.904 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:39.914 karate.env system property was: null \n"},{"result":{"nanos":279900,"startTime":1750696899915,"endTime":1750696899915,"millis":0.2799,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":403900,"startTime":1750696899915,"endTime":1750696899915,"millis":0.4039,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":863200,"startTime":1750696899915,"endTime":1750696899916,"millis":0.8632,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":314700,"startTime":1750696899917,"endTime":1750696899917,"millis":0.3147,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":87800,"startTime":1750696899917,"endTime":1750696899917,"millis":0.0878,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":56300,"startTime":1750696899917,"endTime":1750696899917,"millis":0.0563,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":305500,"startTime":1750696899917,"endTime":1750696899917,"millis":0.3055,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":173200,"startTime":1750696899917,"endTime":1750696899917,"millis":0.1732,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":72853900,"startTime":1750696899918,"endTime":1750696899991,"millis":72.8539,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:39.920 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:39.989 response time in milliseconds: 69\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 135\n1 < ETag: W\/\"87-hqqAJt9G8NgpEtaK8\/nBAxBqnRM\"\n1 < Date: Mon, 23 Jun 2025 16:41:39 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.986Z\"\n}\n\n\n"},{"result":{"nanos":765200,"startTime":1750696899991,"endTime":1750696899992,"millis":0.7652,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":184100,"startTime":1750696899992,"endTime":1750696899992,"millis":0.1841,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":1780700,"startTime":1750696899992,"endTime":1750696899994,"millis":1.7807,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:39.994 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":1370800,"startTime":1750696899994,"endTime":1750696899995,"millis":1.3708,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:39.995 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":860400,"startTime":1750696899996,"endTime":1750696899997,"millis":0.8604,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:39.996 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:39.986Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":83.0745,"startTime":1750696899912,"failed":false,"refId":"[1:3]","endTime":1750696899996,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":78.4848,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":" "},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3209000,"startTime":1750696900011,"endTime":1750696900014,"millis":3.209,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:39.999 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n23:41:39.999 Test case #10 - Status: 404, Result: {\"success\":false,\"statusCode\":404,\"message\":\"Không tìm thấy lượt thích\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:39.986Z\"} \n23:41:40.001 Đang chạy test case #11: Kiểm tra khoảng trắng trong targetId \n23:41:40.001 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:40.014 karate.env system property was: null \n"},{"result":{"nanos":233000,"startTime":1750696900015,"endTime":1750696900015,"millis":0.233,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":290300,"startTime":1750696900015,"endTime":1750696900015,"millis":0.2903,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":399300,"startTime":1750696900015,"endTime":1750696900015,"millis":0.3993,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":244600,"startTime":1750696900016,"endTime":1750696900016,"millis":0.2446,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":95200,"startTime":1750696900016,"endTime":1750696900016,"millis":0.0952,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":61800,"startTime":1750696900016,"endTime":1750696900016,"millis":0.0618,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":247800,"startTime":1750696900016,"endTime":1750696900016,"millis":0.2478,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":157200,"startTime":1750696900016,"endTime":1750696900016,"millis":0.1572,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":71586800,"startTime":1750696900017,"endTime":1750696900089,"millis":71.5868,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:40.018 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:40.088 response time in milliseconds: 68\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 135\n1 < ETag: W\/\"87-q9aqi5kAkOWq0ds6Ydse7VsgTUQ\"\n1 < Date: Mon, 23 Jun 2025 16:41:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:40.084Z\"\n}\n\n\n"},{"result":{"nanos":325600,"startTime":1750696900089,"endTime":1750696900089,"millis":0.3256,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":97500,"startTime":1750696900089,"endTime":1750696900089,"millis":0.0975,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":737000,"startTime":1750696900089,"endTime":1750696900090,"millis":0.737,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:40.090 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":498800,"startTime":1750696900090,"endTime":1750696900090,"millis":0.4988,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:40.090 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":300900,"startTime":1750696900090,"endTime":1750696900090,"millis":0.3009,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:40.091 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:40.084Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":78.4848,"startTime":1750696900011,"failed":false,"refId":"[1:3]","endTime":1750696900091,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":47.0885,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"NULL_VALUE"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1733500,"startTime":1750696900097,"endTime":1750696900099,"millis":1.7335,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:40.091 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n23:41:40.092 Test case #11 - Status: 404, Result: {\"success\":false,\"statusCode\":404,\"message\":\"Không tìm thấy lượt thích\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:40.084Z\"} \n23:41:40.092 Đang chạy test case #12: Kiểm tra trường null targetId \n23:41:40.092 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:40.097 karate.env system property was: null \n"},{"result":{"nanos":157300,"startTime":1750696900098,"endTime":1750696900098,"millis":0.1573,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":195600,"startTime":1750696900098,"endTime":1750696900098,"millis":0.1956,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":257300,"startTime":1750696900098,"endTime":1750696900098,"millis":0.2573,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":192200,"startTime":1750696900099,"endTime":1750696900099,"millis":0.1922,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":100200,"startTime":1750696900099,"endTime":1750696900099,"millis":0.1002,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":400000,"startTime":1750696900099,"endTime":1750696900099,"millis":0.4,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":78200,"startTime":1750696900099,"endTime":1750696900099,"millis":0.0782,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":129400,"startTime":1750696900099,"endTime":1750696900099,"millis":0.1294,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":42186900,"startTime":1750696900099,"endTime":1750696900141,"millis":42.1869,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:40.102 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 31\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": null,\n  \"type\": \"post\"\n}\n\n\n23:41:40.142 response time in milliseconds: 39\n1 < 500\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 659\n1 < ETag: W\/\"293-Yop3Vf4lsATK\/fmvkr8H+nP9BRc\"\n1 < Date: Mon, 23 Jun 2025 16:41:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.like.findUnique()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\like\\\\like.service.ts:64:41\\n\\n  61 }\\n  62 \\n  63 async unlike(userId: string, targetId: string, type: string) {\\n→ 64   const like = await this.prisma.like.findUnique({\\n         where: {\\n           userId_targetId_type: {\\n             userId: \\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\n             type: \\\"post\\\",\\n       +     targetId: String\\n           }\\n         }\\n       })\\n\\nArgument `targetId` must not be null.\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:40.140Z\"\n}\n\n\n"},{"result":{"nanos":118500,"startTime":1750696900142,"endTime":1750696900142,"millis":0.1185,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":55600,"startTime":1750696900143,"endTime":1750696900143,"millis":0.0556,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":309200,"startTime":1750696900143,"endTime":1750696900143,"millis":0.3092,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:40.143 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":663700,"startTime":1750696900143,"endTime":1750696900144,"millis":0.6637,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:40.144 [print] Request body: {\n  \"targetId\": null,\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":510900,"startTime":1750696900144,"endTime":1750696900145,"millis":0.5109,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:40.144 [print] Response status: 500 body: {\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.like.findUnique()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\like\\\\like.service.ts:64:41\\n\\n  61 }\\n  62 \\n  63 async unlike(userId: string, targetId: string, type: string) {\\n→ 64   const like = await this.prisma.like.findUnique({\\n         where: {\\n           userId_targetId_type: {\\n             userId: \\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\n             type: \\\"post\\\",\\n       +     targetId: String\\n           }\\n         }\\n       })\\n\\nArgument `targetId` must not be null.\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:40.140Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":47.0885,"startTime":1750696900096,"failed":false,"refId":"[1:3]","endTime":1750696900144,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":71.8731,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2183400,"startTime":1750696900151,"endTime":1750696900153,"millis":2.1834,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:40.146 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 \n23:41:40.146 Test case #12 - Status: 500, Result: {\"success\":false,\"statusCode\":500,\"message\":\"\\nInvalid `this.prisma.like.findUnique()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\like\\\\like.service.ts:64:41\\n\\n  61 }\\n  62 \\n  63 async unlike(userId: string, targetId: string, type: string) {\\n→ 64   const like = await this.prisma.like.findUnique({\\n         where: {\\n           userId_targetId_type: {\\n             userId: \\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\n             type: \\\"post\\\",\\n       +     targetId: String\\n           }\\n         }\\n       })\\n\\nArgument `targetId` must not be null.\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:40.140Z\"} \n23:41:40.146 Đang chạy test case #13: Kiểm tra độ dài targetId quá dài \n23:41:40.146 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:40.152 karate.env system property was: null \n"},{"result":{"nanos":250800,"startTime":1750696900154,"endTime":1750696900154,"millis":0.2508,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":407200,"startTime":1750696900155,"endTime":1750696900155,"millis":0.4072,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":390100,"startTime":1750696900155,"endTime":1750696900155,"millis":0.3901,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":247700,"startTime":1750696900156,"endTime":1750696900156,"millis":0.2477,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":93600,"startTime":1750696900156,"endTime":1750696900156,"millis":0.0936,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":77000,"startTime":1750696900156,"endTime":1750696900156,"millis":0.077,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":226000,"startTime":1750696900156,"endTime":1750696900156,"millis":0.226,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":113000,"startTime":1750696900156,"endTime":1750696900156,"millis":0.113,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":66941000,"startTime":1750696900156,"endTime":1750696900223,"millis":66.941,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:40.158 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:40.222 response time in milliseconds: 64\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 135\n1 < ETag: W\/\"87-zHcgULZb1zAwDsUk43QXlP31tus\"\n1 < Date: Mon, 23 Jun 2025 16:41:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:40.221Z\"\n}\n\n\n"},{"result":{"nanos":113100,"startTime":1750696900223,"endTime":1750696900223,"millis":0.1131,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":55700,"startTime":1750696900223,"endTime":1750696900223,"millis":0.0557,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":311200,"startTime":1750696900223,"endTime":1750696900223,"millis":0.3112,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:40.224 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":268700,"startTime":1750696900224,"endTime":1750696900224,"millis":0.2687,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:40.224 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":194600,"startTime":1750696900224,"endTime":1750696900224,"millis":0.1946,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:40.224 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:40.221Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":71.8731,"startTime":1750696900151,"failed":false,"refId":"[1:3]","endTime":1750696900224,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":71.6343,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"target@#$%^&*()"},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2361600,"startTime":1750696900232,"endTime":1750696900234,"millis":2.3616,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:40.225 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n23:41:40.225 Test case #13 - Status: 404, Result: {\"success\":false,\"statusCode\":404,\"message\":\"Không tìm thấy lượt thích\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:40.221Z\"} \n23:41:40.226 Đang chạy test case #14: Kiểm tra ký tự đặc biệt trong targetId \n23:41:40.226 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:40.234 karate.env system property was: null \n"},{"result":{"nanos":190500,"startTime":1750696900235,"endTime":1750696900235,"millis":0.1905,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":268400,"startTime":1750696900235,"endTime":1750696900235,"millis":0.2684,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":318000,"startTime":1750696900235,"endTime":1750696900235,"millis":0.318,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":164900,"startTime":1750696900235,"endTime":1750696900235,"millis":0.1649,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":71900,"startTime":1750696900236,"endTime":1750696900236,"millis":0.0719,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":60200,"startTime":1750696900236,"endTime":1750696900236,"millis":0.0602,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":288900,"startTime":1750696900236,"endTime":1750696900236,"millis":0.2889,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":138700,"startTime":1750696900236,"endTime":1750696900236,"millis":0.1387,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":66309000,"startTime":1750696900236,"endTime":1750696900302,"millis":66.309,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:40.239 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:40.303 response time in milliseconds: 63\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 135\n1 < ETag: W\/\"87-BatE0ZZ2vn+yX02nNFF4KPyCf38\"\n1 < Date: Mon, 23 Jun 2025 16:41:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:40.300Z\"\n}\n\n\n"},{"result":{"nanos":169100,"startTime":1750696900303,"endTime":1750696900303,"millis":0.1691,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":86400,"startTime":1750696900303,"endTime":1750696900303,"millis":0.0864,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":451400,"startTime":1750696900303,"endTime":1750696900303,"millis":0.4514,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:40.304 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":452000,"startTime":1750696900304,"endTime":1750696900304,"millis":0.452,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:40.304 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":303300,"startTime":1750696900304,"endTime":1750696900304,"millis":0.3033,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:40.304 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:40.300Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":71.6343,"startTime":1750696900232,"failed":false,"refId":"[1:3]","endTime":1750696900304,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unlike-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":67.4054,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":""},"failedCount":0,"packageQualifiedName":"features.helpers.unlike-single-call","relativePath":"features\/helpers\/unlike-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2397600,"startTime":1750696900312,"endTime":1750696900314,"millis":2.3976,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:41:40.305 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n23:41:40.305 Test case #14 - Status: 404, Result: {\"success\":false,\"statusCode\":404,\"message\":\"Không tìm thấy lượt thích\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:41:40.300Z\"} \n23:41:40.305 Đang chạy test case #15:  \n23:41:40.306 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:41:40.313 karate.env system property was: null \n"},{"result":{"nanos":609200,"startTime":1750696900314,"endTime":1750696900315,"millis":0.6092,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":230200,"startTime":1750696900315,"endTime":1750696900315,"millis":0.2302,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":295600,"startTime":1750696900315,"endTime":1750696900315,"millis":0.2956,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":127300,"startTime":1750696900315,"endTime":1750696900315,"millis":0.1273,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":59200,"startTime":1750696900315,"endTime":1750696900315,"millis":0.0592,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":60500,"startTime":1750696900316,"endTime":1750696900316,"millis":0.0605,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":201300,"startTime":1750696900316,"endTime":1750696900316,"millis":0.2013,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":117400,"startTime":1750696900316,"endTime":1750696900316,"millis":0.1174,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":61825500,"startTime":1750696900316,"endTime":1750696900378,"millis":61.8255,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method DELETE"},"stepLog":"23:41:40.318 request:\n1 > DELETE http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:41:40.377 response time in milliseconds: 59\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 135\n1 < ETag: W\/\"87-XXYseEzu5xMALSnz1XvghPkZt0A\"\n1 < Date: Mon, 23 Jun 2025 16:41:40 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:40.376Z\"\n}\n\n\n"},{"result":{"nanos":180900,"startTime":1750696900378,"endTime":1750696900378,"millis":0.1809,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":84900,"startTime":1750696900378,"endTime":1750696900378,"millis":0.0849,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":471000,"startTime":1750696900378,"endTime":1750696900378,"millis":0.471,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling unlike API với bearerToken:', bearerToken"},"stepLog":"23:41:40.379 [print] Calling unlike API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":413600,"startTime":1750696900379,"endTime":1750696900379,"millis":0.4136,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:41:40.379 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":331200,"startTime":1750696900379,"endTime":1750696900379,"millis":0.3312,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:41:40.379 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Không tìm thấy lượt thích\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:41:40.376Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unlike với bearer token và targetId (type cố định là post)","description":"","durationMillis":67.4054,"startTime":1750696900311,"failed":false,"refId":"[1:3]","endTime":1750696900379,"exampleIndex":-1}],"name":"Unlike Single Call Helper - Thực hiện API call unlike với bearer token","passedCount":1}]},{"result":{"nanos":324600,"startTime":1750696900384,"endTime":1750696900384,"millis":0.3246,"status":"passed"},"step":{"line":104,"prefix":"*","index":4,"text":"def testResults = results"}},{"result":{"nanos":1805800,"startTime":1750696900384,"endTime":1750696900386,"millis":1.8058,"status":"passed"},"step":{"line":105,"prefix":"*","index":5,"text":"print 'Hoàn thành tất cả test cases unlike. Đang ghi kết quả vào Excel...'"},"stepLog":"23:41:40.386 [print] Hoàn thành tất cả test cases unlike. Đang ghi kết quả vào Excel... \n"},{"result":{"nanos":4003000,"startTime":1750696900386,"endTime":1750696900390,"millis":4.003,"status":"passed"},"step":{"comments":["# ===== THỐNG KÊ TEST RESULTS ====="],"line":108,"prefix":"*","index":6,"text":"def passedTests = karate.filter(testResults, function(item) { return item.testStatus === 'PASS'; })"}},{"result":{"nanos":2523800,"startTime":1750696900390,"endTime":1750696900393,"millis":2.5238,"status":"passed"},"step":{"line":109,"prefix":"*","index":7,"text":"def failedTests = karate.filter(testResults, function(item) { return item.testStatus === 'FAIL'; })"}},{"result":{"nanos":948700,"startTime":1750696900392,"endTime":1750696900393,"millis":0.9487,"status":"passed"},"step":{"line":110,"prefix":"*","index":8,"text":"def totalTests = testResults.length"}},{"result":{"nanos":7965700,"startTime":1750696900393,"endTime":1750696900401,"millis":7.9657,"status":"passed"},"step":{"line":111,"prefix":"*","index":9,"text":"def successRate = Math.round((passedTests.length \/ totalTests) * 100 * 100) \/ 100"}},{"result":{"nanos":1550000,"startTime":1750696900402,"endTime":1750696900404,"millis":1.55,"status":"passed"},"step":{"line":113,"prefix":"*","index":10,"text":"print '========================================='"},"stepLog":"23:41:40.403 [print] ========================================= \n"},{"result":{"nanos":1013100,"startTime":1750696900404,"endTime":1750696900405,"millis":1.0131,"status":"passed"},"step":{"line":114,"prefix":"*","index":11,"text":"print '📊 UNLIKE API - KẾT QUẢ TỔNG QUAN:'"},"stepLog":"23:41:40.405 [print] 📊 UNLIKE API - KẾT QUẢ TỔNG QUAN: \n"},{"result":{"nanos":620800,"startTime":1750696900405,"endTime":1750696900406,"millis":0.6208,"status":"passed"},"step":{"line":115,"prefix":"*","index":12,"text":"print '📋 Tổng số test cases: ' + totalTests"},"stepLog":"23:41:40.405 [print] 📋 Tổng số test cases: 15 \n"},{"result":{"nanos":530400,"startTime":1750696900405,"endTime":1750696900406,"millis":0.5304,"status":"passed"},"step":{"line":116,"prefix":"*","index":13,"text":"print '✅ Số test PASSED: ' + passedTests.length"},"stepLog":"23:41:40.406 [print] ✅ Số test PASSED: 5 \n"},{"result":{"nanos":373800,"startTime":1750696900406,"endTime":1750696900406,"millis":0.3738,"status":"passed"},"step":{"line":117,"prefix":"*","index":14,"text":"print '❌ Số test FAILED: ' + failedTests.length"},"stepLog":"23:41:40.406 [print] ❌ Số test FAILED: 10 \n"},{"result":{"nanos":3504000,"startTime":1750696900406,"endTime":1750696900410,"millis":3.504,"status":"passed"},"step":{"line":118,"prefix":"*","index":15,"text":"print '📈 Tỷ lệ thành công: ' + successRate + '%'"},"stepLog":"23:41:40.410 [print] 📈 Tỷ lệ thành công: 33.33% \n"},{"result":{"nanos":236700,"startTime":1750696900410,"endTime":1750696900410,"millis":0.2367,"status":"passed"},"step":{"line":119,"prefix":"*","index":16,"text":"print '========================================='"},"stepLog":"23:41:40.410 [print] ========================================= \n"},{"result":{"nanos":6511700,"startTime":1750696900410,"endTime":1750696900417,"millis":6.5117,"status":"passed"},"step":{"comments":["# Log failed tests"],"line":122,"prefix":"*","index":17,"text":"if (failedTests.length > 0) karate.forEach(failedTests, function(test, index) { karate.log('❌ Failed test #' + (index + 1) + ': ' + test.failureReason); })"},"stepLog":"23:41:40.415 ❌ Failed test #1: Status mismatch: Expected 400, got 500 \n23:41:40.415 ❌ Failed test #2: Status mismatch: Expected 400, got 404 \n23:41:40.415 ❌ Failed test #3: Status mismatch: Expected 400, got 404 \n23:41:40.415 ❌ Failed test #4: Status mismatch: Expected 400, got 404 \n23:41:40.415 ❌ Failed test #5: Status mismatch: Expected 400, got 404 \n23:41:40.416 ❌ Failed test #6: Status mismatch: Expected 400, got 404 \n23:41:40.416 ❌ Failed test #7: Status mismatch: Expected 400, got 500 \n23:41:40.416 ❌ Failed test #8: Status mismatch: Expected 400, got 404 \n23:41:40.416 ❌ Failed test #9: Status mismatch: Expected 400, got 404 \n23:41:40.416 ❌ Failed test #10: Status mismatch: Expected , got 404 \n"},{"result":{"nanos":1982200,"startTime":1750696900416,"endTime":1750696900418,"millis":1.9822,"status":"passed"},"step":{"line":124,"prefix":"*","index":18,"text":"print 'Ghi kết quả vào Excel...'"},"stepLog":"23:41:40.419 [print] Ghi kết quả vào Excel... \n"},{"result":{"nanos":338457900,"startTime":1750696900419,"endTime":1750696900757,"millis":338.4579,"status":"passed"},"step":{"line":125,"prefix":"*","index":19,"text":"def writeSuccess = writeToExcel(excelFilePath, sheetName, testResults)"}},{"result":{"nanos":1494000,"startTime":1750696900756,"endTime":1750696900757,"millis":1.494,"status":"passed"},"step":{"line":126,"prefix":"*","index":20,"text":"if (writeSuccess) karate.log('Đã ghi kết quả unlike vào Excel thành công!')"},"stepLog":"23:41:40.759 Đã ghi kết quả unlike vào Excel thành công! \n"},{"result":{"nanos":862600,"startTime":1750696900759,"endTime":1750696900760,"millis":0.8626,"status":"passed"},"step":{"line":127,"prefix":"*","index":21,"text":"if (!writeSuccess) karate.log('Lỗi khi ghi kết quả unlike vào Excel!')"}}],"executorName":"main","line":16,"name":"Chạy tất cả test cases unlike từ Excel","description":"","durationMillis":3448.3101,"startTime":1750696897084,"failed":false,"refId":"[1:16]","endTime":1750696900759,"exampleIndex":-1}],"callDepth":0,"name":"Unlike Testing từ Excel - Sheet unlike","description":"","resultDate":"2025-06-23 11:41:40 PM","durationMillis":3448.3101,"passedCount":1}