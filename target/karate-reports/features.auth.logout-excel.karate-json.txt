{"failedCount":0,"prefixedPath":"classpath:features\/auth\/logout-excel.feature","packageQualifiedName":"features.auth.logout-excel","loopIndex":-1,"relativePath":"features\/auth\/logout-excel.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":716000,"startTime":1750676514361,"endTime":1750676514362,"millis":0.716,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"},"stepLog":"18:01:54.331 karate.env system property was: null \n"},{"result":{"nanos":9183700,"startTime":1750676514364,"endTime":1750676514373,"millis":9.1837,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:01:54.368 karate.env system property was: null \n"},{"result":{"nanos":33518900,"startTime":1750676514373,"endTime":1750676514407,"millis":33.5189,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def readExcel = read('classpath:utils\/read-excel.js')"}},{"result":{"nanos":15490900,"startTime":1750676514407,"endTime":1750676514422,"millis":15.4909,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def writeToExcel = read('classpath:utils\/write-excel.js')"}},{"result":{"nanos":764300,"startTime":1750676514423,"endTime":1750676514424,"millis":0.7643,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def excelFilePath = 'src\/test\/java\/data\/data.xlsx'"}},{"result":{"nanos":766300,"startTime":1750676514424,"endTime":1750676514425,"millis":0.7663,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def sheetName = 'logout'"}},{"result":{"nanos":682590200,"startTime":1750676514425,"endTime":1750676515108,"millis":682.5902,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def testData = readExcel(excelFilePath, sheetName)"},"stepLog":"18:01:55.080 Headers found: [\n  \"bearerToken\",\n  \"expectedStatus\",\n  \"expectedResult\",\n  \"testDescription\",\n  \"responseStatus\",\n  \"result\",\n  \"testStatus\",\n  \"failureReason\"\n]\n \n18:01:55.105 Read data from Excel: [\n  {\n    \"bearerToken\": \"\",\n    \"expectedStatus\": \"200\",\n    \"expectedResult\": \"{\\\"message\\\": \\\"Logged out successfully\\\"}\",\n    \"testDescription\": \"TC1: Đăng xuất thành công với token hợp lệ\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/auth\/logout\\\",\\\"timestamp\\\":\\\"2025-06-23T09:33:38.230Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 200, got 401\"\n  },\n  {\n    \"bearerToken\": \"NO_TOKEN\",\n    \"expectedStatus\": \"401\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n    \"testDescription\": \"TC2: Đăng xuất thất bại - Không truyền bearer token\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/auth\/logout\\\",\\\"timestamp\\\":\\\"2025-06-23T09:33:38.312Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"invalid_token_12345\",\n    \"expectedStatus\": \"401\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid or expired token\\\"}\",\n    \"testDescription\": \"TC3: Đăng xuất thất bại - Bearer token không hợp lệ\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/auth\/logout\\\",\\\"timestamp\\\":\\\"2025-06-23T09:33:38.344Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  }\n]\n \n"},{"result":{"nanos":5234200,"startTime":1750676515107,"endTime":1750676515112,"millis":5.2342,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"print 'Đọc được ' + testData.length + ' test cases từ Excel sheet: ' + sheetName"},"stepLog":"18:01:55.113 [print] Đọc được 3 test cases từ Excel sheet: logout \n"},{"result":{"nanos":15975300,"startTime":1750676515113,"endTime":1750676515129,"millis":15.9753,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def testResults = []"}},{"result":{"nanos":1080200,"startTime":1750676515129,"endTime":1750676515130,"millis":1.0802,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def globalBearerToken = config.bearerToken"}},{"result":{"nanos":1084900,"startTime":1750676515130,"endTime":1750676515131,"millis":1.0849,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"print 'Sử dụng global bearer token từ config:', globalBearerToken"},"stepLog":"18:01:55.131 [print] Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":7494300,"startTime":1750676515132,"endTime":1750676515139,"millis":7.4943,"status":"passed"},"step":{"endLine":64,"line":17,"prefix":"*","docString":"function(testCase, actualStatus, actualResponse) {\n  var expectedStatus = testCase.expectedStatus;\n        \n  \/\/ Kiểm tra Status Code (Bắt buộc)\n  if (actualStatus != expectedStatus) {\n    return {\n      status: 'FAIL',\n      reason: 'Status mismatch: Expected ' + expectedStatus + ', got ' + actualStatus\n    };\n  }\n        \n  \/\/ Kiểm tra thêm nếu có expectedResult\n  if (testCase.expectedResult && testCase.expectedResult.trim() !== '') {\n    try {\n      var expectedObj = JSON.parse(testCase.expectedResult);\n            \n      \/\/ Kiểm tra success response\n      if (expectedStatus == 200 || expectedStatus == 201) {\n        if (expectedObj.message && !actualResponse.message) {\n          return {\n            status: 'FAIL',\n            reason: 'Missing message in success response'\n          };\n        }\n      }\n            \n      \/\/ Kiểm tra error response\n      if (expectedStatus >= 400) {\n        if (expectedObj.error && !actualResponse.error && !actualResponse.message) {\n          return {\n            status: 'FAIL',\n            reason: 'Missing error message in error response'\n          };\n        }\n      }\n    } catch (e) {\n      karate.log('Could not parse expectedResult as JSON, skipping detailed validation');\n    }\n  }\n        \n  return {\n    status: 'PASS',\n    reason: 'All validations passed'\n  };\n}","index":0,"text":"def evaluateTestCase ="}},{"result":{"nanos":6758300,"startTime":1750676515139,"endTime":1750676515146,"millis":6.7583,"status":"passed"},"step":{"endLine":131,"line":66,"prefix":"*","docString":"function(testCase, index) {\n  karate.log('Đang chạy test case #' + (index + 1) + ': ' + testCase.testDescription);\n        \n  var bearerToken = '';\n        \n  \/\/ Sử dụng bearer token từ test case hoặc global config\n  if (testCase.bearerToken && testCase.bearerToken.trim() !== '') {\n    if (testCase.bearerToken === 'NO_TOKEN') {\n      \/\/ TC2: Không có token\n      bearerToken = '';\n      karate.log('Test case không sử dụng token');\n    } else {\n      \/\/ Sử dụng token từ Excel nếu có\n      bearerToken = testCase.bearerToken;\n      karate.log('Sử dụng bearer token từ Excel:', bearerToken);\n    }\n  } else {\n    \/\/ Sử dụng global token từ config\n    bearerToken = globalBearerToken;\n    karate.log('Sử dụng global bearer token từ config:', bearerToken);\n  }\n        \n  \/\/ Gọi API logout\n  var response = karate.call('classpath:features\/helpers\/logout-single-call.feature', {\n    bearerToken: bearerToken\n  });\n        \n  var actualStatus = response.actualStatus;\n  var actualResult = '';\n        \n  \/\/ Ghi response thực tế vào result\n  if (response.actualResponse) {\n    actualResult = JSON.stringify(response.actualResponse);\n  } else {\n    actualResult = 'No response body';\n  }\n        \n  \/\/ ===== ĐÁNH GIÁ PASS\/FAIL =====\n  var testEvaluation = evaluateTestCase(testCase, actualStatus, response.actualResponse);\n        \n  \/\/ Log kết quả đánh giá\n  if (testEvaluation.status === 'FAIL') {\n    karate.log('❌ TEST FAILED - ' + testEvaluation.reason);\n  } else {\n    karate.log('✅ TEST PASSED - ' + testEvaluation.reason);\n  }\n        \n  \/\/ Log chi tiết để debug\n  karate.log('Test Case Data:', testCase);\n  karate.log('Expected Status:', testCase.expectedStatus);\n  karate.log('Expected Result:', testCase.expectedResult);\n  karate.log('Actual Status:', actualStatus);\n  karate.log('Test Status:', testEvaluation.status);\n        \n  karate.log('Test case #' + (index + 1) + ' - Status: ' + actualStatus + ', Test Result: ' + testEvaluation.status);\n        \n  return {\n    responseStatus: actualStatus,\n    result: actualResult,\n    testStatus: testEvaluation.status,\n    failureReason: testEvaluation.reason\n  };\n}","index":1,"text":"def runTest ="}},{"result":{"nanos":975300,"startTime":1750676515146,"endTime":1750676515147,"millis":0.9753,"status":"passed"},"step":{"line":133,"prefix":"*","index":2,"text":"print 'Bắt đầu chạy từng test case...'"},"stepLog":"18:01:55.146 [print] Bắt đầu chạy từng test case... \n"},{"result":{"nanos":536607000,"startTime":1750676515146,"endTime":1750676515683,"millis":536.607,"status":"passed"},"step":{"line":134,"prefix":"*","index":3,"text":"def results = karate.map(testData, runTest)"},"stepLog":"18:01:55.682 ✅ TEST PASSED - All validations passed \n18:01:55.682 Test Case Data: {\n  \"bearerToken\": \"invalid_token_12345\",\n  \"expectedStatus\": \"401\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid or expired token\\\"}\",\n  \"testDescription\": \"TC3: Đăng xuất thất bại - Bearer token không hợp lệ\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/auth\/logout\\\",\\\"timestamp\\\":\\\"2025-06-23T09:33:38.344Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"All validations passed\"\n}\n \n18:01:55.682 Expected Status: 401 \n18:01:55.682 Expected Result: {\"error\": \"Invalid or expired token\"} \n18:01:55.682 Actual Status: 401 \n18:01:55.682 Test Status: PASS \n18:01:55.683 Test case #3 - Status: 401, Test Result: PASS \n","callResults":[{"prefixedPath":"classpath:features\/helpers\/logout-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:01:55 PM","durationMillis":426.896,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA"},"failedCount":0,"packageQualifiedName":"features.helpers.logout-single-call","relativePath":"features\/helpers\/logout-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":4439000,"startTime":1750676515163,"endTime":1750676515167,"millis":4.439,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:01:55.149 Đang chạy test case #1: TC1: Đăng xuất thành công với token hợp lệ \n18:01:55.149 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n18:01:55.166 karate.env system property was: null \n"},{"result":{"nanos":773800,"startTime":1750676515168,"endTime":1750676515169,"millis":0.7738,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/auth\/logout'"}},{"result":{"nanos":4640800,"startTime":1750676515168,"endTime":1750676515173,"millis":4.6408,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":2754200,"startTime":1750676515174,"endTime":1750676515177,"millis":2.7542,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":411491500,"startTime":1750676515176,"endTime":1750676515587,"millis":411.4915,"status":"passed"},"step":{"line":11,"prefix":"When","index":4,"text":"method POST"},"stepLog":"18:01:55.394 request:\n1 > POST http:\/\/localhost:3000\/auth\/logout\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n18:01:55.587 response time in milliseconds: 189\n1 < 200\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 40\n1 < ETag: W\/\"28-EeSMzLVUdT\/4VxlKxnso6IW6jTg\"\n1 < Date: Mon, 23 Jun 2025 11:01:55 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đăng xuất thành công\"\n}\n\n\n"},{"result":{"nanos":618500,"startTime":1750676515588,"endTime":1750676515589,"millis":0.6185,"status":"passed"},"step":{"line":12,"prefix":"Then","index":5,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":326000,"startTime":1750676515589,"endTime":1750676515589,"millis":0.326,"status":"passed"},"step":{"line":13,"prefix":"And","index":6,"text":"def actualResponse = response"}},{"result":{"nanos":1091400,"startTime":1750676515589,"endTime":1750676515590,"millis":1.0914,"status":"passed"},"step":{"line":14,"prefix":"And","index":7,"text":"print 'Calling logout API với bearerToken:', bearerToken"},"stepLog":"18:01:55.590 [print] Calling logout API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDY3NjI4MiwiZXhwIjoxNzUwNjc5ODgyfQ.eQgi0lA3OvlYrn9TluUTgvJwrbrbQcO2XI61Wq_JoOA \n"},{"result":{"nanos":760800,"startTime":1750676515590,"endTime":1750676515591,"millis":0.7608,"status":"passed"},"step":{"line":15,"prefix":"And","index":8,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:01:55.591 [print] Response status: 200 body: {\n  \"message\": \"Đăng xuất thành công\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API logout với bearer token","description":"","durationMillis":426.896,"startTime":1750676515163,"failed":false,"refId":"[1:3]","endTime":1750676515591,"exampleIndex":-1}],"name":"Logout Single Call Helper - Thực hiện API call đăng xuất với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/logout-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:01:55 PM","durationMillis":32.2386,"callArg":{"bearerToken":""},"failedCount":0,"packageQualifiedName":"features.helpers.logout-single-call","relativePath":"features\/helpers\/logout-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2123000,"startTime":1750676515617,"endTime":1750676515619,"millis":2.123,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:01:55.607 ✅ TEST PASSED - All validations passed \n18:01:55.608 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"expectedStatus\": \"200\",\n  \"expectedResult\": \"{\\\"message\\\": \\\"Logged out successfully\\\"}\",\n  \"testDescription\": \"TC1: Đăng xuất thành công với token hợp lệ\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/auth\/logout\\\",\\\"timestamp\\\":\\\"2025-06-23T09:33:38.230Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 200, got 401\"\n}\n \n18:01:55.608 Expected Status: 200 \n18:01:55.608 Expected Result: {\"message\": \"Logged out successfully\"} \n18:01:55.609 Actual Status: 200 \n18:01:55.609 Test Status: PASS \n18:01:55.609 Test case #1 - Status: 200, Test Result: PASS \n18:01:55.610 Đang chạy test case #2: TC2: Đăng xuất thất bại - Không truyền bearer token \n18:01:55.610 Test case không sử dụng token \n18:01:55.618 karate.env system property was: null \n"},{"result":{"nanos":226500,"startTime":1750676515619,"endTime":1750676515619,"millis":0.2265,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/auth\/logout'"}},{"result":{"nanos":1477500,"startTime":1750676515620,"endTime":1750676515621,"millis":1.4775,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":9161700,"startTime":1750676515621,"endTime":1750676515630,"millis":9.1617,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":17677600,"startTime":1750676515631,"endTime":1750676515649,"millis":17.6776,"status":"passed"},"step":{"line":11,"prefix":"When","index":4,"text":"method POST"},"stepLog":"18:01:55.632 request:\n1 > POST http:\/\/localhost:3000\/auth\/logout\n1 > Authorization: #(Authorization)\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n18:01:55.647 response time in milliseconds: 14\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 120\n1 < ETag: W\/\"78-GXCgOugFjabevDqqnToWx73bfNs\"\n1 < Date: Mon, 23 Jun 2025 11:01:55 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/auth\/logout\",\n  \"timestamp\": \"2025-06-23T11:01:55.645Z\"\n}\n\n\n"},{"result":{"nanos":331300,"startTime":1750676515648,"endTime":1750676515648,"millis":0.3313,"status":"passed"},"step":{"line":12,"prefix":"Then","index":5,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":194300,"startTime":1750676515648,"endTime":1750676515648,"millis":0.1943,"status":"passed"},"step":{"line":13,"prefix":"And","index":6,"text":"def actualResponse = response"}},{"result":{"nanos":564700,"startTime":1750676515649,"endTime":1750676515650,"millis":0.5647,"status":"passed"},"step":{"line":14,"prefix":"And","index":7,"text":"print 'Calling logout API với bearerToken:', bearerToken"},"stepLog":"18:01:55.649 [print] Calling logout API với bearerToken:  \n"},{"result":{"nanos":482000,"startTime":1750676515649,"endTime":1750676515649,"millis":0.482,"status":"passed"},"step":{"line":15,"prefix":"And","index":8,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:01:55.650 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/auth\/logout\",\n  \"timestamp\": \"2025-06-23T11:01:55.645Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API logout với bearer token","description":"","durationMillis":32.2386,"startTime":1750676515617,"failed":false,"refId":"[1:3]","endTime":1750676515650,"exampleIndex":-1}],"name":"Logout Single Call Helper - Thực hiện API call đăng xuất với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/logout-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 06:01:55 PM","durationMillis":12.9361,"callArg":{"bearerToken":"invalid_token_12345"},"failedCount":0,"packageQualifiedName":"features.helpers.logout-single-call","relativePath":"features\/helpers\/logout-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2407800,"startTime":1750676515666,"endTime":1750676515668,"millis":2.4078,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"18:01:55.654 ✅ TEST PASSED - All validations passed \n18:01:55.654 Test Case Data: {\n  \"bearerToken\": \"NO_TOKEN\",\n  \"expectedStatus\": \"401\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n  \"testDescription\": \"TC2: Đăng xuất thất bại - Không truyền bearer token\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/auth\/logout\\\",\\\"timestamp\\\":\\\"2025-06-23T09:33:38.312Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"All validations passed\"\n}\n \n18:01:55.654 Expected Status: 401 \n18:01:55.654 Expected Result: {\"error\": \"Unauthorized\"} \n18:01:55.655 Actual Status: 401 \n18:01:55.655 Test Status: PASS \n18:01:55.655 Test case #2 - Status: 401, Test Result: PASS \n18:01:55.656 Đang chạy test case #3: TC3: Đăng xuất thất bại - Bearer token không hợp lệ \n18:01:55.656 Sử dụng bearer token từ Excel: invalid_token_12345 \n18:01:55.667 karate.env system property was: null \n"},{"result":{"nanos":199800,"startTime":1750676515668,"endTime":1750676515668,"millis":0.1998,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/auth\/logout'"}},{"result":{"nanos":295000,"startTime":1750676515668,"endTime":1750676515668,"millis":0.295,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":349500,"startTime":1750676515669,"endTime":1750676515669,"millis":0.3495,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":7479600,"startTime":1750676515669,"endTime":1750676515676,"millis":7.4796,"status":"passed"},"step":{"line":11,"prefix":"When","index":4,"text":"method POST"},"stepLog":"18:01:55.670 request:\n1 > POST http:\/\/localhost:3000\/auth\/logout\n1 > Authorization: Bearer invalid_token_12345\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n18:01:55.675 response time in milliseconds: 5\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 120\n1 < ETag: W\/\"78-tCBL+IwYQIL8f1cxpEsqTN+B9gk\"\n1 < Date: Mon, 23 Jun 2025 11:01:55 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/auth\/logout\",\n  \"timestamp\": \"2025-06-23T11:01:55.674Z\"\n}\n\n\n"},{"result":{"nanos":332200,"startTime":1750676515676,"endTime":1750676515676,"millis":0.3322,"status":"passed"},"step":{"line":12,"prefix":"Then","index":5,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":248500,"startTime":1750676515676,"endTime":1750676515676,"millis":0.2485,"status":"passed"},"step":{"line":13,"prefix":"And","index":6,"text":"def actualResponse = response"}},{"result":{"nanos":883500,"startTime":1750676515677,"endTime":1750676515678,"millis":0.8835,"status":"passed"},"step":{"line":14,"prefix":"And","index":7,"text":"print 'Calling logout API với bearerToken:', bearerToken"},"stepLog":"18:01:55.677 [print] Calling logout API với bearerToken: invalid_token_12345 \n"},{"result":{"nanos":740200,"startTime":1750676515678,"endTime":1750676515679,"millis":0.7402,"status":"passed"},"step":{"line":15,"prefix":"And","index":8,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"18:01:55.678 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/auth\/logout\",\n  \"timestamp\": \"2025-06-23T11:01:55.674Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API logout với bearer token","description":"","durationMillis":12.9361,"startTime":1750676515665,"failed":false,"refId":"[1:3]","endTime":1750676515678,"exampleIndex":-1}],"name":"Logout Single Call Helper - Thực hiện API call đăng xuất với bearer token","passedCount":1}]},{"result":{"nanos":292500,"startTime":1750676515683,"endTime":1750676515683,"millis":0.2925,"status":"passed"},"step":{"line":135,"prefix":"*","index":4,"text":"def testResults = results"}},{"result":{"nanos":202200,"startTime":1750676515683,"endTime":1750676515683,"millis":0.2022,"status":"passed"},"step":{"comments":["# Đếm số test cases pass\/fail"],"line":138,"prefix":"*","index":5,"text":"def passedTests = []"}},{"result":{"nanos":181700,"startTime":1750676515684,"endTime":1750676515684,"millis":0.1817,"status":"passed"},"step":{"line":139,"prefix":"*","index":6,"text":"def failedTests = []"}},{"result":{"nanos":4063500,"startTime":1750676515684,"endTime":1750676515688,"millis":4.0635,"status":"passed"},"step":{"line":140,"prefix":"*","index":7,"text":"karate.forEach(testResults, function(test) { if (test.testStatus === 'PASS') passedTests.push(test); else failedTests.push(test); })"}},{"result":{"nanos":1016200,"startTime":1750676515688,"endTime":1750676515689,"millis":1.0162,"status":"passed"},"step":{"line":142,"prefix":"*","index":8,"text":"print '=== LOGOUT TEST SUMMARY ==='"},"stepLog":"18:01:55.689 [print] === LOGOUT TEST SUMMARY === \n"},{"result":{"nanos":764400,"startTime":1750676515689,"endTime":1750676515690,"millis":0.7644,"status":"passed"},"step":{"line":143,"prefix":"*","index":9,"text":"print 'Total test cases: ' + testResults.length"},"stepLog":"18:01:55.690 [print] Total test cases: 3 \n"},{"result":{"nanos":708500,"startTime":1750676515690,"endTime":1750676515691,"millis":0.7085,"status":"passed"},"step":{"line":144,"prefix":"*","index":10,"text":"print 'Passed: ' + passedTests.length"},"stepLog":"18:01:55.690 [print] Passed: 3 \n"},{"result":{"nanos":639300,"startTime":1750676515690,"endTime":1750676515691,"millis":0.6393,"status":"passed"},"step":{"line":145,"prefix":"*","index":11,"text":"print 'Failed: ' + failedTests.length"},"stepLog":"18:01:55.692 [print] Failed: 0 \n"},{"result":{"nanos":13081800,"startTime":1750676515692,"endTime":1750676515705,"millis":13.0818,"status":"passed"},"step":{"line":146,"prefix":"*","index":12,"text":"if (testResults.length > 0) print ('Success rate: ' + Math.round((passedTests.length \/ testResults.length) * 100) + '%')"}},{"result":{"nanos":1396800,"startTime":1750676515705,"endTime":1750676515706,"millis":1.3968,"status":"passed"},"step":{"comments":["# Log failed tests"],"line":149,"prefix":"*","index":13,"text":"if (failedTests.length > 0) karate.forEach(failedTests, function(test, index) { karate.log('❌ Failed test #' + (index + 1) + ': ' + test.failureReason); })"}},{"result":{"nanos":809300,"startTime":1750676515706,"endTime":1750676515707,"millis":0.8093,"status":"passed"},"step":{"line":151,"prefix":"*","index":14,"text":"print 'Hoàn thành tất cả test cases logout. Đang ghi kết quả vào Excel...'"},"stepLog":"18:01:55.707 [print] Hoàn thành tất cả test cases logout. Đang ghi kết quả vào Excel... \n"},{"result":{"nanos":256456500,"startTime":1750676515707,"endTime":1750676515963,"millis":256.4565,"status":"passed"},"step":{"comments":["# Ghi kết quả vào Excel"],"line":154,"prefix":"*","index":15,"text":"def writeSuccess = writeToExcel(excelFilePath, sheetName, testResults)"}},{"result":{"nanos":1196700,"startTime":1750676515964,"endTime":1750676515965,"millis":1.1967,"status":"passed"},"step":{"line":155,"prefix":"*","index":16,"text":"if (writeSuccess) karate.log('✅ Đã ghi kết quả logout vào Excel thành công!')"},"stepLog":"18:01:55.965 ✅ Đã ghi kết quả logout vào Excel thành công! \n"},{"result":{"nanos":398900,"startTime":1750676515965,"endTime":1750676515965,"millis":0.3989,"status":"passed"},"step":{"line":156,"prefix":"*","index":17,"text":"if (!writeSuccess) karate.log('❌ Lỗi khi ghi kết quả logout vào Excel!')"}},{"result":{"nanos":405400,"startTime":1750676515966,"endTime":1750676515966,"millis":0.4054,"status":"passed"},"step":{"comments":["# Warning nếu có test cases failed"],"line":159,"prefix":"*","index":18,"text":"if (failedTests.length > 0) karate.log('⚠️ WARNING: ' + failedTests.length + ' out of ' + testResults.length + ' test cases failed')"}}],"executorName":"main","line":16,"name":"Chạy tất cả test cases logout từ Excel","description":"","durationMillis":1599.8535,"startTime":1750676514219,"failed":false,"refId":"[1:16]","endTime":1750676515966,"exampleIndex":-1}],"callDepth":0,"name":"Logout Testing từ Excel - Sheet logout","description":"","resultDate":"2025-06-23 06:01:55 PM","durationMillis":1599.8535,"passedCount":1}