<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="res/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="res/karate-report.css" type="text/css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <script type="text/javascript" src="res/jquery.min.js"></script>
    <script type="text/javascript" src="res/jquery.tablesorter.min.js"></script>
    <script type="text/javascript" src="res/jquery-ui.min.js"></script>
    <script type="text/javascript" src="res/bootstrap.min.js"></script>
    <script type="text/javascript" src="res/karate-report.js"></script>
    <script type="text/javascript" src="res/Resemble.js"></script>
    <script>
!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
posthog.init('phc_M6fKk3dSX9HjglkqPSybauGas45NINb7EgsPGU8N9g1',{
  api_host:'https://app.posthog.com',
  persistence:'localStorage',
  autocapture:false,
  capture_pageview:false,
  api_transport:'sendBeacon',
  loaded: function(posthog) { 
    posthog.capture("report_feature",{distinct_id:"1245f8e7-00df-42f1-8e20-4795f4abad9e",karate_version:"1.4.1",karate_meta:null});
  }
});
</script>

    <title>features.follows.unfollow-excel</title>
  </head>
  <body>
    <div id="root-container">
      <div id="leftnav">
        
        <div>
  <div class="nav-logo">
    <a href="https://karatelabs.io">
      <img src="karate-labs-logo-ring.svg" alt="Karate Labs"/>
    </a>
    <div class="nav-count">
      <div id="nav-pass" class="bg-success">1</div>
      <div id="nav-fail" class="bg-danger">0</div>
    </div>
  </div>
  <div id="nav-env">
    <div></div>
  </div>
  <div id="nav-type">
    <div>Scenarios</div>
  </div>
  <div id="nav-date">
    <div>2025-06-24 07:06:43 PM</div>
  </div>
</div>

        <div class="nav-container">
          <div class="nav-item passed">
            <a href="#[1:16]"><span>[1:16]</span> <span>Chạy tất cả test cases unfollow từ Excel</span></a>
          </div>
        </div>
      </div>
      <div id="content">
        <div class="page-heading alert alert-primary">
          <a href="karate-summary.html">Summary</a><span class="feature-label">|</span>
          <a href="karate-tags.html">Tags</a><span class="feature-label">|</span>
          <span class="feature-label">Feature:</span>
          <span class="feature-path">features/follows/unfollow-excel.feature</span><span class="feature-label">|</span>
          <span class="feature-name">Unfollow Testing từ Excel - Sheet unfollow</span>
          <span class="feature-description"></span>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1:16]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1:16]</span>
                <span class="scenario-name">Chạy tất cả test cases unfollow từ Excel</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>2747</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1:16]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1:16]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.4">
      <div class="step-ref bg-step">4</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url baseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.4">19:06:40.464 karate.env system property was: null 
</div>   

  

</div>
</div>
          <div data-parent="[1:16]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.5">
      <div class="step-ref bg-step">5</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">8</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.5">19:06:40.507 karate.env system property was: null 
</div>   

  

</div>
</div>
          <div data-parent="[1:16]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def readExcel = read(&#39;classpath:utils/read-excel.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">38</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:16]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def writeToExcel = read(&#39;classpath:utils/write-excel.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">21</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:16]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def excelFilePath = &#39;src/test/java/data/data.xlsx&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:16]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.9">
      <div class="step-ref bg-step">9</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def sheetName = &#39;unfollow&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:16]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.10">
      <div class="step-ref bg-step">10</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def testData = readExcel(excelFilePath, sheetName)</span>
      </div>
    </div>
    <div class="time-cell passed">954</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10">19:06:41.435 Headers found: [
  &quot;bearerToken&quot;,
  &quot;followingId&quot;,
  &quot;testDescription&quot;,
  &quot;expectedStatus&quot;,
  &quot;expectedResult&quot;,
  &quot;responseStatus&quot;,
  &quot;result&quot;,
  &quot;testStatus&quot;,
  &quot;failureReason&quot;
]
 
19:06:41.518 Read data from Excel: [
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot;58ca226b-5a4c-41f5-b3f5-ec3723d14ca3&quot;,
    &quot;testDescription&quot;: &quot;Unfollow hợp lệ&quot;,
    &quot;expectedStatus&quot;: 200.0,
    &quot;expectedResult&quot;: &quot;{\&quot;message\&quot;: \&quot;Hủy theo dõi thành công\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;500&quot;,
    &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.236Z\&quot;}&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Status mismatch: Expected 200, got 500&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot;&quot;,
    &quot;testDescription&quot;: &quot;followingId rỗng&quot;,
    &quot;expectedStatus&quot;: 400.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;followingId cannot be empty\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;404&quot;,
    &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:404,\&quot;message\&quot;:\&quot;Cannot DELETE /follows/\&quot;,\&quot;path\&quot;:\&quot;/follows/\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.371Z\&quot;}&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 404&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;NO_TOKEN&quot;,
    &quot;followingId&quot;: &quot;e7b38cb7-6701-40d9-a3bd-f53fc4d43457&quot;,
    &quot;testDescription&quot;: &quot;Thiếu token xác thực&quot;,
    &quot;expectedStatus&quot;: 401.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Unauthorized\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;401&quot;,
    &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:401,\&quot;message\&quot;:\&quot;Unauthorized\&quot;,\&quot;path\&quot;:\&quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.423Z\&quot;}&quot;,
    &quot;testStatus&quot;: &quot;PASS&quot;,
    &quot;failureReason&quot;: &quot;All validations passed&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;INVALID_TOKEN&quot;,
    &quot;followingId&quot;: &quot;e7b38cb7-6701-40d9-a3bd-f53fc4d43457&quot;,
    &quot;testDescription&quot;: &quot;Token không hợp lệ&quot;,
    &quot;expectedStatus&quot;: 401.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Invalid or expired token\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;401&quot;,
    &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:401,\&quot;message\&quot;:\&quot;Unauthorized\&quot;,\&quot;path\&quot;:\&quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.451Z\&quot;}&quot;,
    &quot;testStatus&quot;: &quot;PASS&quot;,
    &quot;failureReason&quot;: &quot;All validations passed&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot;nonexistent123&quot;,
    &quot;testDescription&quot;: &quot;followingId không tồn tại&quot;,
    &quot;expectedStatus&quot;: 404.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;User not found\&quot;}&quot;,
    &quot;responseStatus&quot;: 500.0,
    &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/nonexistent123\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.542Z\&quot;}&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Status mismatch: Expected 404, got 500&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot;08515b05-2d3e-4789-ad60-db35525a4970&quot;,
    &quot;testDescription&quot;: &quot;Unfollow chính mình&quot;,
    &quot;expectedStatus&quot;: 400.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Cannot unfollow yourself\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;500&quot;,
    &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/08515b05-2d3e-4789-ad60-db35525a4970\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.649Z\&quot;}&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 500&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot;650ce1ed-aaca-438f-9988-1f058ab5aa1a&quot;,
    &quot;testDescription&quot;: &quot;Chưa follow trước đó&quot;,
    &quot;expectedStatus&quot;: 404.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;You are not following this user\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;500&quot;,
    &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.742Z\&quot;}&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Status mismatch: Expected 404, got 500&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot;invalid_id!@#&quot;,
    &quot;testDescription&quot;: &quot;followingId không hợp lệ&quot;,
    &quot;expectedStatus&quot;: 400.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Invalid followingId format\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;500&quot;,
    &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/invalid_id!@\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.828Z\&quot;}&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 500&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot;user123&#39; OR &#39;1&#39;=&#39;1&quot;,
    &quot;testDescription&quot;: &quot;Kiểm tra SQL Injection&quot;,
    &quot;expectedStatus&quot;: 400.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Invalid input\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;ERROR&quot;,
    &quot;result&quot;: &quot;Exception: java.net.URISyntaxException: Illegal character in path at index 38: http://localhost:3000/follows/user123&#39; OR &#39;1&#39;=&#39;1\nclasspath:features/helpers/unfollow-single-call.feature:11&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Exception: java.net.URISyntaxException: Illegal character in path at index 38: http://localhost:3000/follows/user123&#39; OR &#39;1&#39;=&#39;1\nclasspath:features/helpers/unfollow-single-call.feature:11&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot;&lt;script&gt;alert(\&quot;xss\&quot;)&lt;/script&gt;&quot;,
    &quot;testDescription&quot;: &quot;Kiểm tra XSS&quot;,
    &quot;expectedStatus&quot;: 400.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Invalid input\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;ERROR&quot;,
    &quot;result&quot;: &quot;Exception: java.net.URISyntaxException: Illegal character in path at index 30: http://localhost:3000/follows/&lt;script&gt;alert(\&quot;xss\&quot;)&lt;/script&gt;\nclasspath:features/helpers/unfollow-single-call.feature:11&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Exception: java.net.URISyntaxException: Illegal character in path at index 30: http://localhost:3000/follows/&lt;script&gt;alert(\&quot;xss\&quot;)&lt;/script&gt;\nclasspath:features/helpers/unfollow-single-call.feature:11&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot; &quot;,
    &quot;testDescription&quot;: &quot;Kiểm tra khoảng trắng&quot;,
    &quot;expectedStatus&quot;: 400.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;followingId cannot contain only whitespace\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;ERROR&quot;,
    &quot;result&quot;: &quot;Exception: java.net.URISyntaxException: Illegal character in path at index 30: http://localhost:3000/follows/ \nclasspath:features/helpers/unfollow-single-call.feature:11&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Exception: java.net.URISyntaxException: Illegal character in path at index 30: http://localhost:3000/follows/ \nclasspath:features/helpers/unfollow-single-call.feature:11&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot;user😊123&quot;,
    &quot;testDescription&quot;: &quot;Kiểm tra ký tự Unicode&quot;,
    &quot;expectedStatus&quot;: 400.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Invalid followingId format\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;500&quot;,
    &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/user%F0%9F%98%8A123\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.969Z\&quot;}&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 500&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot;NULL_VALUE&quot;,
    &quot;testDescription&quot;: &quot;Kiểm tra trường null&quot;,
    &quot;expectedStatus&quot;: 400.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;followingId cannot be null\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;500&quot;,
    &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/NULL_VALUE\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:20.052Z\&quot;}&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 500&quot;
  },
  {
    &quot;bearerToken&quot;: &quot;&quot;,
    &quot;followingId&quot;: &quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;,
    &quot;testDescription&quot;: &quot;Kiểm tra độ dài followingId&quot;,
    &quot;expectedStatus&quot;: 400.0,
    &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;followingId exceeds maximum length\&quot;}&quot;,
    &quot;responseStatus&quot;: &quot;500&quot;,
    &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:20.141Z\&quot;}&quot;,
    &quot;testStatus&quot;: &quot;FAIL&quot;,
    &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 500&quot;
  }
]
 
</div>   

  

</div>
</div>
          <div data-parent="[1:16]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;Đọc được &#39; + testData.length + &#39; test cases từ Excel sheet: &#39; + sheetName</span>
      </div>
    </div>
    <div class="time-cell passed">9</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.11">19:06:41.537 [print] Đọc được 14 test cases từ Excel sheet: unfollow 
</div>   

  

</div>
</div>
          <div data-parent="[1:16]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.12">
      <div class="step-ref bg-step">12</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def testResults = []</span>
      </div>
    </div>
    <div class="time-cell passed">20</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:16]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.13">
      <div class="step-ref bg-step">13</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def globalBearerToken = config.bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:16]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;Sử dụng global bearer token từ config:&#39;, globalBearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14">19:06:41.561 [print] Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.17">
      <div class="step-ref passed">17</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def evaluateTestCase =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.17">function(testCase, actualStatus, actualResponse) {
  var expectedStatus = testCase.expectedStatus;
        
  // Kiểm tra Status Code (Bắt buộc)
  if (actualStatus != expectedStatus) {
    return {
      status: &#39;FAIL&#39;,
      reason: &#39;Status mismatch: Expected &#39; + expectedStatus + &#39;, got &#39; + actualStatus
    };
  }
        
  return {
    status: &#39;PASS&#39;,
    reason: &#39;All validations passed&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.37">
      <div class="step-ref passed">37</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def runTest =</span>
      </div>
    </div>
    <div class="time-cell passed">8</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.37">function(testCase, index) {
  karate.log(&#39;Đang chạy test case #&#39; + (index + 1) + &#39;: &#39; + testCase.testDescription);
        
  var bearerToken = &#39;&#39;;
        
  // Sử dụng bearer token từ test case hoặc global config
  if (testCase.bearerToken &amp;&amp; testCase.bearerToken.trim() !== &#39;&#39;) {
    if (testCase.bearerToken === &#39;NO_TOKEN&#39;) {
      // TC4: Không có token
      bearerToken = &#39;&#39;;
      karate.log(&#39;Test case không sử dụng token&#39;);
    } else if (testCase.bearerToken === &#39;INVALID_TOKEN&#39;) {
      // TC5: Token không hợp lệ
      bearerToken = &#39;invalid_token_123&#39;;
      karate.log(&#39;Test case sử dụng token không hợp lệ&#39;);
    } else {
      // Sử dụng token từ Excel nếu có
      bearerToken = testCase.bearerToken;
      karate.log(&#39;Sử dụng bearer token từ Excel:&#39;, bearerToken);
    }
  } else {
    // Sử dụng global token từ config
    bearerToken = globalBearerToken;
    karate.log(&#39;Sử dụng global bearer token từ config:&#39;, bearerToken);
  }
        
  try {
    // Gọi API unfollow
    var response = karate.call(&#39;classpath:features/helpers/unfollow-single-call.feature&#39;, {
      bearerToken: bearerToken,
      followingId: testCase.followingId || &#39;&#39;
    });
          
    var actualStatus = response.actualStatus;
    var actualResult = &#39;&#39;;
          
    // Ghi response thực tế vào result
    if (response.actualResponse) {
      actualResult = JSON.stringify(response.actualResponse);
    } else {
      actualResult = &#39;No response body&#39;;
    }
          
    // ===== ĐÁNH GIÁ PASS/FAIL =====
    var testEvaluation = evaluateTestCase(testCase, actualStatus, response.actualResponse);
          
    // Log kết quả đánh giá
    if (testEvaluation.status === &#39;FAIL&#39;) {
      karate.log(&#39;❌ TEST FAILED - &#39; + testEvaluation.reason);
    } else {
      karate.log(&#39;✅ TEST PASSED - &#39; + testEvaluation.reason);
    }
          
    // Log chi tiết để debug
    karate.log(&#39;Test Case Data:&#39;, testCase);
    karate.log(&#39;Expected Status:&#39;, testCase.expectedStatus);
    karate.log(&#39;Expected Result:&#39;, testCase.expectedResult);
    karate.log(&#39;Actual Status:&#39;, actualStatus);
    karate.log(&#39;Test Status:&#39;, testEvaluation.status);
          
    karate.log(&#39;Test case #&#39; + (index + 1) + &#39; - Status: &#39; + actualStatus + &#39;, Test Result: &#39; + testEvaluation.status);
          
    return {
      responseStatus: actualStatus,
      result: actualResult,
      testStatus: testEvaluation.status,
      failureReason: testEvaluation.reason
    };
  } catch (e) {
    // Xử lý lỗi (ví dụ URISyntaxException cho SQL injection test)
    karate.log(&#39;Test case #&#39; + (index + 1) + &#39; gặp lỗi:&#39;, e.message);
    return {
      responseStatus: &#39;ERROR&#39;,
      result: &#39;Exception: &#39; + e.message,
      testStatus: &#39;FAIL&#39;,
      failureReason: &#39;Exception: &#39; + e.message
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.120">
      <div class="step-ref passed">120</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;Bắt đầu chạy từng test case...&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.120">19:06:41.572 [print] Bắt đầu chạy từng test case... 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.121">
      <div class="step-ref passed">121</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def results = karate.map(testData, runTest)</span>
      </div>
    </div>
    <div class="time-cell passed">1298</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121">19:06:42.870 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 
19:06:42.870 Test Case Data: {
  &quot;bearerToken&quot;: &quot;&quot;,
  &quot;followingId&quot;: &quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;,
  &quot;testDescription&quot;: &quot;Kiểm tra độ dài followingId&quot;,
  &quot;expectedStatus&quot;: 400.0,
  &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;followingId exceeds maximum length\&quot;}&quot;,
  &quot;responseStatus&quot;: &quot;500&quot;,
  &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:20.141Z\&quot;}&quot;,
  &quot;testStatus&quot;: &quot;FAIL&quot;,
  &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 500&quot;
}
 
19:06:42.870 Expected Status: 400.0 
19:06:42.870 Expected Result: {&quot;error&quot;: &quot;followingId exceeds maximum length&quot;} 
19:06:42.870 Actual Status: 500 
19:06:42.870 Test Status: FAIL 
19:06:42.870 Test case #14 - Status: 500, Test Result: FAIL 
</div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">432</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">5</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:41.576 Đang chạy test case #1: Unfollow hợp lệ 
19:06:41.576 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:41.599 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">7</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell passed">411</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:41.900 request:
1 &gt; DELETE http://localhost:3000/follows/58ca226b-5a4c-41f5-b3f5-ec3723d14ca3
1 &gt; Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w
1 &gt; Host: localhost:3000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.14 (Java/17.0.9)
1 &gt; Accept-Encoding: gzip,deflate


19:06:42.022 response time in milliseconds: 119
1 &lt; 200
1 &lt; X-Powered-By: Express
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Content-Type: application/json; charset=utf-8
1 &lt; Content-Length: 301
1 &lt; ETag: W/&quot;12d-w2BpZwFR47uWKnvFeHz13tWDc1o&quot;
1 &lt; Date: Tue, 24 Jun 2025 12:06:42 GMT
1 &lt; Connection: keep-alive
1 &lt; Keep-Alive: timeout=5
{
  &quot;message&quot;: &quot;Huỷ theo dõi thành công&quot;,
  &quot;statusCode&quot;: 200,
  &quot;status&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;id&quot;: &quot;5f578cf5-c25b-4b44-a4ae-c058c053d1c0&quot;,
    &quot;followerId&quot;: &quot;08515b05-2d3e-4789-ad60-db35525a4970&quot;,
    &quot;followingId&quot;: &quot;58ca226b-5a4c-41f5-b3f5-ec3723d14ca3&quot;,
    &quot;followStatus&quot;: &quot;accepted&quot;,
    &quot;createdAt&quot;: &quot;2025-06-24T12:05:49.909Z&quot;
  }
}


</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.18">19:06:42.026 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.19">19:06:42.027 [print] Following ID: 58ca226b-5a4c-41f5-b3f5-ec3723d14ca3 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.20">19:06:42.027 [print] Final URL: http://localhost:3000/follows/58ca226b-5a4c-41f5-b3f5-ec3723d14ca3 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.21">19:06:42.028 [print] Response status: 200 body: {
  &quot;message&quot;: &quot;Huỷ theo dõi thành công&quot;,
  &quot;statusCode&quot;: 200,
  &quot;status&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;id&quot;: &quot;5f578cf5-c25b-4b44-a4ae-c058c053d1c0&quot;,
    &quot;followerId&quot;: &quot;08515b05-2d3e-4789-ad60-db35525a4970&quot;,
    &quot;followingId&quot;: &quot;58ca226b-5a4c-41f5-b3f5-ec3723d14ca3&quot;,
    &quot;followStatus&quot;: &quot;accepted&quot;,
    &quot;createdAt&quot;: &quot;2025-06-24T12:05:49.909Z&quot;
  }
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">23</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">4</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.044 ✅ TEST PASSED - All validations passed 
19:06:42.045 Test Case Data: {
  &quot;bearerToken&quot;: &quot;&quot;,
  &quot;followingId&quot;: &quot;58ca226b-5a4c-41f5-b3f5-ec3723d14ca3&quot;,
  &quot;testDescription&quot;: &quot;Unfollow hợp lệ&quot;,
  &quot;expectedStatus&quot;: 200.0,
  &quot;expectedResult&quot;: &quot;{\&quot;message\&quot;: \&quot;Hủy theo dõi thành công\&quot;}&quot;,
  &quot;responseStatus&quot;: &quot;500&quot;,
  &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.236Z\&quot;}&quot;,
  &quot;testStatus&quot;: &quot;FAIL&quot;,
  &quot;failureReason&quot;: &quot;Status mismatch: Expected 200, got 500&quot;
}
 
19:06:42.045 Expected Status: 200.0 
19:06:42.045 Expected Result: {&quot;message&quot;: &quot;Hủy theo dõi thành công&quot;} 
19:06:42.045 Actual Status: 200 
19:06:42.045 Test Status: PASS 
19:06:42.046 Test case #1 - Status: 200, Test Result: PASS 
19:06:42.048 Đang chạy test case #2: followingId rỗng 
19:06:42.048 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:42.064 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell passed">13</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.071 request:
1 &gt; DELETE http://localhost:3000/follows/
1 &gt; Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w
1 &gt; Host: localhost:3000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.14 (Java/17.0.9)
1 &gt; Accept-Encoding: gzip,deflate


19:06:42.081 response time in milliseconds: 9
1 &lt; 404
1 &lt; X-Powered-By: Express
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Content-Type: application/json; charset=utf-8
1 &lt; Content-Length: 128
1 &lt; ETag: W/&quot;80-xQLdhIr575sozQjjK7ebMliE5FM&quot;
1 &lt; Date: Tue, 24 Jun 2025 12:06:42 GMT
1 &lt; Connection: keep-alive
1 &lt; Keep-Alive: timeout=5
{
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 404,
  &quot;message&quot;: &quot;Cannot DELETE /follows/&quot;,
  &quot;path&quot;: &quot;/follows/&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.076Z&quot;
}


</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.18">19:06:42.083 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.19">19:06:42.084 [print] Following ID:  
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.20">19:06:42.085 [print] Final URL: http://localhost:3000/follows/ 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.21">19:06:42.085 [print] Response status: 404 body: {
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 404,
  &quot;message&quot;: &quot;Cannot DELETE /follows/&quot;,
  &quot;path&quot;: &quot;/follows/&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.076Z&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">38</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.091 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 
19:06:42.091 Test Case Data: {
  &quot;bearerToken&quot;: &quot;&quot;,
  &quot;followingId&quot;: &quot;&quot;,
  &quot;testDescription&quot;: &quot;followingId rỗng&quot;,
  &quot;expectedStatus&quot;: 400.0,
  &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;followingId cannot be empty\&quot;}&quot;,
  &quot;responseStatus&quot;: &quot;404&quot;,
  &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:404,\&quot;message\&quot;:\&quot;Cannot DELETE /follows/\&quot;,\&quot;path\&quot;:\&quot;/follows/\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.371Z\&quot;}&quot;,
  &quot;testStatus&quot;: &quot;FAIL&quot;,
  &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 404&quot;
}
 
19:06:42.091 Expected Status: 400.0 
19:06:42.091 Expected Result: {&quot;error&quot;: &quot;followingId cannot be empty&quot;} 
19:06:42.093 Actual Status: 404 
19:06:42.093 Test Status: FAIL 
19:06:42.093 Test case #2 - Status: 404, Test Result: FAIL 
19:06:42.094 Đang chạy test case #3: Thiếu token xác thực 
19:06:42.095 Test case không sử dụng token 
19:06:42.106 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">18</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell passed">12</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.130 request:
1 &gt; DELETE http://localhost:3000/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457
1 &gt; Authorization: #(Authorization)
1 &gt; Host: localhost:3000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.14 (Java/17.0.9)
1 &gt; Accept-Encoding: gzip,deflate


19:06:42.139 response time in milliseconds: 7
1 &lt; 401
1 &lt; X-Powered-By: Express
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Content-Type: application/json; charset=utf-8
1 &lt; Content-Length: 153
1 &lt; ETag: W/&quot;99-brba91czQAoZtfVPIPyLR/qQtx4&quot;
1 &lt; Date: Tue, 24 Jun 2025 12:06:42 GMT
1 &lt; Connection: keep-alive
1 &lt; Keep-Alive: timeout=5
{
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 401,
  &quot;message&quot;: &quot;Unauthorized&quot;,
  &quot;path&quot;: &quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.135Z&quot;
}


</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.18">19:06:42.141 [print] Calling unfollow API với bearerToken:  
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.19">19:06:42.142 [print] Following ID: e7b38cb7-6701-40d9-a3bd-f53fc4d43457 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.20">19:06:42.142 [print] Final URL: http://localhost:3000/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.21">19:06:42.143 [print] Response status: 401 body: {
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 401,
  &quot;message&quot;: &quot;Unauthorized&quot;,
  &quot;path&quot;: &quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.135Z&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">21</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.145 ✅ TEST PASSED - All validations passed 
19:06:42.145 Test Case Data: {
  &quot;bearerToken&quot;: &quot;NO_TOKEN&quot;,
  &quot;followingId&quot;: &quot;e7b38cb7-6701-40d9-a3bd-f53fc4d43457&quot;,
  &quot;testDescription&quot;: &quot;Thiếu token xác thực&quot;,
  &quot;expectedStatus&quot;: 401.0,
  &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Unauthorized\&quot;}&quot;,
  &quot;responseStatus&quot;: &quot;401&quot;,
  &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:401,\&quot;message\&quot;:\&quot;Unauthorized\&quot;,\&quot;path\&quot;:\&quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.423Z\&quot;}&quot;,
  &quot;testStatus&quot;: &quot;PASS&quot;,
  &quot;failureReason&quot;: &quot;All validations passed&quot;
}
 
19:06:42.145 Expected Status: 401.0 
19:06:42.145 Expected Result: {&quot;error&quot;: &quot;Unauthorized&quot;} 
19:06:42.145 Actual Status: 401 
19:06:42.146 Test Status: PASS 
19:06:42.146 Test case #3 - Status: 401, Test Result: PASS 
19:06:42.147 Đang chạy test case #4: Token không hợp lệ 
19:06:42.147 Test case sử dụng token không hợp lệ 
19:06:42.157 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell passed">11</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.164 request:
1 &gt; DELETE http://localhost:3000/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457
1 &gt; Authorization: Bearer invalid_token_123
1 &gt; Host: localhost:3000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.14 (Java/17.0.9)
1 &gt; Accept-Encoding: gzip,deflate


19:06:42.171 response time in milliseconds: 7
1 &lt; 401
1 &lt; X-Powered-By: Express
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Content-Type: application/json; charset=utf-8
1 &lt; Content-Length: 153
1 &lt; ETag: W/&quot;99-dMvfkkfQ5+IC4pzFC3GdQ5vEMb8&quot;
1 &lt; Date: Tue, 24 Jun 2025 12:06:42 GMT
1 &lt; Connection: keep-alive
1 &lt; Keep-Alive: timeout=5
{
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 401,
  &quot;message&quot;: &quot;Unauthorized&quot;,
  &quot;path&quot;: &quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.168Z&quot;
}


</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.18">19:06:42.175 [print] Calling unfollow API với bearerToken: invalid_token_123 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.19">19:06:42.175 [print] Following ID: e7b38cb7-6701-40d9-a3bd-f53fc4d43457 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.20">19:06:42.176 [print] Final URL: http://localhost:3000/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.21">19:06:42.177 [print] Response status: 401 body: {
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 401,
  &quot;message&quot;: &quot;Unauthorized&quot;,
  &quot;path&quot;: &quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.168Z&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">97</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">4</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.180 ✅ TEST PASSED - All validations passed 
19:06:42.180 Test Case Data: {
  &quot;bearerToken&quot;: &quot;INVALID_TOKEN&quot;,
  &quot;followingId&quot;: &quot;e7b38cb7-6701-40d9-a3bd-f53fc4d43457&quot;,
  &quot;testDescription&quot;: &quot;Token không hợp lệ&quot;,
  &quot;expectedStatus&quot;: 401.0,
  &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Invalid or expired token\&quot;}&quot;,
  &quot;responseStatus&quot;: &quot;401&quot;,
  &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:401,\&quot;message\&quot;:\&quot;Unauthorized\&quot;,\&quot;path\&quot;:\&quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.451Z\&quot;}&quot;,
  &quot;testStatus&quot;: &quot;PASS&quot;,
  &quot;failureReason&quot;: &quot;All validations passed&quot;
}
 
19:06:42.181 Expected Status: 401.0 
19:06:42.181 Expected Result: {&quot;error&quot;: &quot;Invalid or expired token&quot;} 
19:06:42.181 Actual Status: 401 
19:06:42.181 Test Status: PASS 
19:06:42.181 Test case #4 - Status: 401, Test Result: PASS 
19:06:42.182 Đang chạy test case #5: followingId không tồn tại 
19:06:42.183 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:42.198 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell passed">90</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.202 request:
1 &gt; DELETE http://localhost:3000/follows/nonexistent123
1 &gt; Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w
1 &gt; Host: localhost:3000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.14 (Java/17.0.9)
1 &gt; Accept-Encoding: gzip,deflate


19:06:42.291 response time in milliseconds: 76
1 &lt; 500
1 &lt; X-Powered-By: Express
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Content-Type: application/json; charset=utf-8
1 &lt; Content-Length: 549
1 &lt; ETag: W/&quot;225-9SbBz8bee0Fp4oc1P2TsgUT1Kuk&quot;
1 &lt; Date: Tue, 24 Jun 2025 12:06:42 GMT
1 &lt; Connection: keep-alive
1 &lt; Keep-Alive: timeout=5
{
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/nonexistent123&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.278Z&quot;
}


</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.18">19:06:42.292 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.19">19:06:42.292 [print] Following ID: nonexistent123 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.20">19:06:42.292 [print] Final URL: http://localhost:3000/follows/nonexistent123 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.21">19:06:42.293 [print] Response status: 500 body: {
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/nonexistent123&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.278Z&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">70</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.293 ❌ TEST FAILED - Status mismatch: Expected 404, got 500 
19:06:42.294 Test Case Data: {
  &quot;bearerToken&quot;: &quot;&quot;,
  &quot;followingId&quot;: &quot;nonexistent123&quot;,
  &quot;testDescription&quot;: &quot;followingId không tồn tại&quot;,
  &quot;expectedStatus&quot;: 404.0,
  &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;User not found\&quot;}&quot;,
  &quot;responseStatus&quot;: 500.0,
  &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/nonexistent123\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.542Z\&quot;}&quot;,
  &quot;testStatus&quot;: &quot;FAIL&quot;,
  &quot;failureReason&quot;: &quot;Status mismatch: Expected 404, got 500&quot;
}
 
19:06:42.294 Expected Status: 404.0 
19:06:42.294 Expected Result: {&quot;error&quot;: &quot;User not found&quot;} 
19:06:42.294 Actual Status: 500 
19:06:42.295 Test Status: FAIL 
19:06:42.295 Test case #5 - Status: 500, Test Result: FAIL 
19:06:42.295 Đang chạy test case #6: Unfollow chính mình 
19:06:42.295 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:42.306 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell passed">65</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.308 request:
1 &gt; DELETE http://localhost:3000/follows/08515b05-2d3e-4789-ad60-db35525a4970
1 &gt; Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w
1 &gt; Host: localhost:3000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.14 (Java/17.0.9)
1 &gt; Accept-Encoding: gzip,deflate


19:06:42.371 response time in milliseconds: 62
1 &lt; 500
1 &lt; X-Powered-By: Express
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Content-Type: application/json; charset=utf-8
1 &lt; Content-Length: 571
1 &lt; ETag: W/&quot;23b-H5mp9Vb49auN2qVltNthGmcArc0&quot;
1 &lt; Date: Tue, 24 Jun 2025 12:06:42 GMT
1 &lt; Connection: keep-alive
1 &lt; Keep-Alive: timeout=5
{
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/08515b05-2d3e-4789-ad60-db35525a4970&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.368Z&quot;
}


</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.18">19:06:42.374 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.19">19:06:42.374 [print] Following ID: 08515b05-2d3e-4789-ad60-db35525a4970 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.20">19:06:42.375 [print] Final URL: http://localhost:3000/follows/08515b05-2d3e-4789-ad60-db35525a4970 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.21">19:06:42.375 [print] Response status: 500 body: {
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/08515b05-2d3e-4789-ad60-db35525a4970&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.368Z&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">76</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.377 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 
19:06:42.378 Test Case Data: {
  &quot;bearerToken&quot;: &quot;&quot;,
  &quot;followingId&quot;: &quot;08515b05-2d3e-4789-ad60-db35525a4970&quot;,
  &quot;testDescription&quot;: &quot;Unfollow chính mình&quot;,
  &quot;expectedStatus&quot;: 400.0,
  &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Cannot unfollow yourself\&quot;}&quot;,
  &quot;responseStatus&quot;: &quot;500&quot;,
  &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/08515b05-2d3e-4789-ad60-db35525a4970\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.649Z\&quot;}&quot;,
  &quot;testStatus&quot;: &quot;FAIL&quot;,
  &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 500&quot;
}
 
19:06:42.378 Expected Status: 400.0 
19:06:42.378 Expected Result: {&quot;error&quot;: &quot;Cannot unfollow yourself&quot;} 
19:06:42.378 Actual Status: 500 
19:06:42.378 Test Status: FAIL 
19:06:42.378 Test case #6 - Status: 500, Test Result: FAIL 
19:06:42.381 Đang chạy test case #7: Chưa follow trước đó 
19:06:42.381 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:42.390 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell passed">71</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.394 request:
1 &gt; DELETE http://localhost:3000/follows/650ce1ed-aaca-438f-9988-1f058ab5aa1a
1 &gt; Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w
1 &gt; Host: localhost:3000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.14 (Java/17.0.9)
1 &gt; Accept-Encoding: gzip,deflate


19:06:42.463 response time in milliseconds: 68
1 &lt; 500
1 &lt; X-Powered-By: Express
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Content-Type: application/json; charset=utf-8
1 &lt; Content-Length: 571
1 &lt; ETag: W/&quot;23b-RYsCJsgsWdxwO6VHG/oyXMj8XBA&quot;
1 &lt; Date: Tue, 24 Jun 2025 12:06:42 GMT
1 &lt; Connection: keep-alive
1 &lt; Keep-Alive: timeout=5
{
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/650ce1ed-aaca-438f-9988-1f058ab5aa1a&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.460Z&quot;
}


</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.18">19:06:42.464 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.19">19:06:42.464 [print] Following ID: 650ce1ed-aaca-438f-9988-1f058ab5aa1a 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.20">19:06:42.464 [print] Final URL: http://localhost:3000/follows/650ce1ed-aaca-438f-9988-1f058ab5aa1a 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.21">19:06:42.465 [print] Response status: 500 body: {
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/650ce1ed-aaca-438f-9988-1f058ab5aa1a&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.460Z&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">86</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.467 ❌ TEST FAILED - Status mismatch: Expected 404, got 500 
19:06:42.467 Test Case Data: {
  &quot;bearerToken&quot;: &quot;&quot;,
  &quot;followingId&quot;: &quot;650ce1ed-aaca-438f-9988-1f058ab5aa1a&quot;,
  &quot;testDescription&quot;: &quot;Chưa follow trước đó&quot;,
  &quot;expectedStatus&quot;: 404.0,
  &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;You are not following this user\&quot;}&quot;,
  &quot;responseStatus&quot;: &quot;500&quot;,
  &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.742Z\&quot;}&quot;,
  &quot;testStatus&quot;: &quot;FAIL&quot;,
  &quot;failureReason&quot;: &quot;Status mismatch: Expected 404, got 500&quot;
}
 
19:06:42.467 Expected Status: 404.0 
19:06:42.467 Expected Result: {&quot;error&quot;: &quot;You are not following this user&quot;} 
19:06:42.467 Actual Status: 500 
19:06:42.468 Test Status: FAIL 
19:06:42.468 Test case #7 - Status: 500, Test Result: FAIL 
19:06:42.469 Đang chạy test case #8: followingId không hợp lệ 
19:06:42.469 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:42.479 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell passed">80</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.482 request:
1 &gt; DELETE http://localhost:3000/follows/invalid_id!@#
1 &gt; Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w
1 &gt; Host: localhost:3000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.14 (Java/17.0.9)
1 &gt; Accept-Encoding: gzip,deflate


19:06:42.561 response time in milliseconds: 77
1 &lt; 500
1 &lt; X-Powered-By: Express
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Content-Type: application/json; charset=utf-8
1 &lt; Content-Length: 547
1 &lt; ETag: W/&quot;223-cLrtmWTboeXuMS7SVfzeC3ialQs&quot;
1 &lt; Date: Tue, 24 Jun 2025 12:06:42 GMT
1 &lt; Connection: keep-alive
1 &lt; Keep-Alive: timeout=5
{
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/invalid_id!@&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.559Z&quot;
}


</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.18">19:06:42.562 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.19">19:06:42.563 [print] Following ID: invalid_id!@# 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.20">19:06:42.563 [print] Final URL: http://localhost:3000/follows/invalid_id!@# 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.21">19:06:42.564 [print] Response status: 500 body: {
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/invalid_id!@&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.559Z&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">4</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.565 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 
19:06:42.567 Test Case Data: {
  &quot;bearerToken&quot;: &quot;&quot;,
  &quot;followingId&quot;: &quot;invalid_id!@#&quot;,
  &quot;testDescription&quot;: &quot;followingId không hợp lệ&quot;,
  &quot;expectedStatus&quot;: 400.0,
  &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Invalid followingId format\&quot;}&quot;,
  &quot;responseStatus&quot;: &quot;500&quot;,
  &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/invalid_id!@\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.828Z\&quot;}&quot;,
  &quot;testStatus&quot;: &quot;FAIL&quot;,
  &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 500&quot;
}
 
19:06:42.568 Expected Status: 400.0 
19:06:42.568 Expected Result: {&quot;error&quot;: &quot;Invalid followingId format&quot;} 
19:06:42.568 Actual Status: 500 
19:06:42.568 Test Status: FAIL 
19:06:42.568 Test case #8 - Status: 500, Test Result: FAIL 
19:06:42.569 Đang chạy test case #9: Kiểm tra SQL Injection 
19:06:42.569 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:42.578 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref failed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.581 classpath:features/helpers/unfollow-single-call.feature:15
When method DELETE
java.net.URISyntaxException: Illegal character in path at index 38: http://localhost:3000/follows/user123&#39; OR &#39;1&#39;=&#39;1
classpath:features/helpers/unfollow-single-call.feature:15
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref skipped">16</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref skipped">17</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref skipped">18</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref skipped">19</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref skipped">20</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref skipped">21</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">2</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.588 Test case #9 gặp lỗi: java.net.URISyntaxException: Illegal character in path at index 38: http://localhost:3000/follows/user123&#39; OR &#39;1&#39;=&#39;1
classpath:features/helpers/unfollow-single-call.feature:15 
19:06:42.589 Đang chạy test case #10: Kiểm tra XSS 
19:06:42.589 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:42.595 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref failed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.597 classpath:features/helpers/unfollow-single-call.feature:15
When method DELETE
java.net.URISyntaxException: Illegal character in path at index 30: http://localhost:3000/follows/&lt;script&gt;alert(&quot;xss&quot;)&lt;/script&gt;
classpath:features/helpers/unfollow-single-call.feature:15
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref skipped">16</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref skipped">17</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref skipped">18</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref skipped">19</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref skipped">20</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref skipped">21</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">4</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.597 Test case #10 gặp lỗi: java.net.URISyntaxException: Illegal character in path at index 30: http://localhost:3000/follows/&lt;script&gt;alert(&quot;xss&quot;)&lt;/script&gt;
classpath:features/helpers/unfollow-single-call.feature:15 
19:06:42.598 Đang chạy test case #11: Kiểm tra khoảng trắng 
19:06:42.598 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:42.608 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref failed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.611 classpath:features/helpers/unfollow-single-call.feature:15
When method DELETE
java.net.URISyntaxException: Illegal character in path at index 30: http://localhost:3000/follows/ 
classpath:features/helpers/unfollow-single-call.feature:15
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref skipped">16</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref skipped">17</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref skipped">18</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref skipped">19</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref skipped">20</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref skipped">21</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">74</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.612 Test case #11 gặp lỗi: java.net.URISyntaxException: Illegal character in path at index 30: http://localhost:3000/follows/ 
classpath:features/helpers/unfollow-single-call.feature:15 
19:06:42.612 Đang chạy test case #12: Kiểm tra ký tự Unicode 
19:06:42.613 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:42.622 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell passed">71</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.630 request:
1 &gt; DELETE http://localhost:3000/follows/user%F0%9F%98%8A123
1 &gt; Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w
1 &gt; Host: localhost:3000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.14 (Java/17.0.9)
1 &gt; Accept-Encoding: gzip,deflate


19:06:42.693 response time in milliseconds: 63
1 &lt; 500
1 &lt; X-Powered-By: Express
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Content-Type: application/json; charset=utf-8
1 &lt; Content-Length: 554
1 &lt; ETag: W/&quot;22a-WsU/+idLNa7sk0XQxMCSDi5pfdw&quot;
1 &lt; Date: Tue, 24 Jun 2025 12:06:42 GMT
1 &lt; Connection: keep-alive
1 &lt; Keep-Alive: timeout=5
{
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/user%F0%9F%98%8A123&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.692Z&quot;
}


</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.18">19:06:42.694 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.19">19:06:42.694 [print] Following ID: user😊123 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.20">19:06:42.694 [print] Final URL: http://localhost:3000/follows/user😊123 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.21">19:06:42.696 [print] Response status: 500 body: {
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/user%F0%9F%98%8A123&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.692Z&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">77</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.697 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 
19:06:42.698 Test Case Data: {
  &quot;bearerToken&quot;: &quot;&quot;,
  &quot;followingId&quot;: &quot;user😊123&quot;,
  &quot;testDescription&quot;: &quot;Kiểm tra ký tự Unicode&quot;,
  &quot;expectedStatus&quot;: 400.0,
  &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;Invalid followingId format\&quot;}&quot;,
  &quot;responseStatus&quot;: &quot;500&quot;,
  &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/user%F0%9F%98%8A123\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:19.969Z\&quot;}&quot;,
  &quot;testStatus&quot;: &quot;FAIL&quot;,
  &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 500&quot;
}
 
19:06:42.698 Expected Status: 400.0 
19:06:42.698 Expected Result: {&quot;error&quot;: &quot;Invalid followingId format&quot;} 
19:06:42.698 Actual Status: 500 
19:06:42.698 Test Status: FAIL 
19:06:42.698 Test case #12 - Status: 500, Test Result: FAIL 
19:06:42.699 Đang chạy test case #13: Kiểm tra trường null 
19:06:42.699 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:42.707 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell passed">72</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.712 request:
1 &gt; DELETE http://localhost:3000/follows/null
1 &gt; Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w
1 &gt; Host: localhost:3000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.14 (Java/17.0.9)
1 &gt; Accept-Encoding: gzip,deflate


19:06:42.781 response time in milliseconds: 68
1 &lt; 500
1 &lt; X-Powered-By: Express
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Content-Type: application/json; charset=utf-8
1 &lt; Content-Length: 539
1 &lt; ETag: W/&quot;21b-ocwRMnh5oxBy33r0NBwv3PtUQNI&quot;
1 &lt; Date: Tue, 24 Jun 2025 12:06:42 GMT
1 &lt; Connection: keep-alive
1 &lt; Keep-Alive: timeout=5
{
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/null&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.779Z&quot;
}


</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.18">19:06:42.782 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.19">19:06:42.782 [print] Following ID: NULL_VALUE 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.20">19:06:42.782 [print] Final URL: http://localhost:3000/follows/null 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.21">19:06:42.784 [print] Response status: 500 body: {
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/null&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.779Z&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.121.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">features.helpers.unfollow-single-call</div>
      </div>
      <div class="time-cell passed">73</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def config = karate.call(&#39;classpath:karate-config.js&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.4">19:06:42.786 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 
19:06:42.787 Test Case Data: {
  &quot;bearerToken&quot;: &quot;&quot;,
  &quot;followingId&quot;: &quot;NULL_VALUE&quot;,
  &quot;testDescription&quot;: &quot;Kiểm tra trường null&quot;,
  &quot;expectedStatus&quot;: 400.0,
  &quot;expectedResult&quot;: &quot;{\&quot;error\&quot;: \&quot;followingId cannot be null\&quot;}&quot;,
  &quot;responseStatus&quot;: &quot;500&quot;,
  &quot;result&quot;: &quot;{\&quot;success\&quot;:false,\&quot;statusCode\&quot;:500,\&quot;message\&quot;:\&quot;\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\&quot;,\&quot;path\&quot;:\&quot;/follows/NULL_VALUE\&quot;,\&quot;timestamp\&quot;:\&quot;2025-06-23T10:13:20.052Z\&quot;}&quot;,
  &quot;testStatus&quot;: &quot;FAIL&quot;,
  &quot;failureReason&quot;: &quot;Status mismatch: Expected 400, got 500&quot;
}
 
19:06:42.787 Expected Status: 400.0 
19:06:42.787 Expected Result: {&quot;error&quot;: &quot;followingId cannot be null&quot;} 
19:06:42.787 Actual Status: 500 
19:06:42.787 Test Status: FAIL 
19:06:42.788 Test case #13 - Status: 500, Test Result: FAIL 
19:06:42.789 Đang chạy test case #14: Kiểm tra độ dài followingId 
19:06:42.789 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
19:06:42.797 karate.env system property was: null 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Xử lý URL endpoint dựa trên followingId</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def baseEndpoint = config.baseUrl + &#39;/follows&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def finalUrl = followingId == &#39;EMPTY&#39; ? baseEndpoint : (followingId == &#39;NULL_VALUE&#39; ? baseEndpoint + &#39;/null&#39; : baseEndpoint + &#39;/&#39; + followingId)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Thêm header Authorization nếu có bearer token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (bearerToken &amp;&amp; bearerToken.trim() !== &#39;&#39;) karate.set(&#39;Authorization&#39;, &#39;Bearer &#39; + bearerToken)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure headers = { Authorization: &#39;#(Authorization)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method DELETE</span>
      </div>
    </div>
    <div class="time-cell passed">69</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.15">19:06:42.798 request:
1 &gt; DELETE http://localhost:3000/follows/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
1 &gt; Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w
1 &gt; Host: localhost:3000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.14 (Java/17.0.9)
1 &gt; Accept-Encoding: gzip,deflate


19:06:42.867 response time in milliseconds: 67
1 &lt; 500
1 &lt; X-Powered-By: Express
1 &lt; Access-Control-Allow-Origin: *
1 &lt; Content-Type: application/json; charset=utf-8
1 &lt; Content-Length: 572
1 &lt; ETag: W/&quot;23c-GxXEn5yxEycr5YoMjLhGWr5zGz8&quot;
1 &lt; Date: Tue, 24 Jun 2025 12:06:42 GMT
1 &lt; Connection: keep-alive
1 &lt; Keep-Alive: timeout=5
{
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.864Z&quot;
}


</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>def actualStatus = responseStatus</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>def actualResponse = response</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Calling unfollow API với bearerToken:&#39;, bearerToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.18">19:06:42.867 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Following ID:&#39;, followingId</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.19">19:06:42.867 [print] Following ID: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Final URL:&#39;, finalUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.20">19:06:42.867 [print] Final URL: http://localhost:3000/follows/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.121.0.call">
    <div class="step-container" id="0.121.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>print &#39;Response status:&#39;, actualStatus, &#39;body:&#39;, actualResponse</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.121.0.call.0.21">19:06:42.869 [print] Response status: 500 body: {
  &quot;success&quot;: false,
  &quot;statusCode&quot;: 500,
  &quot;message&quot;: &quot;\nInvalid `this.prisma.follow.delete()` invocation in\nD:\\Documents\\Workspace\\react_native\\roamly_backend\\src\\modules\\follow\\follow.service.ts:74:52\n\n  71 }\n  72 \n  73 async deleteFollow(followerId: string, followingId: string) {\n→ 74   const deleted = await this.prisma.follow.delete(\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.&quot;,
  &quot;path&quot;: &quot;/follows/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;,
  &quot;timestamp&quot;: &quot;2025-06-24T12:06:42.864Z&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.122">
      <div class="step-ref passed">122</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def testResults = results</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.123">
      <div class="step-ref passed">123</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;Hoàn thành tất cả test cases unfollow. Đang ghi kết quả vào Excel...&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.123">19:06:42.871 [print] Hoàn thành tất cả test cases unfollow. Đang ghi kết quả vào Excel... 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># ===== THỐNG KÊ TEST RESULTS =====</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.126">
      <div class="step-ref passed">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def passedTests = karate.filter(testResults, function(item) { return item.testStatus === &#39;PASS&#39;; })</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.127">
      <div class="step-ref passed">127</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def failedTests = karate.filter(testResults, function(item) { return item.testStatus === &#39;FAIL&#39;; })</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.128">
      <div class="step-ref passed">128</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def totalTests = testResults.length</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.129">
      <div class="step-ref passed">129</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def passedCount = passedTests.length</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.130">
      <div class="step-ref passed">130</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def failedCount = failedTests.length</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.131">
      <div class="step-ref passed">131</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def successRate = passedCount / totalTests * 100</span>
      </div>
    </div>
    <div class="time-cell passed">4</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Log thống kê</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.134">
      <div class="step-ref passed">134</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;========================================&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.134">19:06:42.881 [print] ======================================== 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.135">
      <div class="step-ref passed">135</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;📊 THỐNG KÊ KẾT QUẢ TEST UNFOLLOW:&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.135">19:06:42.882 [print] 📊 THỐNG KÊ KẾT QUẢ TEST UNFOLLOW: 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.136">
      <div class="step-ref passed">136</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;📁 Tổng số test cases: &#39; + totalTests</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.136">19:06:42.882 [print] 📁 Tổng số test cases: 14 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.137">
      <div class="step-ref passed">137</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;✅ Số test PASSED: &#39; + passedCount</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.137">19:06:42.883 [print] ✅ Số test PASSED: 3 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.138">
      <div class="step-ref passed">138</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;❌ Số test FAILED: &#39; + failedCount</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.138">19:06:42.884 [print] ❌ Số test FAILED: 11 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.139">
      <div class="step-ref passed">139</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;📈 Tỷ lệ thành công: &#39; + successRate.toFixed(2) + &#39;%&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">6</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.139">19:06:42.890 [print] 📈 Tỷ lệ thành công: 21.43% 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.140">
      <div class="step-ref passed">140</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;========================================&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.140">19:06:42.891 [print] ======================================== 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Log failed tests</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref passed">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (failedTests.length &gt; 0) karate.forEach(failedTests, function(test, index) { karate.log(&#39;❌ Failed test #&#39; + (index + 1) + &#39;: &#39; + test.failureReason); })</span>
      </div>
    </div>
    <div class="time-cell passed">6</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.143">19:06:42.895 ❌ Failed test #1: Status mismatch: Expected 400, got 404 
19:06:42.896 ❌ Failed test #2: Status mismatch: Expected 404, got 500 
19:06:42.896 ❌ Failed test #3: Status mismatch: Expected 400, got 500 
19:06:42.896 ❌ Failed test #4: Status mismatch: Expected 404, got 500 
19:06:42.896 ❌ Failed test #5: Status mismatch: Expected 400, got 500 
19:06:42.896 ❌ Failed test #6: Exception: java.net.URISyntaxException: Illegal character in path at index 38: http://localhost:3000/follows/user123&#39; OR &#39;1&#39;=&#39;1
classpath:features/helpers/unfollow-single-call.feature:15 
19:06:42.896 ❌ Failed test #7: Exception: java.net.URISyntaxException: Illegal character in path at index 30: http://localhost:3000/follows/&lt;script&gt;alert(&quot;xss&quot;)&lt;/script&gt;
classpath:features/helpers/unfollow-single-call.feature:15 
19:06:42.896 ❌ Failed test #8: Exception: java.net.URISyntaxException: Illegal character in path at index 30: http://localhost:3000/follows/ 
classpath:features/helpers/unfollow-single-call.feature:15 
19:06:42.896 ❌ Failed test #9: Status mismatch: Expected 400, got 500 
19:06:42.896 ❌ Failed test #10: Status mismatch: Expected 400, got 500 
19:06:42.897 ❌ Failed test #11: Status mismatch: Expected 400, got 500 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.145">
      <div class="step-ref passed">145</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print &#39;Ghi kết quả vào Excel...&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.145">19:06:42.898 [print] Ghi kết quả vào Excel... 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.146">
      <div class="step-ref passed">146</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def writeSuccess = writeToExcel(excelFilePath, sheetName, testResults)</span>
      </div>
    </div>
    <div class="time-cell passed">352</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.147">
      <div class="step-ref passed">147</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (writeSuccess) karate.log(&#39;Đã ghi kết quả unfollow vào Excel thành công!&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.147">19:06:43.251 Đã ghi kết quả unfollow vào Excel thành công! 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.148">
      <div class="step-ref passed">148</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (!writeSuccess) karate.log(&#39;Lỗi khi ghi kết quả unfollow vào Excel!&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
      </div>
    </div>
  </body>
</html>

