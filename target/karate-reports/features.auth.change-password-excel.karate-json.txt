{"failedCount":0,"prefixedPath":"classpath:features\/auth\/change-password-excel.feature","packageQualifiedName":"features.auth.change-password-excel","loopIndex":-1,"relativePath":"features\/auth\/change-password-excel.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":788800,"startTime":1750661560525,"endTime":1750661560526,"millis":0.7888,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"},"stepLog":"13:52:40.485 karate.env system property was: null \n"},{"result":{"nanos":9851400,"startTime":1750661560528,"endTime":1750661560538,"millis":9.8514,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:40.533 karate.env system property was: null \n"},{"result":{"nanos":39176600,"startTime":1750661560538,"endTime":1750661560577,"millis":39.1766,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def readExcel = read('classpath:utils\/read-excel.js')"}},{"result":{"nanos":19369700,"startTime":1750661560578,"endTime":1750661560597,"millis":19.3697,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def writeToExcel = read('classpath:utils\/write-excel.js')"}},{"result":{"nanos":1040100,"startTime":1750661560598,"endTime":1750661560599,"millis":1.0401,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def excelFilePath = 'src\/test\/java\/data\/data.xlsx'"}},{"result":{"nanos":645900,"startTime":1750661560599,"endTime":1750661560600,"millis":0.6459,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def sheetName = 'changePassword'"}},{"result":{"nanos":947256100,"startTime":1750661560599,"endTime":1750661561546,"millis":947.2561,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def testData = readExcel(excelFilePath, sheetName)"},"stepLog":"13:52:41.425 Headers found: [\n  \"bearerToken\",\n  \"oldPassword\",\n  \"newPassword\",\n  \"expectedStatus\",\n  \"expectedResult\",\n  \"testDescription\",\n  \"responseStatus\",\n  \"result\",\n  \"testStatus\",\n  \"failureReason\"\n]\n \n13:52:41.533 Read data from Excel: [\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"123456\",\n    \"newPassword\": \"Password123\",\n    \"expectedStatus\": \"200\",\n    \"expectedResult\": \"{\\\"message\\\": \\\"Password changed successfully\\\"}\",\n    \"testDescription\": \"TC1: Thay đổi mật khẩu hợp lệ\",\n    \"responseStatus\": \"200\",\n    \"result\": \"{\\\"message\\\":\\\"Đổi mật khẩu thành công\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"Status code matches: 200\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"\",\n    \"newPassword\": \"NewPass456\",\n    \"expectedStatus\": \"400\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"Old password is required\\\"}\",\n    \"testDescription\": \"TC2: Thiếu trường oldPassword\",\n    \"responseStatus\": \"400\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Mật khẩu cũ không đúng\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:49.967Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"Status code matches: 400\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"Password123\",\n    \"newPassword\": \"\",\n    \"expectedStatus\": \"400\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"New password is required\\\"}\",\n    \"testDescription\": \"TC3: Thiếu trường newPassword\",\n    \"responseStatus\": \"400\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Dữ liệu không hợp lệ\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:50.052Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"Status code matches: 400\"\n  },\n  {\n    \"bearerToken\": \"NO_TOKEN\",\n    \"oldPassword\": \"Password123\",\n    \"newPassword\": \"NewPass456\",\n    \"expectedStatus\": \"401\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n    \"testDescription\": \"TC4: Thiếu token xác thực\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:50.123Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"Status code matches: 401\"\n  },\n  {\n    \"bearerToken\": \"invalid_token_12345\",\n    \"oldPassword\": \"Password123\",\n    \"newPassword\": \"NewPass456\",\n    \"expectedStatus\": \"401\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid or expired token\\\"}\",\n    \"testDescription\": \"TC5: Token không hợp lệ\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:50.164Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"Status code matches: 401\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"WrongPass123\",\n    \"newPassword\": \"NewPass456\",\n    \"expectedStatus\": \"401\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"Old password is incorrect\\\"}\",\n    \"testDescription\": \"TC6: oldPassword sai\",\n    \"responseStatus\": \"400\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Mật khẩu cũ không đúng\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:50.383Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 401, got 400\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"Password123\",\n    \"newPassword\": \"New12\",\n    \"expectedStatus\": \"400\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"New password must be at least 6 characters\\\"}\",\n    \"testDescription\": \"TC7: newPassword quá ngắn\",\n    \"responseStatus\": \"400\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Dữ liệu không hợp lệ\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:50.469Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"Status code matches: 400\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"Password123\",\n    \"newPassword\": \"Password123\",\n    \"expectedStatus\": \"400\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"New password must be different from old password\\\"}\",\n    \"testDescription\": \"TC8: newPassword giống oldPassword\",\n    \"responseStatus\": \"200\",\n    \"result\": \"{\\\"message\\\":\\\"Đổi mật khẩu thành công\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 200\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"Password123\",\n    \"newPassword\": \"NewPassword\",\n    \"expectedStatus\": \"400\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"New password must contain at least one number\\\"}\",\n    \"testDescription\": \"TC9: newPassword không chứa số\",\n    \"responseStatus\": \"200\",\n    \"result\": \"{\\\"message\\\":\\\"Đổi mật khẩu thành công\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 200\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"NewPassword\",\n    \"newPassword\": \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\n    \"expectedStatus\": \"400\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"New password exceeds maximum length\\\"}\",\n    \"testDescription\": \"TC10: newPassword quá dài\",\n    \"responseStatus\": \"400\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Mật khẩu cũ không đúng\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:51.858Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"Status code matches: 400\"\n  },\n  {\n    \"bearerToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q\",\n    \"oldPassword\": \"123456\",\n    \"newPassword\": \"NewPass' OR '1'='1\",\n    \"expectedStatus\": \"400\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n    \"testDescription\": \"TC11: Kiểm tra SQL Injection\",\n    \"responseStatus\": \"200\",\n    \"result\": \"{\\\"message\\\":\\\"Đổi mật khẩu thành công\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 200\"\n  },\n  {\n    \"bearerToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q\",\n    \"oldPassword\": \"NewPass' OR '1'='1\",\n    \"newPassword\": \"<script>alert('xss')<\/script>\",\n    \"expectedStatus\": \"400\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n    \"testDescription\": \"TC12: Kiểm tra XSS\",\n    \"responseStatus\": \"200\",\n    \"result\": \"{\\\"message\\\":\\\"Đổi mật khẩu thành công\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 200\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"\",\n    \"newPassword\": \"\",\n    \"expectedStatus\": \"400\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"All fields are required\\\"}\",\n    \"testDescription\": \"TC13: Tất cả các trường rỗng\",\n    \"responseStatus\": \"400\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Dữ liệu không hợp lệ\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:53.005Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"Status code matches: 400\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \" \",\n    \"newPassword\": \" \",\n    \"expectedStatus\": \"400\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"Fields cannot contain only whitespace\\\"}\",\n    \"testDescription\": \"TC14: Kiểm tra khoảng trắng\",\n    \"responseStatus\": \"400\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Dữ liệu không hợp lệ\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:53.070Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"Status code matches: 400\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\n    \"newPassword\": \"NewPass😊456\",\n    \"expectedStatus\": \"200\",\n    \"expectedResult\": \"{\\\"message\\\": \\\"Password changed successfully\\\"}\",\n    \"testDescription\": \"TC15: Kiểm tra ký tự Unicode\",\n    \"responseStatus\": \"400\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Mật khẩu cũ không đúng\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:53.255Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 200, got 400\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"NewPass😊456\",\n    \"newPassword\": \"NewPass456\",\n    \"expectedStatus\": \"200\",\n    \"expectedResult\": \"{\\\"message\\\": \\\"Password changed successfully\\\"}\",\n    \"testDescription\": \"TC16: Kiểm tra độ trễ phản hồi (stress test)\",\n    \"responseStatus\": \"400\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Mật khẩu cũ không đúng\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:53.432Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 200, got 400\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"NULL_VALUE\",\n    \"newPassword\": \"NULL_VALUE\",\n    \"expectedStatus\": \"400\",\n    \"expectedResult\": \"{\\\"error\\\": \\\"Fields cannot be null\\\"}\",\n    \"testDescription\": \"TC18: Kiểm tra trường null\",\n    \"responseStatus\": \"400\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Dữ liệu không hợp lệ\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:53.665Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"Status code matches: 400\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"oldPassword\": \"\",\n    \"newPassword\": \"\",\n    \"expectedStatus\": \"\",\n    \"expectedResult\": \"\",\n    \"testDescription\": \"\",\n    \"responseStatus\": \"\",\n    \"result\": \"\",\n    \"testStatus\": \"\",\n    \"failureReason\": \"\"\n  }\n]\n \n"},{"result":{"nanos":13421800,"startTime":1750661561547,"endTime":1750661561560,"millis":13.4218,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"print 'Đọc được ' + testData.length + ' test cases từ Excel sheet: ' + sheetName"},"stepLog":"13:52:41.560 [print] Đọc được 18 test cases từ Excel sheet: changePassword \n"},{"result":{"nanos":22521200,"startTime":1750661561561,"endTime":1750661561584,"millis":22.5212,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def testResults = []"}},{"result":{"nanos":1114100,"startTime":1750661561583,"endTime":1750661561584,"millis":1.1141,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def globalBearerToken = config.bearerToken"}},{"result":{"nanos":1555200,"startTime":1750661561584,"endTime":1750661561586,"millis":1.5552,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"print 'Sử dụng global bearer token từ config:', globalBearerToken"},"stepLog":"13:52:41.586 [print] Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":3762200,"startTime":1750661561586,"endTime":1750661561590,"millis":3.7622,"status":"passed"},"step":{"endLine":35,"line":17,"prefix":"*","docString":"function(testCase, actualStatus, actualResponse) {\n  var expectedStatus = testCase.expectedStatus;\n        \n  \/\/ Chỉ so sánh Status Code\n  if (actualStatus != expectedStatus) {\n    return {\n      status: 'FAIL',\n      reason: 'Status mismatch: Expected ' + expectedStatus + ', got ' + actualStatus\n    };\n  }\n        \n  return {\n    status: 'PASS',\n    reason: 'Status code matches: ' + expectedStatus\n  };\n}","index":0,"text":"def evaluateTestCase ="}},{"result":{"nanos":7790800,"startTime":1750661561589,"endTime":1750661561597,"millis":7.7908,"status":"passed"},"step":{"endLine":104,"line":37,"prefix":"*","docString":"function(testCase, index) {\n  karate.log('Đang chạy test case #' + (index + 1) + ': ' + testCase.testDescription);\n        \n  var bearerToken = '';\n        \n  \/\/ Sử dụng bearer token từ test case hoặc global config\n  if (testCase.bearerToken && testCase.bearerToken.trim() !== '') {\n    if (testCase.bearerToken === 'NO_TOKEN') {\n      \/\/ TC4: Không có token\n      bearerToken = '';\n      karate.log('Test case không sử dụng token');\n    } else {\n      \/\/ Sử dụng token từ Excel nếu có\n      bearerToken = testCase.bearerToken;\n      karate.log('Sử dụng bearer token từ Excel:', bearerToken);\n    }\n  } else {\n    \/\/ Sử dụng global token từ config\n    bearerToken = globalBearerToken;\n    karate.log('Sử dụng global bearer token từ config:', bearerToken);\n  }\n        \n  \/\/ Gọi API change password\n  var response = karate.call('classpath:features\/helpers\/change-password-single-call.feature', {\n    bearerToken: bearerToken,\n    oldPassword: testCase.oldPassword || '',\n    newPassword: testCase.newPassword || ''\n  });\n        \n  var actualStatus = response.actualStatus;\n  var actualResult = '';\n        \n  \/\/ Ghi response thực tế vào result\n  if (response.actualResponse) {\n    actualResult = JSON.stringify(response.actualResponse);\n  } else {\n    actualResult = 'No response body';\n  }\n        \n  \/\/ ===== ĐÁNH GIÁ PASS\/FAIL =====\n  var testEvaluation = evaluateTestCase(testCase, actualStatus, response.actualResponse);\n        \n  \/\/ Log kết quả đánh giá\n  if (testEvaluation.status === 'FAIL') {\n    karate.log('❌ TEST FAILED - ' + testEvaluation.reason);\n  } else {\n    karate.log('✅ TEST PASSED - ' + testEvaluation.reason);\n  }\n        \n  \/\/ Log chi tiết để debug\n  karate.log('Test Case Data:', testCase);\n  karate.log('Expected Status:', testCase.expectedStatus);\n  karate.log('Expected Result:', testCase.expectedResult);\n  karate.log('Actual Status:', actualStatus);\n  karate.log('Test Status:', testEvaluation.status);\n        \n  karate.log('Test case #' + (index + 1) + ' - Status: ' + actualStatus + ', Test Result: ' + testEvaluation.status);\n        \n  return {\n    responseStatus: actualStatus,\n    result: actualResult,\n    testStatus: testEvaluation.status,\n    failureReason: testEvaluation.reason\n  };\n}","index":1,"text":"def runTest ="}},{"result":{"nanos":1524900,"startTime":1750661561598,"endTime":1750661561600,"millis":1.5249,"status":"passed"},"step":{"line":106,"prefix":"*","index":2,"text":"print 'Bắt đầu chạy từng test case...'"},"stepLog":"13:52:41.599 [print] Bắt đầu chạy từng test case... \n"},{"result":{"nanos":6020975100,"startTime":1750661561599,"endTime":1750661567620,"millis":6020.9751,"status":"passed"},"step":{"line":107,"prefix":"*","index":3,"text":"def results = karate.map(testData, runTest)"},"stepLog":"13:52:47.619 ❌ TEST FAILED - Status mismatch: Expected , got 400 \n13:52:47.619 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"\",\n  \"newPassword\": \"\",\n  \"expectedStatus\": \"\",\n  \"expectedResult\": \"\",\n  \"testDescription\": \"\",\n  \"responseStatus\": \"\",\n  \"result\": \"\",\n  \"testStatus\": \"\",\n  \"failureReason\": \"\"\n}\n \n13:52:47.619 Expected Status:  \n13:52:47.619 Expected Result:  \n13:52:47.619 Actual Status: 400 \n13:52:47.619 Test Status: FAIL \n13:52:47.619 Test case #18 - Status: 400, Test Result: FAIL \n","callResults":[{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":778.4906,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"123456","newPassword":"Password123"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":5179400,"startTime":1750661561621,"endTime":1750661561626,"millis":5.1794,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:41.603 Đang chạy test case #1: TC1: Thay đổi mật khẩu hợp lệ \n13:52:41.605 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:41.624 karate.env system property was: null \n"},{"result":{"nanos":808300,"startTime":1750661561626,"endTime":1750661561627,"millis":0.8083,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":5824300,"startTime":1750661561627,"endTime":1750661561633,"millis":5.8243,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":3408100,"startTime":1750661561633,"endTime":1750661561636,"millis":3.4081,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":890100,"startTime":1750661561636,"endTime":1750661561637,"millis":0.8901,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":1294100,"startTime":1750661561637,"endTime":1750661561638,"millis":1.2941,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":2283100,"startTime":1750661561640,"endTime":1750661561642,"millis":2.2831,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":697500,"startTime":1750661561641,"endTime":1750661561642,"millis":0.6975,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":753273800,"startTime":1750661561642,"endTime":1750661562395,"millis":753.2738,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:41.955 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 52\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"123456\",\n  \"newPassword\": \"Password123\"\n}\n\n\n13:52:42.393 response time in milliseconds: 435\n1 < 200\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 82\n1 < ETag: W\/\"52-0YNtp8Hc7UFAT0Qtehp\/W8B7RwU\"\n1 < Date: Mon, 23 Jun 2025 06:52:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n\n\n"},{"result":{"nanos":582100,"startTime":1750661562395,"endTime":1750661562396,"millis":0.5821,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":263100,"startTime":1750661562396,"endTime":1750661562396,"millis":0.2631,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":1595200,"startTime":1750661562396,"endTime":1750661562398,"millis":1.5952,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:42.398 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":1160400,"startTime":1750661562398,"endTime":1750661562399,"millis":1.1604,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:42.400 [print] Request body - oldPassword: 123456 newPassword: Password123 \n"},{"result":{"nanos":1231100,"startTime":1750661562400,"endTime":1750661562401,"millis":1.2311,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:42.401 [print] Response status: 200 body: {\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":778.4906,"startTime":1750661561621,"failed":false,"refId":"[1:3]","endTime":1750661562401,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":212.1784,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"","newPassword":"NewPass456"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":4827400,"startTime":1750661562448,"endTime":1750661562453,"millis":4.8274,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:42.429 ✅ TEST PASSED - Status code matches: 200 \n13:52:42.429 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"123456\",\n  \"newPassword\": \"Password123\",\n  \"expectedStatus\": \"200\",\n  \"expectedResult\": \"{\\\"message\\\": \\\"Password changed successfully\\\"}\",\n  \"testDescription\": \"TC1: Thay đổi mật khẩu hợp lệ\",\n  \"responseStatus\": \"200\",\n  \"result\": \"{\\\"message\\\":\\\"Đổi mật khẩu thành công\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"Status code matches: 200\"\n}\n \n13:52:42.431 Expected Status: 200 \n13:52:42.431 Expected Result: {\"message\": \"Password changed successfully\"} \n13:52:42.432 Actual Status: 200 \n13:52:42.432 Test Status: PASS \n13:52:42.432 Test case #1 - Status: 200, Test Result: PASS \n13:52:42.434 Đang chạy test case #2: TC2: Thiếu trường oldPassword \n13:52:42.434 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:42.451 karate.env system property was: null \n"},{"result":{"nanos":541000,"startTime":1750661562454,"endTime":1750661562455,"millis":0.541,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":608500,"startTime":1750661562454,"endTime":1750661562455,"millis":0.6085,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":495400,"startTime":1750661562455,"endTime":1750661562455,"millis":0.4954,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":248800,"startTime":1750661562455,"endTime":1750661562455,"millis":0.2488,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":206800,"startTime":1750661562456,"endTime":1750661562456,"millis":0.2068,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":428700,"startTime":1750661562456,"endTime":1750661562456,"millis":0.4287,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":159800,"startTime":1750661562456,"endTime":1750661562456,"millis":0.1598,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":203155900,"startTime":1750661562457,"endTime":1750661562660,"millis":203.1559,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:42.458 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 45\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"\",\n  \"newPassword\": \"NewPass456\"\n}\n\n\n13:52:42.659 response time in milliseconds: 199\n1 < 400\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 148\n1 < ETag: W\/\"94-7DIFrKsctGknCjmC7M\/DtCBYaIk\"\n1 < Date: Mon, 23 Jun 2025 06:52:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Mật khẩu cũ không đúng\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:42.656Z\"\n}\n\n\n"},{"result":{"nanos":218300,"startTime":1750661562659,"endTime":1750661562659,"millis":0.2183,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":185100,"startTime":1750661562660,"endTime":1750661562660,"millis":0.1851,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":493500,"startTime":1750661562660,"endTime":1750661562660,"millis":0.4935,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:42.660 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":243200,"startTime":1750661562660,"endTime":1750661562660,"millis":0.2432,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:42.661 [print] Request body - oldPassword:  newPassword: NewPass456 \n"},{"result":{"nanos":366000,"startTime":1750661562661,"endTime":1750661562661,"millis":0.366,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:42.662 [print] Response status: 400 body: {\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Mật khẩu cũ không đúng\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:42.656Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":212.1784,"startTime":1750661562448,"failed":false,"refId":"[1:3]","endTime":1750661562662,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":67.3965,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"Password123","newPassword":""},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2845800,"startTime":1750661562672,"endTime":1750661562675,"millis":2.8458,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:42.664 ✅ TEST PASSED - Status code matches: 400 \n13:52:42.664 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"\",\n  \"newPassword\": \"NewPass456\",\n  \"expectedStatus\": \"400\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"Old password is required\\\"}\",\n  \"testDescription\": \"TC2: Thiếu trường oldPassword\",\n  \"responseStatus\": \"400\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Mật khẩu cũ không đúng\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:49.967Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"Status code matches: 400\"\n}\n \n13:52:42.664 Expected Status: 400 \n13:52:42.664 Expected Result: {\"error\": \"Old password is required\"} \n13:52:42.664 Actual Status: 400 \n13:52:42.664 Test Status: PASS \n13:52:42.665 Test case #2 - Status: 400, Test Result: PASS \n13:52:42.665 Đang chạy test case #3: TC3: Thiếu trường newPassword \n13:52:42.665 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:42.674 karate.env system property was: null \n"},{"result":{"nanos":218400,"startTime":1750661562676,"endTime":1750661562676,"millis":0.2184,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":286600,"startTime":1750661562676,"endTime":1750661562676,"millis":0.2866,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":315800,"startTime":1750661562676,"endTime":1750661562676,"millis":0.3158,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":203500,"startTime":1750661562676,"endTime":1750661562676,"millis":0.2035,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":129800,"startTime":1750661562676,"endTime":1750661562676,"millis":0.1298,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":520000,"startTime":1750661562677,"endTime":1750661562678,"millis":0.52,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":136400,"startTime":1750661562677,"endTime":1750661562677,"millis":0.1364,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":61136500,"startTime":1750661562677,"endTime":1750661562738,"millis":61.1365,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:42.679 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 46\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"\"\n}\n\n\n13:52:42.738 response time in milliseconds: 58\n1 < 400\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 147\n1 < ETag: W\/\"93-Dn3CAxBnOgVYQjBSkMlNrOzAcW4\"\n1 < Date: Mon, 23 Jun 2025 06:52:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:42.735Z\"\n}\n\n\n"},{"result":{"nanos":257700,"startTime":1750661562739,"endTime":1750661562739,"millis":0.2577,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":156200,"startTime":1750661562739,"endTime":1750661562739,"millis":0.1562,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":441000,"startTime":1750661562739,"endTime":1750661562739,"millis":0.441,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:42.739 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":256600,"startTime":1750661562740,"endTime":1750661562740,"millis":0.2566,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:42.740 [print] Request body - oldPassword: Password123 newPassword:  \n"},{"result":{"nanos":492200,"startTime":1750661562740,"endTime":1750661562740,"millis":0.4922,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:42.740 [print] Response status: 400 body: {\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:42.735Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":67.3965,"startTime":1750661562672,"failed":false,"refId":"[1:3]","endTime":1750661562740,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":29.3536,"callArg":{"bearerToken":"","oldPassword":"Password123","newPassword":"NewPass456"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2361300,"startTime":1750661562753,"endTime":1750661562755,"millis":2.3613,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:42.742 ✅ TEST PASSED - Status code matches: 400 \n13:52:42.743 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"\",\n  \"expectedStatus\": \"400\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"New password is required\\\"}\",\n  \"testDescription\": \"TC3: Thiếu trường newPassword\",\n  \"responseStatus\": \"400\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Dữ liệu không hợp lệ\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:50.052Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"Status code matches: 400\"\n}\n \n13:52:42.743 Expected Status: 400 \n13:52:42.743 Expected Result: {\"error\": \"New password is required\"} \n13:52:42.743 Actual Status: 400 \n13:52:42.743 Test Status: PASS \n13:52:42.743 Test case #3 - Status: 400, Test Result: PASS \n13:52:42.744 Đang chạy test case #4: TC4: Thiếu token xác thực \n13:52:42.744 Test case không sử dụng token \n13:52:42.754 karate.env system property was: null \n"},{"result":{"nanos":188700,"startTime":1750661562756,"endTime":1750661562756,"millis":0.1887,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":2300900,"startTime":1750661562756,"endTime":1750661562758,"millis":2.3009,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":14446000,"startTime":1750661562758,"endTime":1750661562772,"millis":14.446,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":399000,"startTime":1750661562772,"endTime":1750661562772,"millis":0.399,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":178100,"startTime":1750661562773,"endTime":1750661562773,"millis":0.1781,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":508000,"startTime":1750661562773,"endTime":1750661562774,"millis":0.508,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":115100,"startTime":1750661562773,"endTime":1750661562773,"millis":0.1151,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":6518800,"startTime":1750661562774,"endTime":1750661562781,"millis":6.5188,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:42.775 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: #(Authorization)\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 56\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"NewPass456\"\n}\n\n\n13:52:42.780 response time in milliseconds: 3\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 130\n1 < ETag: W\/\"82-afNSZNCsJJ5UKG1wsSQFhAPZXeY\"\n1 < Date: Mon, 23 Jun 2025 06:52:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:42.778Z\"\n}\n\n\n"},{"result":{"nanos":282600,"startTime":1750661562780,"endTime":1750661562780,"millis":0.2826,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":161100,"startTime":1750661562781,"endTime":1750661562781,"millis":0.1611,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":657500,"startTime":1750661562781,"endTime":1750661562782,"millis":0.6575,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:42.781 [print] Calling change password API với bearerToken:  \n"},{"result":{"nanos":594900,"startTime":1750661562781,"endTime":1750661562782,"millis":0.5949,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:42.782 [print] Request body - oldPassword: Password123 newPassword: NewPass456 \n"},{"result":{"nanos":641600,"startTime":1750661562783,"endTime":1750661562784,"millis":0.6416,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:42.783 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:42.778Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":29.3536,"startTime":1750661562752,"failed":false,"refId":"[1:3]","endTime":1750661562783,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":12.6005,"callArg":{"bearerToken":"invalid_token_12345","oldPassword":"Password123","newPassword":"NewPass456"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2695100,"startTime":1750661562794,"endTime":1750661562797,"millis":2.6951,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:42.785 ✅ TEST PASSED - Status code matches: 401 \n13:52:42.785 Test Case Data: {\n  \"bearerToken\": \"NO_TOKEN\",\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"NewPass456\",\n  \"expectedStatus\": \"401\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n  \"testDescription\": \"TC4: Thiếu token xác thực\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:50.123Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"Status code matches: 401\"\n}\n \n13:52:42.785 Expected Status: 401 \n13:52:42.785 Expected Result: {\"error\": \"Unauthorized\"} \n13:52:42.785 Actual Status: 401 \n13:52:42.786 Test Status: PASS \n13:52:42.786 Test case #4 - Status: 401, Test Result: PASS \n13:52:42.786 Đang chạy test case #5: TC5: Token không hợp lệ \n13:52:42.787 Sử dụng bearer token từ Excel: invalid_token_12345 \n13:52:42.795 karate.env system property was: null \n"},{"result":{"nanos":205500,"startTime":1750661562796,"endTime":1750661562796,"millis":0.2055,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":260700,"startTime":1750661562796,"endTime":1750661562796,"millis":0.2607,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":314700,"startTime":1750661562797,"endTime":1750661562797,"millis":0.3147,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":132700,"startTime":1750661562797,"endTime":1750661562797,"millis":0.1327,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":130600,"startTime":1750661562797,"endTime":1750661562797,"millis":0.1306,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":293400,"startTime":1750661562797,"endTime":1750661562797,"millis":0.2934,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":86600,"startTime":1750661562798,"endTime":1750661562798,"millis":0.0866,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":6972000,"startTime":1750661562798,"endTime":1750661562805,"millis":6.972,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:42.799 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer invalid_token_12345\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 56\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"NewPass456\"\n}\n\n\n13:52:42.804 response time in milliseconds: 5\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 130\n1 < ETag: W\/\"82-iz+caDu8+\/\/2NBIcEayVnQ6EFeY\"\n1 < Date: Mon, 23 Jun 2025 06:52:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:42.802Z\"\n}\n\n\n"},{"result":{"nanos":227400,"startTime":1750661562805,"endTime":1750661562805,"millis":0.2274,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":108500,"startTime":1750661562805,"endTime":1750661562805,"millis":0.1085,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":718300,"startTime":1750661562805,"endTime":1750661562806,"millis":0.7183,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:42.806 [print] Calling change password API với bearerToken: invalid_token_12345 \n"},{"result":{"nanos":223600,"startTime":1750661562806,"endTime":1750661562806,"millis":0.2236,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:42.806 [print] Request body - oldPassword: Password123 newPassword: NewPass456 \n"},{"result":{"nanos":231400,"startTime":1750661562806,"endTime":1750661562806,"millis":0.2314,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:42.806 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:42.802Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":12.6005,"startTime":1750661562793,"failed":false,"refId":"[1:3]","endTime":1750661562806,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":250.3556,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"WrongPass123","newPassword":"NewPass456"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2092500,"startTime":1750661562816,"endTime":1750661562818,"millis":2.0925,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:42.807 ✅ TEST PASSED - Status code matches: 401 \n13:52:42.808 Test Case Data: {\n  \"bearerToken\": \"invalid_token_12345\",\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"NewPass456\",\n  \"expectedStatus\": \"401\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid or expired token\\\"}\",\n  \"testDescription\": \"TC5: Token không hợp lệ\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:50.164Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"Status code matches: 401\"\n}\n \n13:52:42.808 Expected Status: 401 \n13:52:42.808 Expected Result: {\"error\": \"Invalid or expired token\"} \n13:52:42.808 Actual Status: 401 \n13:52:42.808 Test Status: PASS \n13:52:42.808 Test case #5 - Status: 401, Test Result: PASS \n13:52:42.808 Đang chạy test case #6: TC6: oldPassword sai \n13:52:42.809 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:42.818 karate.env system property was: null \n"},{"result":{"nanos":195500,"startTime":1750661562819,"endTime":1750661562819,"millis":0.1955,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":198100,"startTime":1750661562819,"endTime":1750661562819,"millis":0.1981,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":277800,"startTime":1750661562819,"endTime":1750661562819,"millis":0.2778,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":109100,"startTime":1750661562819,"endTime":1750661562819,"millis":0.1091,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":99600,"startTime":1750661562819,"endTime":1750661562819,"millis":0.0996,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":242000,"startTime":1750661562820,"endTime":1750661562820,"millis":0.242,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":93900,"startTime":1750661562820,"endTime":1750661562820,"millis":0.0939,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":245961000,"startTime":1750661562820,"endTime":1750661563066,"millis":245.961,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:42.822 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 57\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"WrongPass123\",\n  \"newPassword\": \"NewPass456\"\n}\n\n\n13:52:43.066 response time in milliseconds: 242\n1 < 400\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 148\n1 < ETag: W\/\"94-SJD4Exm91UMhNIpqM++U5fsMakw\"\n1 < Date: Mon, 23 Jun 2025 06:52:43 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Mật khẩu cũ không đúng\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:43.063Z\"\n}\n\n\n"},{"result":{"nanos":225900,"startTime":1750661563066,"endTime":1750661563066,"millis":0.2259,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":122400,"startTime":1750661563067,"endTime":1750661563067,"millis":0.1224,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":349400,"startTime":1750661563067,"endTime":1750661563067,"millis":0.3494,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:43.067 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":150800,"startTime":1750661563067,"endTime":1750661563067,"millis":0.1508,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:43.067 [print] Request body - oldPassword: WrongPass123 newPassword: NewPass456 \n"},{"result":{"nanos":237600,"startTime":1750661563067,"endTime":1750661563067,"millis":0.2376,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:43.067 [print] Response status: 400 body: {\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Mật khẩu cũ không đúng\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:43.063Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":250.3556,"startTime":1750661562816,"failed":false,"refId":"[1:3]","endTime":1750661563067,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":70.9037,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"Password123","newPassword":"New12"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1862700,"startTime":1750661563076,"endTime":1750661563078,"millis":1.8627,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:43.068 ❌ TEST FAILED - Status mismatch: Expected 401, got 400 \n13:52:43.069 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"WrongPass123\",\n  \"newPassword\": \"NewPass456\",\n  \"expectedStatus\": \"401\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"Old password is incorrect\\\"}\",\n  \"testDescription\": \"TC6: oldPassword sai\",\n  \"responseStatus\": \"400\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Mật khẩu cũ không đúng\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:50.383Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 401, got 400\"\n}\n \n13:52:43.069 Expected Status: 401 \n13:52:43.069 Expected Result: {\"error\": \"Old password is incorrect\"} \n13:52:43.069 Actual Status: 400 \n13:52:43.069 Test Status: FAIL \n13:52:43.069 Test case #6 - Status: 400, Test Result: FAIL \n13:52:43.069 Đang chạy test case #7: TC7: newPassword quá ngắn \n13:52:43.069 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:43.077 karate.env system property was: null \n"},{"result":{"nanos":156400,"startTime":1750661563078,"endTime":1750661563078,"millis":0.1564,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":171400,"startTime":1750661563078,"endTime":1750661563078,"millis":0.1714,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":255900,"startTime":1750661563078,"endTime":1750661563078,"millis":0.2559,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":104700,"startTime":1750661563079,"endTime":1750661563079,"millis":0.1047,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":107800,"startTime":1750661563079,"endTime":1750661563079,"millis":0.1078,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":241700,"startTime":1750661563079,"endTime":1750661563079,"millis":0.2417,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":61700,"startTime":1750661563079,"endTime":1750661563079,"millis":0.0617,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":66492900,"startTime":1750661563079,"endTime":1750661563145,"millis":66.4929,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:43.081 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 51\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"New12\"\n}\n\n\n13:52:43.146 response time in milliseconds: 64\n1 < 400\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 147\n1 < ETag: W\/\"93-8vbHbPyZ4n8mM1lf+8gNbqEFe8g\"\n1 < Date: Mon, 23 Jun 2025 06:52:43 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:43.144Z\"\n}\n\n\n"},{"result":{"nanos":159700,"startTime":1750661563146,"endTime":1750661563146,"millis":0.1597,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":90600,"startTime":1750661563147,"endTime":1750661563147,"millis":0.0906,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":520000,"startTime":1750661563147,"endTime":1750661563148,"millis":0.52,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:43.147 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":241700,"startTime":1750661563147,"endTime":1750661563147,"millis":0.2417,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:43.148 [print] Request body - oldPassword: Password123 newPassword: New12 \n"},{"result":{"nanos":436500,"startTime":1750661563148,"endTime":1750661563148,"millis":0.4365,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:43.148 [print] Response status: 400 body: {\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:43.144Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":70.9037,"startTime":1750661563076,"failed":false,"refId":"[1:3]","endTime":1750661563148,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":600.636,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"Password123","newPassword":"Password123"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3460000,"startTime":1750661563161,"endTime":1750661563164,"millis":3.46,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:43.150 ✅ TEST PASSED - Status code matches: 400 \n13:52:43.150 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"New12\",\n  \"expectedStatus\": \"400\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"New password must be at least 6 characters\\\"}\",\n  \"testDescription\": \"TC7: newPassword quá ngắn\",\n  \"responseStatus\": \"400\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Dữ liệu không hợp lệ\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:50.469Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"Status code matches: 400\"\n}\n \n13:52:43.150 Expected Status: 400 \n13:52:43.150 Expected Result: {\"error\": \"New password must be at least 6 characters\"} \n13:52:43.150 Actual Status: 400 \n13:52:43.150 Test Status: PASS \n13:52:43.150 Test case #7 - Status: 400, Test Result: PASS \n13:52:43.152 Đang chạy test case #8: TC8: newPassword giống oldPassword \n13:52:43.152 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:43.163 karate.env system property was: null \n"},{"result":{"nanos":239800,"startTime":1750661563164,"endTime":1750661563164,"millis":0.2398,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":282200,"startTime":1750661563165,"endTime":1750661563165,"millis":0.2822,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":478500,"startTime":1750661563165,"endTime":1750661563165,"millis":0.4785,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":221200,"startTime":1750661563165,"endTime":1750661563165,"millis":0.2212,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":159000,"startTime":1750661563166,"endTime":1750661563166,"millis":0.159,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":438700,"startTime":1750661563166,"endTime":1750661563166,"millis":0.4387,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":103700,"startTime":1750661563166,"endTime":1750661563166,"millis":0.1037,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":593496600,"startTime":1750661563166,"endTime":1750661563759,"millis":593.4966,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:43.169 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 57\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"Password123\"\n}\n\n\n13:52:43.759 response time in milliseconds: 590\n1 < 200\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 82\n1 < ETag: W\/\"52-0YNtp8Hc7UFAT0Qtehp\/W8B7RwU\"\n1 < Date: Mon, 23 Jun 2025 06:52:43 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n\n\n"},{"result":{"nanos":193100,"startTime":1750661563760,"endTime":1750661563760,"millis":0.1931,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":107000,"startTime":1750661563760,"endTime":1750661563760,"millis":0.107,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":927400,"startTime":1750661563760,"endTime":1750661563761,"millis":0.9274,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:43.762 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":233000,"startTime":1750661563762,"endTime":1750661563762,"millis":0.233,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:43.762 [print] Request body - oldPassword: Password123 newPassword: Password123 \n"},{"result":{"nanos":295800,"startTime":1750661563762,"endTime":1750661563762,"millis":0.2958,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:43.762 [print] Response status: 200 body: {\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":600.636,"startTime":1750661563161,"failed":false,"refId":"[1:3]","endTime":1750661563762,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":676.4691,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"Password123","newPassword":"NewPassword"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":4362300,"startTime":1750661563775,"endTime":1750661563779,"millis":4.3623,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:43.763 ❌ TEST FAILED - Status mismatch: Expected 400, got 200 \n13:52:43.763 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"Password123\",\n  \"expectedStatus\": \"400\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"New password must be different from old password\\\"}\",\n  \"testDescription\": \"TC8: newPassword giống oldPassword\",\n  \"responseStatus\": \"200\",\n  \"result\": \"{\\\"message\\\":\\\"Đổi mật khẩu thành công\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 200\"\n}\n \n13:52:43.763 Expected Status: 400 \n13:52:43.763 Expected Result: {\"error\": \"New password must be different from old password\"} \n13:52:43.763 Actual Status: 200 \n13:52:43.763 Test Status: FAIL \n13:52:43.763 Test case #8 - Status: 200, Test Result: FAIL \n13:52:43.764 Đang chạy test case #9: TC9: newPassword không chứa số \n13:52:43.764 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:43.778 karate.env system property was: null \n"},{"result":{"nanos":414600,"startTime":1750661563779,"endTime":1750661563779,"millis":0.4146,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":250100,"startTime":1750661563780,"endTime":1750661563780,"millis":0.2501,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":361300,"startTime":1750661563780,"endTime":1750661563780,"millis":0.3613,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":192500,"startTime":1750661563780,"endTime":1750661563780,"millis":0.1925,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":198800,"startTime":1750661563780,"endTime":1750661563780,"millis":0.1988,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":469200,"startTime":1750661563781,"endTime":1750661563781,"millis":0.4692,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":320000,"startTime":1750661563782,"endTime":1750661563782,"millis":0.32,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":667020500,"startTime":1750661563782,"endTime":1750661564449,"millis":667.0205,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:43.785 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 57\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"NewPassword\"\n}\n\n\n13:52:44.448 response time in milliseconds: 662\n1 < 200\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 82\n1 < ETag: W\/\"52-0YNtp8Hc7UFAT0Qtehp\/W8B7RwU\"\n1 < Date: Mon, 23 Jun 2025 06:52:44 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n\n\n"},{"result":{"nanos":259200,"startTime":1750661564449,"endTime":1750661564449,"millis":0.2592,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":794400,"startTime":1750661564449,"endTime":1750661564450,"millis":0.7944,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":747600,"startTime":1750661564450,"endTime":1750661564451,"millis":0.7476,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:44.451 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":382500,"startTime":1750661564451,"endTime":1750661564451,"millis":0.3825,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:44.451 [print] Request body - oldPassword: Password123 newPassword: NewPassword \n"},{"result":{"nanos":696100,"startTime":1750661564451,"endTime":1750661564452,"millis":0.6961,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:44.452 [print] Response status: 200 body: {\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":676.4691,"startTime":1750661563775,"failed":false,"refId":"[1:3]","endTime":1750661564452,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":568.2097,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"NewPassword","newPassword":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3726000,"startTime":1750661564469,"endTime":1750661564473,"millis":3.726,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:44.453 ❌ TEST FAILED - Status mismatch: Expected 400, got 200 \n13:52:44.453 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"Password123\",\n  \"newPassword\": \"NewPassword\",\n  \"expectedStatus\": \"400\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"New password must contain at least one number\\\"}\",\n  \"testDescription\": \"TC9: newPassword không chứa số\",\n  \"responseStatus\": \"200\",\n  \"result\": \"{\\\"message\\\":\\\"Đổi mật khẩu thành công\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 200\"\n}\n \n13:52:44.455 Expected Status: 400 \n13:52:44.455 Expected Result: {\"error\": \"New password must contain at least one number\"} \n13:52:44.455 Actual Status: 200 \n13:52:44.455 Test Status: FAIL \n13:52:44.456 Test case #9 - Status: 200, Test Result: FAIL \n13:52:44.457 Đang chạy test case #10: TC10: newPassword quá dài \n13:52:44.457 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:44.472 karate.env system property was: null \n"},{"result":{"nanos":341300,"startTime":1750661564473,"endTime":1750661564473,"millis":0.3413,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":316700,"startTime":1750661564473,"endTime":1750661564473,"millis":0.3167,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":410200,"startTime":1750661564474,"endTime":1750661564474,"millis":0.4102,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":195800,"startTime":1750661564474,"endTime":1750661564474,"millis":0.1958,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":179400,"startTime":1750661564475,"endTime":1750661564475,"millis":0.1794,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":429500,"startTime":1750661564475,"endTime":1750661564475,"millis":0.4295,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":98000,"startTime":1750661564475,"endTime":1750661564475,"millis":0.098,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":559974400,"startTime":1750661564476,"endTime":1750661565036,"millis":559.9744,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:44.477 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 175\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"NewPassword\",\n  \"newPassword\": \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"\n}\n\n\n13:52:45.035 response time in milliseconds: 558\n1 < 200\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 82\n1 < ETag: W\/\"52-0YNtp8Hc7UFAT0Qtehp\/W8B7RwU\"\n1 < Date: Mon, 23 Jun 2025 06:52:45 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n\n\n"},{"result":{"nanos":231800,"startTime":1750661565035,"endTime":1750661565035,"millis":0.2318,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":114900,"startTime":1750661565036,"endTime":1750661565036,"millis":0.1149,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":1051200,"startTime":1750661565036,"endTime":1750661565037,"millis":1.0512,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:45.037 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":367700,"startTime":1750661565037,"endTime":1750661565037,"millis":0.3677,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:45.037 [print] Request body - oldPassword: NewPassword newPassword: AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA \n"},{"result":{"nanos":772800,"startTime":1750661565037,"endTime":1750661565038,"millis":0.7728,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:45.038 [print] Response status: 200 body: {\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":568.2097,"startTime":1750661564469,"failed":false,"refId":"[1:3]","endTime":1750661565038,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":556.1593,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q","oldPassword":"123456","newPassword":"NewPass' OR '1'='1"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2626400,"startTime":1750661565049,"endTime":1750661565052,"millis":2.6264,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:45.039 ❌ TEST FAILED - Status mismatch: Expected 400, got 200 \n13:52:45.039 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"NewPassword\",\n  \"newPassword\": \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\n  \"expectedStatus\": \"400\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"New password exceeds maximum length\\\"}\",\n  \"testDescription\": \"TC10: newPassword quá dài\",\n  \"responseStatus\": \"400\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Mật khẩu cũ không đúng\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:51.858Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"Status code matches: 400\"\n}\n \n13:52:45.039 Expected Status: 400 \n13:52:45.039 Expected Result: {\"error\": \"New password exceeds maximum length\"} \n13:52:45.039 Actual Status: 200 \n13:52:45.041 Test Status: FAIL \n13:52:45.041 Test case #10 - Status: 200, Test Result: FAIL \n13:52:45.041 Đang chạy test case #11: TC11: Kiểm tra SQL Injection \n13:52:45.041 Sử dụng bearer token từ Excel: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q \n13:52:45.051 karate.env system property was: null \n"},{"result":{"nanos":201600,"startTime":1750661565052,"endTime":1750661565052,"millis":0.2016,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":352300,"startTime":1750661565052,"endTime":1750661565052,"millis":0.3523,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":380900,"startTime":1750661565053,"endTime":1750661565053,"millis":0.3809,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":242100,"startTime":1750661565053,"endTime":1750661565053,"millis":0.2421,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":165600,"startTime":1750661565054,"endTime":1750661565054,"millis":0.1656,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":329500,"startTime":1750661565054,"endTime":1750661565054,"millis":0.3295,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":78700,"startTime":1750661565054,"endTime":1750661565054,"millis":0.0787,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":550460400,"startTime":1750661565054,"endTime":1750661565604,"millis":550.4604,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:45.055 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 59\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"123456\",\n  \"newPassword\": \"NewPass' OR '1'='1\"\n}\n\n\n13:52:45.604 response time in milliseconds: 548\n1 < 200\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 82\n1 < ETag: W\/\"52-0YNtp8Hc7UFAT0Qtehp\/W8B7RwU\"\n1 < Date: Mon, 23 Jun 2025 06:52:45 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n\n\n"},{"result":{"nanos":160900,"startTime":1750661565605,"endTime":1750661565605,"millis":0.1609,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":81100,"startTime":1750661565605,"endTime":1750661565605,"millis":0.0811,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":497000,"startTime":1750661565605,"endTime":1750661565605,"millis":0.497,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:45.605 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q \n"},{"result":{"nanos":240800,"startTime":1750661565605,"endTime":1750661565605,"millis":0.2408,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:45.606 [print] Request body - oldPassword: 123456 newPassword: NewPass' OR '1'='1 \n"},{"result":{"nanos":342000,"startTime":1750661565606,"endTime":1750661565606,"millis":0.342,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:45.606 [print] Response status: 200 body: {\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":556.1593,"startTime":1750661565049,"failed":false,"refId":"[1:3]","endTime":1750661565606,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":688.678,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q","oldPassword":"NewPass' OR '1'='1","newPassword":"<script>alert('xss')<\/script>"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3306600,"startTime":1750661565618,"endTime":1750661565621,"millis":3.3066,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:45.607 ❌ TEST FAILED - Status mismatch: Expected 400, got 200 \n13:52:45.607 Test Case Data: {\n  \"bearerToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q\",\n  \"oldPassword\": \"123456\",\n  \"newPassword\": \"NewPass' OR '1'='1\",\n  \"expectedStatus\": \"400\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n  \"testDescription\": \"TC11: Kiểm tra SQL Injection\",\n  \"responseStatus\": \"200\",\n  \"result\": \"{\\\"message\\\":\\\"Đổi mật khẩu thành công\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 200\"\n}\n \n13:52:45.607 Expected Status: 400 \n13:52:45.608 Expected Result: {\"error\": \"Invalid input\"} \n13:52:45.608 Actual Status: 200 \n13:52:45.608 Test Status: FAIL \n13:52:45.608 Test case #11 - Status: 200, Test Result: FAIL \n13:52:45.609 Đang chạy test case #12: TC12: Kiểm tra XSS \n13:52:45.609 Sử dụng bearer token từ Excel: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q \n13:52:45.620 karate.env system property was: null \n"},{"result":{"nanos":262500,"startTime":1750661565621,"endTime":1750661565621,"millis":0.2625,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":427000,"startTime":1750661565621,"endTime":1750661565621,"millis":0.427,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":371700,"startTime":1750661565622,"endTime":1750661565622,"millis":0.3717,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":179800,"startTime":1750661565623,"endTime":1750661565623,"millis":0.1798,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":177100,"startTime":1750661565623,"endTime":1750661565623,"millis":0.1771,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":319700,"startTime":1750661565623,"endTime":1750661565623,"millis":0.3197,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":96400,"startTime":1750661565623,"endTime":1750661565623,"millis":0.0964,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":682123800,"startTime":1750661565623,"endTime":1750661566305,"millis":682.1238,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:45.625 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 83\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"NewPass' OR '1'='1\",\n  \"newPassword\": \"<script>alert('xss')<\/script>\"\n}\n\n\n13:52:46.305 response time in milliseconds: 680\n1 < 200\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 82\n1 < ETag: W\/\"52-0YNtp8Hc7UFAT0Qtehp\/W8B7RwU\"\n1 < Date: Mon, 23 Jun 2025 06:52:46 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n\n\n"},{"result":{"nanos":239300,"startTime":1750661566305,"endTime":1750661566305,"millis":0.2393,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":144500,"startTime":1750661566306,"endTime":1750661566306,"millis":0.1445,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":475300,"startTime":1750661566306,"endTime":1750661566306,"millis":0.4753,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:46.306 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q \n"},{"result":{"nanos":252600,"startTime":1750661566306,"endTime":1750661566306,"millis":0.2526,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:46.307 [print] Request body - oldPassword: NewPass' OR '1'='1 newPassword: <script>alert('xss')<\/script> \n"},{"result":{"nanos":301700,"startTime":1750661566307,"endTime":1750661566307,"millis":0.3017,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:46.307 [print] Response status: 200 body: {\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":688.678,"startTime":1750661565618,"failed":false,"refId":"[1:3]","endTime":1750661566307,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":46.3667,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"","newPassword":""},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2126000,"startTime":1750661566316,"endTime":1750661566318,"millis":2.126,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:46.308 ❌ TEST FAILED - Status mismatch: Expected 400, got 200 \n13:52:46.308 Test Case Data: {\n  \"bearerToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA3OTAsImV4cCI6MTc1MDY2NDM5MH0.5tETqFyHjn8EOvIfxa1zrtpdTw6utxaDP4UBIsvse8Q\",\n  \"oldPassword\": \"NewPass' OR '1'='1\",\n  \"newPassword\": \"<script>alert('xss')<\/script>\",\n  \"expectedStatus\": \"400\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n  \"testDescription\": \"TC12: Kiểm tra XSS\",\n  \"responseStatus\": \"200\",\n  \"result\": \"{\\\"message\\\":\\\"Đổi mật khẩu thành công\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 200\"\n}\n \n13:52:46.308 Expected Status: 400 \n13:52:46.309 Expected Result: {\"error\": \"Invalid input\"} \n13:52:46.309 Actual Status: 200 \n13:52:46.309 Test Status: FAIL \n13:52:46.309 Test case #12 - Status: 200, Test Result: FAIL \n13:52:46.309 Đang chạy test case #13: TC13: Tất cả các trường rỗng \n13:52:46.309 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:46.317 karate.env system property was: null \n"},{"result":{"nanos":165800,"startTime":1750661566318,"endTime":1750661566318,"millis":0.1658,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":210200,"startTime":1750661566318,"endTime":1750661566318,"millis":0.2102,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":426900,"startTime":1750661566318,"endTime":1750661566318,"millis":0.4269,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":130600,"startTime":1750661566319,"endTime":1750661566319,"millis":0.1306,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":122100,"startTime":1750661566319,"endTime":1750661566319,"millis":0.1221,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":439700,"startTime":1750661566319,"endTime":1750661566319,"millis":0.4397,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":94400,"startTime":1750661566319,"endTime":1750661566319,"millis":0.0944,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":41137200,"startTime":1750661566319,"endTime":1750661566360,"millis":41.1372,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:46.321 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 35\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"\",\n  \"newPassword\": \"\"\n}\n\n\n13:52:46.360 response time in milliseconds: 39\n1 < 400\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 147\n1 < ETag: W\/\"93-oJ5L7g5\/0XQ1tzq5BHOH0nI+tM4\"\n1 < Date: Mon, 23 Jun 2025 06:52:46 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:46.358Z\"\n}\n\n\n"},{"result":{"nanos":185400,"startTime":1750661566361,"endTime":1750661566361,"millis":0.1854,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":94800,"startTime":1750661566361,"endTime":1750661566361,"millis":0.0948,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":495900,"startTime":1750661566361,"endTime":1750661566361,"millis":0.4959,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:46.361 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":361700,"startTime":1750661566362,"endTime":1750661566362,"millis":0.3617,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:46.362 [print] Request body - oldPassword:  newPassword:  \n"},{"result":{"nanos":376000,"startTime":1750661566362,"endTime":1750661566362,"millis":0.376,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:46.363 [print] Response status: 400 body: {\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:46.358Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":46.3667,"startTime":1750661566316,"failed":false,"refId":"[1:3]","endTime":1750661566363,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":51.1354,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":" ","newPassword":" "},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2236000,"startTime":1750661566373,"endTime":1750661566375,"millis":2.236,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:46.364 ✅ TEST PASSED - Status code matches: 400 \n13:52:46.364 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"\",\n  \"newPassword\": \"\",\n  \"expectedStatus\": \"400\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"All fields are required\\\"}\",\n  \"testDescription\": \"TC13: Tất cả các trường rỗng\",\n  \"responseStatus\": \"400\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Dữ liệu không hợp lệ\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:53.005Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"Status code matches: 400\"\n}\n \n13:52:46.364 Expected Status: 400 \n13:52:46.364 Expected Result: {\"error\": \"All fields are required\"} \n13:52:46.364 Actual Status: 400 \n13:52:46.364 Test Status: PASS \n13:52:46.365 Test case #13 - Status: 400, Test Result: PASS \n13:52:46.365 Đang chạy test case #14: TC14: Kiểm tra khoảng trắng \n13:52:46.365 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:46.374 karate.env system property was: null \n"},{"result":{"nanos":208800,"startTime":1750661566375,"endTime":1750661566375,"millis":0.2088,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":226700,"startTime":1750661566375,"endTime":1750661566375,"millis":0.2267,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":270100,"startTime":1750661566376,"endTime":1750661566376,"millis":0.2701,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":117200,"startTime":1750661566376,"endTime":1750661566376,"millis":0.1172,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":102600,"startTime":1750661566376,"endTime":1750661566376,"millis":0.1026,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":230800,"startTime":1750661566376,"endTime":1750661566376,"millis":0.2308,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":55900,"startTime":1750661566376,"endTime":1750661566376,"millis":0.0559,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":45064500,"startTime":1750661566377,"endTime":1750661566422,"millis":45.0645,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:46.378 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 37\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \" \",\n  \"newPassword\": \" \"\n}\n\n\n13:52:46.420 response time in milliseconds: 41\n1 < 400\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 147\n1 < ETag: W\/\"93-VVYLYtStzwQAPcMK79Cr2FMWA3E\"\n1 < Date: Mon, 23 Jun 2025 06:52:46 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:46.418Z\"\n}\n\n\n"},{"result":{"nanos":525200,"startTime":1750661566422,"endTime":1750661566423,"millis":0.5252,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":186900,"startTime":1750661566423,"endTime":1750661566423,"millis":0.1869,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":963700,"startTime":1750661566423,"endTime":1750661566424,"millis":0.9637,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:46.423 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":504500,"startTime":1750661566424,"endTime":1750661566425,"millis":0.5045,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:46.424 [print] Request body - oldPassword:   newPassword:   \n"},{"result":{"nanos":442500,"startTime":1750661566424,"endTime":1750661566424,"millis":0.4425,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:46.425 [print] Response status: 400 body: {\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:46.418Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":51.1354,"startTime":1750661566373,"failed":false,"refId":"[1:3]","endTime":1750661566425,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":437.2151,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","newPassword":"NewPass😊456"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3069500,"startTime":1750661566435,"endTime":1750661566438,"millis":3.0695,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:46.426 ✅ TEST PASSED - Status code matches: 400 \n13:52:46.426 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \" \",\n  \"newPassword\": \" \",\n  \"expectedStatus\": \"400\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"Fields cannot contain only whitespace\\\"}\",\n  \"testDescription\": \"TC14: Kiểm tra khoảng trắng\",\n  \"responseStatus\": \"400\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Dữ liệu không hợp lệ\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:53.070Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"Status code matches: 400\"\n}\n \n13:52:46.426 Expected Status: 400 \n13:52:46.427 Expected Result: {\"error\": \"Fields cannot contain only whitespace\"} \n13:52:46.427 Actual Status: 400 \n13:52:46.427 Test Status: PASS \n13:52:46.427 Test case #14 - Status: 400, Test Result: PASS \n13:52:46.428 Đang chạy test case #15: TC15: Kiểm tra ký tự Unicode \n13:52:46.428 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:46.437 karate.env system property was: null \n"},{"result":{"nanos":719100,"startTime":1750661566438,"endTime":1750661566439,"millis":0.7191,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":333500,"startTime":1750661566440,"endTime":1750661566440,"millis":0.3335,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":342100,"startTime":1750661566440,"endTime":1750661566440,"millis":0.3421,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":261100,"startTime":1750661566440,"endTime":1750661566440,"millis":0.2611,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":159700,"startTime":1750661566440,"endTime":1750661566440,"millis":0.1597,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":369300,"startTime":1750661566441,"endTime":1750661566441,"millis":0.3693,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":115400,"startTime":1750661566441,"endTime":1750661566441,"millis":0.1154,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":427097300,"startTime":1750661566442,"endTime":1750661566869,"millis":427.0973,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:46.443 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 178\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\n  \"newPassword\": \"NewPass😊456\"\n}\n\n\n13:52:46.868 response time in milliseconds: 425\n1 < 200\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 82\n1 < ETag: W\/\"52-0YNtp8Hc7UFAT0Qtehp\/W8B7RwU\"\n1 < Date: Mon, 23 Jun 2025 06:52:46 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n\n\n"},{"result":{"nanos":244500,"startTime":1750661566869,"endTime":1750661566869,"millis":0.2445,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":139800,"startTime":1750661566869,"endTime":1750661566869,"millis":0.1398,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":1712900,"startTime":1750661566869,"endTime":1750661566871,"millis":1.7129,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:46.871 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":1352000,"startTime":1750661566871,"endTime":1750661566872,"millis":1.352,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:46.872 [print] Request body - oldPassword: AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA newPassword: NewPass😊456 \n"},{"result":{"nanos":1298900,"startTime":1750661566872,"endTime":1750661566873,"millis":1.2989,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:46.873 [print] Response status: 200 body: {\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":437.2151,"startTime":1750661566435,"failed":false,"refId":"[1:3]","endTime":1750661566873,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":611.0778,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"NewPass😊456","newPassword":"NewPass456"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":6974300,"startTime":1750661566882,"endTime":1750661566889,"millis":6.9743,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:46.875 ✅ TEST PASSED - Status code matches: 200 \n13:52:46.875 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\n  \"newPassword\": \"NewPass😊456\",\n  \"expectedStatus\": \"200\",\n  \"expectedResult\": \"{\\\"message\\\": \\\"Password changed successfully\\\"}\",\n  \"testDescription\": \"TC15: Kiểm tra ký tự Unicode\",\n  \"responseStatus\": \"400\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Mật khẩu cũ không đúng\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:53.255Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 200, got 400\"\n}\n \n13:52:46.875 Expected Status: 200 \n13:52:46.875 Expected Result: {\"message\": \"Password changed successfully\"} \n13:52:46.875 Actual Status: 200 \n13:52:46.875 Test Status: PASS \n13:52:46.875 Test case #15 - Status: 200, Test Result: PASS \n13:52:46.876 Đang chạy test case #16: TC16: Kiểm tra độ trễ phản hồi (stress test) \n13:52:46.876 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:46.888 karate.env system property was: null \n"},{"result":{"nanos":791900,"startTime":1750661566889,"endTime":1750661566890,"millis":0.7919,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":1701200,"startTime":1750661566890,"endTime":1750661566892,"millis":1.7012,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":757900,"startTime":1750661566892,"endTime":1750661566893,"millis":0.7579,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":516400,"startTime":1750661566892,"endTime":1750661566893,"millis":0.5164,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":412900,"startTime":1750661566893,"endTime":1750661566893,"millis":0.4129,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":696500,"startTime":1750661566893,"endTime":1750661566894,"millis":0.6965,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":312800,"startTime":1750661566895,"endTime":1750661566895,"millis":0.3128,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":597678600,"startTime":1750661566895,"endTime":1750661567493,"millis":597.6786,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:46.897 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 59\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"NewPass😊456\",\n  \"newPassword\": \"NewPass456\"\n}\n\n\n13:52:47.492 response time in milliseconds: 595\n1 < 200\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 82\n1 < ETag: W\/\"52-0YNtp8Hc7UFAT0Qtehp\/W8B7RwU\"\n1 < Date: Mon, 23 Jun 2025 06:52:47 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n\n\n"},{"result":{"nanos":130200,"startTime":1750661567492,"endTime":1750661567492,"millis":0.1302,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":114100,"startTime":1750661567493,"endTime":1750661567493,"millis":0.1141,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":438600,"startTime":1750661567493,"endTime":1750661567493,"millis":0.4386,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:47.493 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":263900,"startTime":1750661567493,"endTime":1750661567493,"millis":0.2639,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:47.493 [print] Request body - oldPassword: NewPass😊456 newPassword: NewPass456 \n"},{"result":{"nanos":288500,"startTime":1750661567493,"endTime":1750661567493,"millis":0.2885,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:47.494 [print] Response status: 200 body: {\n  \"message\": \"Đổi mật khẩu thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":611.0778,"startTime":1750661566882,"failed":false,"refId":"[1:3]","endTime":1750661567494,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":45.9841,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"NULL_VALUE","newPassword":"NULL_VALUE"},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2883800,"startTime":1750661567504,"endTime":1750661567507,"millis":2.8838,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:47.495 ✅ TEST PASSED - Status code matches: 200 \n13:52:47.495 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"NewPass😊456\",\n  \"newPassword\": \"NewPass456\",\n  \"expectedStatus\": \"200\",\n  \"expectedResult\": \"{\\\"message\\\": \\\"Password changed successfully\\\"}\",\n  \"testDescription\": \"TC16: Kiểm tra độ trễ phản hồi (stress test)\",\n  \"responseStatus\": \"400\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Mật khẩu cũ không đúng\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:53.432Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 200, got 400\"\n}\n \n13:52:47.495 Expected Status: 200 \n13:52:47.495 Expected Result: {\"message\": \"Password changed successfully\"} \n13:52:47.495 Actual Status: 200 \n13:52:47.495 Test Status: PASS \n13:52:47.495 Test case #16 - Status: 200, Test Result: PASS \n13:52:47.497 Đang chạy test case #17: TC18: Kiểm tra trường null \n13:52:47.497 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:47.505 karate.env system property was: null \n"},{"result":{"nanos":290800,"startTime":1750661567506,"endTime":1750661567506,"millis":0.2908,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":407900,"startTime":1750661567507,"endTime":1750661567507,"millis":0.4079,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":365400,"startTime":1750661567507,"endTime":1750661567507,"millis":0.3654,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":198800,"startTime":1750661567508,"endTime":1750661567508,"millis":0.1988,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":178700,"startTime":1750661567508,"endTime":1750661567508,"millis":0.1787,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":459700,"startTime":1750661567508,"endTime":1750661567508,"millis":0.4597,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":119700,"startTime":1750661567509,"endTime":1750661567509,"millis":0.1197,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":39745600,"startTime":1750661567509,"endTime":1750661567549,"millis":39.7456,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:47.511 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": null,\n  \"newPassword\": null\n}\n\n\n13:52:47.549 response time in milliseconds: 37\n1 < 400\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 147\n1 < ETag: W\/\"93-DZZjgWqTqWkGQWqtSTMBpgyti\/0\"\n1 < Date: Mon, 23 Jun 2025 06:52:47 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:47.547Z\"\n}\n\n\n"},{"result":{"nanos":131200,"startTime":1750661567549,"endTime":1750661567549,"millis":0.1312,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":74000,"startTime":1750661567549,"endTime":1750661567549,"millis":0.074,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":409700,"startTime":1750661567550,"endTime":1750661567550,"millis":0.4097,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:47.550 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":342300,"startTime":1750661567550,"endTime":1750661567550,"millis":0.3423,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:47.550 [print] Request body - oldPassword: null newPassword: null \n"},{"result":{"nanos":376500,"startTime":1750661567550,"endTime":1750661567550,"millis":0.3765,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:47.550 [print] Response status: 400 body: {\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:47.547Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":45.9841,"startTime":1750661567503,"failed":false,"refId":"[1:3]","endTime":1750661567550,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/change-password-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":53.7782,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM","oldPassword":"","newPassword":""},"failedCount":0,"packageQualifiedName":"features.helpers.change-password-single-call","relativePath":"features\/helpers\/change-password-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3740800,"startTime":1750661567563,"endTime":1750661567567,"millis":3.7408,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"13:52:47.552 ✅ TEST PASSED - Status code matches: 400 \n13:52:47.552 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"oldPassword\": \"NULL_VALUE\",\n  \"newPassword\": \"NULL_VALUE\",\n  \"expectedStatus\": \"400\",\n  \"expectedResult\": \"{\\\"error\\\": \\\"Fields cannot be null\\\"}\",\n  \"testDescription\": \"TC18: Kiểm tra trường null\",\n  \"responseStatus\": \"400\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":400,\\\"message\\\":\\\"Dữ liệu không hợp lệ\\\",\\\"path\\\":\\\"\/users\/change-password\\\",\\\"timestamp\\\":\\\"2025-06-23T06:47:53.665Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"Status code matches: 400\"\n}\n \n13:52:47.552 Expected Status: 400 \n13:52:47.552 Expected Result: {\"error\": \"Fields cannot be null\"} \n13:52:47.553 Actual Status: 400 \n13:52:47.553 Test Status: PASS \n13:52:47.553 Test case #17 - Status: 400, Test Result: PASS \n13:52:47.554 Đang chạy test case #18:  \n13:52:47.554 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n13:52:47.565 karate.env system property was: null \n"},{"result":{"nanos":285600,"startTime":1750661567566,"endTime":1750661567566,"millis":0.2856,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/users\/change-password'"}},{"result":{"nanos":232900,"startTime":1750661567567,"endTime":1750661567567,"millis":0.2329,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":312900,"startTime":1750661567567,"endTime":1750661567567,"millis":0.3129,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":122500,"startTime":1750661567567,"endTime":1750661567567,"millis":0.1225,"status":"passed"},"step":{"comments":["# Xử lý request body với null values"],"line":12,"prefix":"*","index":4,"text":"def oldPwd = oldPassword === 'NULL_VALUE' ? null : oldPassword"}},{"result":{"nanos":96300,"startTime":1750661567568,"endTime":1750661567568,"millis":0.0963,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"def newPwd = newPassword === 'NULL_VALUE' ? null : newPassword"}},{"result":{"nanos":238900,"startTime":1750661567568,"endTime":1750661567568,"millis":0.2389,"status":"passed"},"step":{"line":14,"prefix":"*","index":6,"text":"def requestBody = { oldPassword: '#(oldPwd)', newPassword: '#(newPwd)' }"}},{"result":{"nanos":53600,"startTime":1750661567568,"endTime":1750661567568,"millis":0.0536,"status":"passed"},"step":{"line":15,"prefix":"And","index":7,"text":"request requestBody"}},{"result":{"nanos":47433400,"startTime":1750661567568,"endTime":1750661567615,"millis":47.4334,"status":"passed"},"step":{"line":16,"prefix":"When","index":8,"text":"method PATCH"},"stepLog":"13:52:47.569 request:\n1 > PATCH http:\/\/localhost:3000\/users\/change-password\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 35\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"oldPassword\": \"\",\n  \"newPassword\": \"\"\n}\n\n\n13:52:47.615 response time in milliseconds: 45\n1 < 400\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 147\n1 < ETag: W\/\"93-MR+4KplySgofNCe5h4O01hsrJck\"\n1 < Date: Mon, 23 Jun 2025 06:52:47 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:47.613Z\"\n}\n\n\n"},{"result":{"nanos":201500,"startTime":1750661567616,"endTime":1750661567616,"millis":0.2015,"status":"passed"},"step":{"line":17,"prefix":"Then","index":9,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":108200,"startTime":1750661567616,"endTime":1750661567616,"millis":0.1082,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"def actualResponse = response"}},{"result":{"nanos":445700,"startTime":1750661567616,"endTime":1750661567616,"millis":0.4457,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Calling change password API với bearerToken:', bearerToken"},"stepLog":"13:52:47.617 [print] Calling change password API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MjZkMTIwYy1jMjM3LTQ1MTQtYWU5YS1lZDdhNjMwMzRjN2UiLCJ1c2VybmFtZSI6InVzZXJubzEiLCJyb2xlIjowLCJpYXQiOjE3NTA2NjA5OTQsImV4cCI6MTc1MDY2NDU5NH0.xaeWWmzAkIxGN9LS5uqyUPzKSJ7zj_R8Rki61m1WBhM \n"},{"result":{"nanos":224500,"startTime":1750661567617,"endTime":1750661567617,"millis":0.2245,"status":"passed"},"step":{"line":20,"prefix":"And","index":12,"text":"print 'Request body - oldPassword:', oldPwd, 'newPassword:', newPwd"},"stepLog":"13:52:47.617 [print] Request body - oldPassword:  newPassword:  \n"},{"result":{"nanos":281400,"startTime":1750661567617,"endTime":1750661567617,"millis":0.2814,"status":"passed"},"step":{"line":21,"prefix":"And","index":13,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"13:52:47.617 [print] Response status: 400 body: {\n  \"success\": false,\n  \"statusCode\": 400,\n  \"message\": \"Dữ liệu không hợp lệ\",\n  \"path\": \"\/users\/change-password\",\n  \"timestamp\": \"2025-06-23T06:52:47.613Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API change password với bearer token","description":"","durationMillis":53.7782,"startTime":1750661567562,"failed":false,"refId":"[1:3]","endTime":1750661567617,"exampleIndex":-1}],"name":"Change Password Single Call Helper - Thực hiện API call đổi mật khẩu với bearer token","passedCount":1}]},{"result":{"nanos":519300,"startTime":1750661567621,"endTime":1750661567622,"millis":0.5193,"status":"passed"},"step":{"line":108,"prefix":"*","index":4,"text":"def testResults = results"}},{"result":{"nanos":474800,"startTime":1750661567622,"endTime":1750661567622,"millis":0.4748,"status":"passed"},"step":{"comments":["# Đếm số test cases pass\/fail"],"line":111,"prefix":"*","index":5,"text":"def passedTests = []"}},{"result":{"nanos":229700,"startTime":1750661567622,"endTime":1750661567622,"millis":0.2297,"status":"passed"},"step":{"line":112,"prefix":"*","index":6,"text":"def failedTests = []"}},{"result":{"nanos":12364200,"startTime":1750661567623,"endTime":1750661567635,"millis":12.3642,"status":"passed"},"step":{"line":113,"prefix":"*","index":7,"text":"karate.forEach(testResults, function(test) { if (test.testStatus === 'PASS') passedTests.push(test); else failedTests.push(test); })"}},{"result":{"nanos":1453600,"startTime":1750661567635,"endTime":1750661567636,"millis":1.4536,"status":"passed"},"step":{"line":115,"prefix":"*","index":8,"text":"print '=== CHANGE PASSWORD TEST SUMMARY ==='"},"stepLog":"13:52:47.636 [print] === CHANGE PASSWORD TEST SUMMARY === \n"},{"result":{"nanos":1547800,"startTime":1750661567636,"endTime":1750661567638,"millis":1.5478,"status":"passed"},"step":{"line":116,"prefix":"*","index":9,"text":"print 'Total test cases: ' + testResults.length"},"stepLog":"13:52:47.638 [print] Total test cases: 18 \n"},{"result":{"nanos":1581800,"startTime":1750661567638,"endTime":1750661567640,"millis":1.5818,"status":"passed"},"step":{"line":117,"prefix":"*","index":10,"text":"print 'Passed: ' + passedTests.length"},"stepLog":"13:52:47.640 [print] Passed: 11 \n"},{"result":{"nanos":1636400,"startTime":1750661567640,"endTime":1750661567642,"millis":1.6364,"status":"passed"},"step":{"line":118,"prefix":"*","index":11,"text":"print 'Failed: ' + failedTests.length"},"stepLog":"13:52:47.642 [print] Failed: 7 \n"},{"result":{"nanos":27467900,"startTime":1750661567642,"endTime":1750661567669,"millis":27.4679,"status":"passed"},"step":{"line":119,"prefix":"*","index":12,"text":"if (testResults.length > 0) print ('Success rate: ' + Math.round((passedTests.length \/ testResults.length) * 100) + '%')"}},{"result":{"nanos":6479300,"startTime":1750661567669,"endTime":1750661567675,"millis":6.4793,"status":"passed"},"step":{"comments":["# Log failed tests"],"line":122,"prefix":"*","index":13,"text":"if (failedTests.length > 0) karate.forEach(failedTests, function(test, index) { karate.log('❌ Failed test #' + (index + 1) + ': ' + test.failureReason); })"},"stepLog":"13:52:47.674 ❌ Failed test #1: Status mismatch: Expected 401, got 400 \n13:52:47.674 ❌ Failed test #2: Status mismatch: Expected 400, got 200 \n13:52:47.675 ❌ Failed test #3: Status mismatch: Expected 400, got 200 \n13:52:47.675 ❌ Failed test #4: Status mismatch: Expected 400, got 200 \n13:52:47.675 ❌ Failed test #5: Status mismatch: Expected 400, got 200 \n13:52:47.675 ❌ Failed test #6: Status mismatch: Expected 400, got 200 \n13:52:47.676 ❌ Failed test #7: Status mismatch: Expected , got 400 \n"},{"result":{"nanos":1332700,"startTime":1750661567676,"endTime":1750661567677,"millis":1.3327,"status":"passed"},"step":{"line":124,"prefix":"*","index":14,"text":"print 'Hoàn thành tất cả test cases change password. Đang ghi kết quả vào Excel...'"},"stepLog":"13:52:47.677 [print] Hoàn thành tất cả test cases change password. Đang ghi kết quả vào Excel... \n"},{"result":{"nanos":455714300,"startTime":1750661567677,"endTime":1750661568133,"millis":455.7143,"status":"passed"},"step":{"comments":["# Ghi kết quả vào Excel"],"line":127,"prefix":"*","index":15,"text":"def writeSuccess = writeToExcel(excelFilePath, sheetName, testResults)"}},{"result":{"nanos":1200500,"startTime":1750661568133,"endTime":1750661568134,"millis":1.2005,"status":"passed"},"step":{"line":128,"prefix":"*","index":16,"text":"if (writeSuccess) karate.log('✅ Đã ghi kết quả change password vào Excel thành công!')"},"stepLog":"13:52:48.134 ✅ Đã ghi kết quả change password vào Excel thành công! \n"},{"result":{"nanos":592100,"startTime":1750661568134,"endTime":1750661568135,"millis":0.5921,"status":"passed"},"step":{"line":129,"prefix":"*","index":17,"text":"if (!writeSuccess) karate.log('❌ Lỗi khi ghi kết quả change password vào Excel!')"}},{"result":{"nanos":1383200,"startTime":1750661568134,"endTime":1750661568135,"millis":1.3832,"status":"passed"},"step":{"comments":["# Warning nếu có test cases failed"],"line":132,"prefix":"*","index":18,"text":"if (failedTests.length > 0) karate.log('⚠️ WARNING: ' + failedTests.length + ' out of ' + testResults.length + ' test cases failed')"},"stepLog":"13:52:48.136 ⚠️ WARNING: 7 out of 18 test cases failed \n"}],"executorName":"main","line":16,"name":"Chạy tất cả test cases change password từ Excel","description":"","durationMillis":7604.7715,"startTime":1750661560347,"failed":false,"refId":"[1:16]","endTime":1750661568136,"exampleIndex":-1}],"callDepth":0,"name":"Change Password Testing từ Excel - Sheet changePassword","description":"","resultDate":"2025-06-23 01:52:48 PM","durationMillis":7604.7715,"passedCount":1}