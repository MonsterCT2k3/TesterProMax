{"failedCount":0,"prefixedPath":"classpath:features\/follows\/unfollow-excel.feature","packageQualifiedName":"features.follows.unfollow-excel","loopIndex":-1,"relativePath":"features\/follows\/unfollow-excel.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1090300,"startTime":1750766800498,"endTime":1750766800499,"millis":1.0903,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"},"stepLog":"19:06:40.464 karate.env system property was: null \n"},{"result":{"nanos":8408200,"startTime":1750766800503,"endTime":1750766800511,"millis":8.4082,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:40.507 karate.env system property was: null \n"},{"result":{"nanos":38334000,"startTime":1750766800511,"endTime":1750766800549,"millis":38.334,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def readExcel = read('classpath:utils\/read-excel.js')"}},{"result":{"nanos":21268700,"startTime":1750766800550,"endTime":1750766800571,"millis":21.2687,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def writeToExcel = read('classpath:utils\/write-excel.js')"}},{"result":{"nanos":735000,"startTime":1750766800571,"endTime":1750766800572,"millis":0.735,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def excelFilePath = 'src\/test\/java\/data\/data.xlsx'"}},{"result":{"nanos":799500,"startTime":1750766800572,"endTime":1750766800573,"millis":0.7995,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def sheetName = 'unfollow'"}},{"result":{"nanos":954480400,"startTime":1750766800574,"endTime":1750766801528,"millis":954.4804,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def testData = readExcel(excelFilePath, sheetName)"},"stepLog":"19:06:41.435 Headers found: [\n  \"bearerToken\",\n  \"followingId\",\n  \"testDescription\",\n  \"expectedStatus\",\n  \"expectedResult\",\n  \"responseStatus\",\n  \"result\",\n  \"testStatus\",\n  \"failureReason\"\n]\n \n19:06:41.518 Read data from Excel: [\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"58ca226b-5a4c-41f5-b3f5-ec3723d14ca3\",\n    \"testDescription\": \"Unfollow hợp lệ\",\n    \"expectedStatus\": 200.0,\n    \"expectedResult\": \"{\\\"message\\\": \\\"Hủy theo dõi thành công\\\"}\",\n    \"responseStatus\": \"500\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.236Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 200, got 500\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"\",\n    \"testDescription\": \"followingId rỗng\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"followingId cannot be empty\\\"}\",\n    \"responseStatus\": \"404\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Cannot DELETE \/follows\/\\\",\\\"path\\\":\\\"\/follows\/\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.371Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n  },\n  {\n    \"bearerToken\": \"NO_TOKEN\",\n    \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n    \"testDescription\": \"Thiếu token xác thực\",\n    \"expectedStatus\": 401.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.423Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"INVALID_TOKEN\",\n    \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n    \"testDescription\": \"Token không hợp lệ\",\n    \"expectedStatus\": 401.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid or expired token\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.451Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"nonexistent123\",\n    \"testDescription\": \"followingId không tồn tại\",\n    \"expectedStatus\": 404.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"User not found\\\"}\",\n    \"responseStatus\": 500.0,\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/nonexistent123\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.542Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 404, got 500\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"testDescription\": \"Unfollow chính mình\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Cannot unfollow yourself\\\"}\",\n    \"responseStatus\": \"500\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/08515b05-2d3e-4789-ad60-db35525a4970\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.649Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"650ce1ed-aaca-438f-9988-1f058ab5aa1a\",\n    \"testDescription\": \"Chưa follow trước đó\",\n    \"expectedStatus\": 404.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"You are not following this user\\\"}\",\n    \"responseStatus\": \"500\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.742Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 404, got 500\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"invalid_id!@#\",\n    \"testDescription\": \"followingId không hợp lệ\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid followingId format\\\"}\",\n    \"responseStatus\": \"500\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/invalid_id!@\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.828Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"user123' OR '1'='1\",\n    \"testDescription\": \"Kiểm tra SQL Injection\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n    \"responseStatus\": \"ERROR\",\n    \"result\": \"Exception: java.net.URISyntaxException: Illegal character in path at index 38: http:\/\/localhost:3000\/follows\/user123' OR '1'='1\\nclasspath:features\/helpers\/unfollow-single-call.feature:11\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Exception: java.net.URISyntaxException: Illegal character in path at index 38: http:\/\/localhost:3000\/follows\/user123' OR '1'='1\\nclasspath:features\/helpers\/unfollow-single-call.feature:11\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"<script>alert(\\\"xss\\\")<\/script>\",\n    \"testDescription\": \"Kiểm tra XSS\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n    \"responseStatus\": \"ERROR\",\n    \"result\": \"Exception: java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/<script>alert(\\\"xss\\\")<\/script>\\nclasspath:features\/helpers\/unfollow-single-call.feature:11\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Exception: java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/<script>alert(\\\"xss\\\")<\/script>\\nclasspath:features\/helpers\/unfollow-single-call.feature:11\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \" \",\n    \"testDescription\": \"Kiểm tra khoảng trắng\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"followingId cannot contain only whitespace\\\"}\",\n    \"responseStatus\": \"ERROR\",\n    \"result\": \"Exception: java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/ \\nclasspath:features\/helpers\/unfollow-single-call.feature:11\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Exception: java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/ \\nclasspath:features\/helpers\/unfollow-single-call.feature:11\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"user😊123\",\n    \"testDescription\": \"Kiểm tra ký tự Unicode\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid followingId format\\\"}\",\n    \"responseStatus\": \"500\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/user%F0%9F%98%8A123\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.969Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"NULL_VALUE\",\n    \"testDescription\": \"Kiểm tra trường null\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"followingId cannot be null\\\"}\",\n    \"responseStatus\": \"500\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/NULL_VALUE\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:20.052Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"followingId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n    \"testDescription\": \"Kiểm tra độ dài followingId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"followingId exceeds maximum length\\\"}\",\n    \"responseStatus\": \"500\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:20.141Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n  }\n]\n \n"},{"result":{"nanos":9411100,"startTime":1750766801528,"endTime":1750766801537,"millis":9.4111,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"print 'Đọc được ' + testData.length + ' test cases từ Excel sheet: ' + sheetName"},"stepLog":"19:06:41.537 [print] Đọc được 14 test cases từ Excel sheet: unfollow \n"},{"result":{"nanos":20427800,"startTime":1750766801537,"endTime":1750766801557,"millis":20.4278,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def testResults = []"}},{"result":{"nanos":1583300,"startTime":1750766801557,"endTime":1750766801559,"millis":1.5833,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def globalBearerToken = config.bearerToken"}},{"result":{"nanos":1245800,"startTime":1750766801560,"endTime":1750766801561,"millis":1.2458,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"print 'Sử dụng global bearer token từ config:', globalBearerToken"},"stepLog":"19:06:41.561 [print] Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n"},{"result":{"nanos":2243200,"startTime":1750766801561,"endTime":1750766801563,"millis":2.2432,"status":"passed"},"step":{"endLine":35,"line":17,"prefix":"*","docString":"function(testCase, actualStatus, actualResponse) {\n  var expectedStatus = testCase.expectedStatus;\n        \n  \/\/ Kiểm tra Status Code (Bắt buộc)\n  if (actualStatus != expectedStatus) {\n    return {\n      status: 'FAIL',\n      reason: 'Status mismatch: Expected ' + expectedStatus + ', got ' + actualStatus\n    };\n  }\n        \n  return {\n    status: 'PASS',\n    reason: 'All validations passed'\n  };\n}","index":0,"text":"def evaluateTestCase ="}},{"result":{"nanos":8139200,"startTime":1750766801564,"endTime":1750766801572,"millis":8.1392,"status":"passed"},"step":{"endLine":118,"line":37,"prefix":"*","docString":"function(testCase, index) {\n  karate.log('Đang chạy test case #' + (index + 1) + ': ' + testCase.testDescription);\n        \n  var bearerToken = '';\n        \n  \/\/ Sử dụng bearer token từ test case hoặc global config\n  if (testCase.bearerToken && testCase.bearerToken.trim() !== '') {\n    if (testCase.bearerToken === 'NO_TOKEN') {\n      \/\/ TC4: Không có token\n      bearerToken = '';\n      karate.log('Test case không sử dụng token');\n    } else if (testCase.bearerToken === 'INVALID_TOKEN') {\n      \/\/ TC5: Token không hợp lệ\n      bearerToken = 'invalid_token_123';\n      karate.log('Test case sử dụng token không hợp lệ');\n    } else {\n      \/\/ Sử dụng token từ Excel nếu có\n      bearerToken = testCase.bearerToken;\n      karate.log('Sử dụng bearer token từ Excel:', bearerToken);\n    }\n  } else {\n    \/\/ Sử dụng global token từ config\n    bearerToken = globalBearerToken;\n    karate.log('Sử dụng global bearer token từ config:', bearerToken);\n  }\n        \n  try {\n    \/\/ Gọi API unfollow\n    var response = karate.call('classpath:features\/helpers\/unfollow-single-call.feature', {\n      bearerToken: bearerToken,\n      followingId: testCase.followingId || ''\n    });\n          \n    var actualStatus = response.actualStatus;\n    var actualResult = '';\n          \n    \/\/ Ghi response thực tế vào result\n    if (response.actualResponse) {\n      actualResult = JSON.stringify(response.actualResponse);\n    } else {\n      actualResult = 'No response body';\n    }\n          \n    \/\/ ===== ĐÁNH GIÁ PASS\/FAIL =====\n    var testEvaluation = evaluateTestCase(testCase, actualStatus, response.actualResponse);\n          \n    \/\/ Log kết quả đánh giá\n    if (testEvaluation.status === 'FAIL') {\n      karate.log('❌ TEST FAILED - ' + testEvaluation.reason);\n    } else {\n      karate.log('✅ TEST PASSED - ' + testEvaluation.reason);\n    }\n          \n    \/\/ Log chi tiết để debug\n    karate.log('Test Case Data:', testCase);\n    karate.log('Expected Status:', testCase.expectedStatus);\n    karate.log('Expected Result:', testCase.expectedResult);\n    karate.log('Actual Status:', actualStatus);\n    karate.log('Test Status:', testEvaluation.status);\n          \n    karate.log('Test case #' + (index + 1) + ' - Status: ' + actualStatus + ', Test Result: ' + testEvaluation.status);\n          \n    return {\n      responseStatus: actualStatus,\n      result: actualResult,\n      testStatus: testEvaluation.status,\n      failureReason: testEvaluation.reason\n    };\n  } catch (e) {\n    \/\/ Xử lý lỗi (ví dụ URISyntaxException cho SQL injection test)\n    karate.log('Test case #' + (index + 1) + ' gặp lỗi:', e.message);\n    return {\n      responseStatus: 'ERROR',\n      result: 'Exception: ' + e.message,\n      testStatus: 'FAIL',\n      failureReason: 'Exception: ' + e.message\n    };\n  }\n}","index":1,"text":"def runTest ="}},{"result":{"nanos":953600,"startTime":1750766801571,"endTime":1750766801572,"millis":0.9536,"status":"passed"},"step":{"line":120,"prefix":"*","index":2,"text":"print 'Bắt đầu chạy từng test case...'"},"stepLog":"19:06:41.572 [print] Bắt đầu chạy từng test case... \n"},{"result":{"nanos":1297678900,"startTime":1750766801572,"endTime":1750766802870,"millis":1297.6789,"status":"passed"},"step":{"line":121,"prefix":"*","index":3,"text":"def results = karate.map(testData, runTest)"},"stepLog":"19:06:42.870 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 \n19:06:42.870 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n  \"testDescription\": \"Kiểm tra độ dài followingId\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"followingId exceeds maximum length\\\"}\",\n  \"responseStatus\": \"500\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:20.141Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n}\n \n19:06:42.870 Expected Status: 400.0 \n19:06:42.870 Expected Result: {\"error\": \"followingId exceeds maximum length\"} \n19:06:42.870 Actual Status: 500 \n19:06:42.870 Test Status: FAIL \n19:06:42.870 Test case #14 - Status: 500, Test Result: FAIL \n","callResults":[{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":431.8557,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":"58ca226b-5a4c-41f5-b3f5-ec3723d14ca3"},"failedCount":0,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":5352000,"startTime":1750766801595,"endTime":1750766801600,"millis":5.352,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:41.576 Đang chạy test case #1: Unfollow hợp lệ \n19:06:41.576 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:41.599 karate.env system property was: null \n"},{"result":{"nanos":781000,"startTime":1750766801601,"endTime":1750766801602,"millis":0.781,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":866100,"startTime":1750766801602,"endTime":1750766801603,"millis":0.8661,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":308000,"startTime":1750766801603,"endTime":1750766801603,"millis":0.308,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":6560000,"startTime":1750766801603,"endTime":1750766801610,"millis":6.56,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":2784500,"startTime":1750766801610,"endTime":1750766801613,"millis":2.7845,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":410722400,"startTime":1750766801613,"endTime":1750766802024,"millis":410.7224,"status":"passed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:41.900 request:\n1 > DELETE http:\/\/localhost:3000\/follows\/58ca226b-5a4c-41f5-b3f5-ec3723d14ca3\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:06:42.022 response time in milliseconds: 119\n1 < 200\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 301\n1 < ETag: W\/\"12d-w2BpZwFR47uWKnvFeHz13tWDc1o\"\n1 < Date: Tue, 24 Jun 2025 12:06:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Huỷ theo dõi thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"5f578cf5-c25b-4b44-a4ae-c058c053d1c0\",\n    \"followerId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"followingId\": \"58ca226b-5a4c-41f5-b3f5-ec3723d14ca3\",\n    \"followStatus\": \"accepted\",\n    \"createdAt\": \"2025-06-24T12:05:49.909Z\"\n  }\n}\n\n\n"},{"result":{"nanos":441000,"startTime":1750766802023,"endTime":1750766802023,"millis":0.441,"status":"passed"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":369300,"startTime":1750766802023,"endTime":1750766802023,"millis":0.3693,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":1093900,"startTime":1750766802024,"endTime":1750766802025,"millis":1.0939,"status":"passed"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"},"stepLog":"19:06:42.026 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n"},{"result":{"nanos":716000,"startTime":1750766802026,"endTime":1750766802027,"millis":0.716,"status":"passed"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"},"stepLog":"19:06:42.027 [print] Following ID: 58ca226b-5a4c-41f5-b3f5-ec3723d14ca3 \n"},{"result":{"nanos":631000,"startTime":1750766802027,"endTime":1750766802028,"millis":0.631,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"},"stepLog":"19:06:42.027 [print] Final URL: http:\/\/localhost:3000\/follows\/58ca226b-5a4c-41f5-b3f5-ec3723d14ca3 \n"},{"result":{"nanos":1230500,"startTime":1750766802027,"endTime":1750766802028,"millis":1.2305,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"19:06:42.028 [print] Response status: 200 body: {\n  \"message\": \"Huỷ theo dõi thành công\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"5f578cf5-c25b-4b44-a4ae-c058c053d1c0\",\n    \"followerId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"followingId\": \"58ca226b-5a4c-41f5-b3f5-ec3723d14ca3\",\n    \"followStatus\": \"accepted\",\n    \"createdAt\": \"2025-06-24T12:05:49.909Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unfollow với bearer token và followingId","description":"","durationMillis":431.8557,"startTime":1750766801595,"failed":false,"refId":"[1:3]","endTime":1750766802028,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":23.0969,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":""},"failedCount":0,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":4022100,"startTime":1750766802062,"endTime":1750766802066,"millis":4.0221,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.044 ✅ TEST PASSED - All validations passed \n19:06:42.045 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"58ca226b-5a4c-41f5-b3f5-ec3723d14ca3\",\n  \"testDescription\": \"Unfollow hợp lệ\",\n  \"expectedStatus\": 200.0,\n  \"expectedResult\": \"{\\\"message\\\": \\\"Hủy theo dõi thành công\\\"}\",\n  \"responseStatus\": \"500\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.236Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 200, got 500\"\n}\n \n19:06:42.045 Expected Status: 200.0 \n19:06:42.045 Expected Result: {\"message\": \"Hủy theo dõi thành công\"} \n19:06:42.045 Actual Status: 200 \n19:06:42.045 Test Status: PASS \n19:06:42.046 Test case #1 - Status: 200, Test Result: PASS \n19:06:42.048 Đang chạy test case #2: followingId rỗng \n19:06:42.048 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:42.064 karate.env system property was: null \n"},{"result":{"nanos":1176200,"startTime":1750766802065,"endTime":1750766802066,"millis":1.1762,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":578700,"startTime":1750766802067,"endTime":1750766802068,"millis":0.5787,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":186700,"startTime":1750766802067,"endTime":1750766802067,"millis":0.1867,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":582000,"startTime":1750766802068,"endTime":1750766802069,"millis":0.582,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":585500,"startTime":1750766802068,"endTime":1750766802069,"millis":0.5855,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":12679400,"startTime":1750766802069,"endTime":1750766802082,"millis":12.6794,"status":"passed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.071 request:\n1 > DELETE http:\/\/localhost:3000\/follows\/\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:06:42.081 response time in milliseconds: 9\n1 < 404\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 128\n1 < ETag: W\/\"80-xQLdhIr575sozQjjK7ebMliE5FM\"\n1 < Date: Tue, 24 Jun 2025 12:06:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Cannot DELETE \/follows\/\",\n  \"path\": \"\/follows\/\",\n  \"timestamp\": \"2025-06-24T12:06:42.076Z\"\n}\n\n\n"},{"result":{"nanos":252700,"startTime":1750766802082,"endTime":1750766802082,"millis":0.2527,"status":"passed"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":342300,"startTime":1750766802082,"endTime":1750766802082,"millis":0.3423,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":773600,"startTime":1750766802083,"endTime":1750766802084,"millis":0.7736,"status":"passed"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"},"stepLog":"19:06:42.083 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n"},{"result":{"nanos":642600,"startTime":1750766802083,"endTime":1750766802084,"millis":0.6426,"status":"passed"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"},"stepLog":"19:06:42.084 [print] Following ID:  \n"},{"result":{"nanos":467300,"startTime":1750766802084,"endTime":1750766802084,"millis":0.4673,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"},"stepLog":"19:06:42.085 [print] Final URL: http:\/\/localhost:3000\/follows\/ \n"},{"result":{"nanos":807800,"startTime":1750766802085,"endTime":1750766802086,"millis":0.8078,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"19:06:42.085 [print] Response status: 404 body: {\n  \"success\": false,\n  \"statusCode\": 404,\n  \"message\": \"Cannot DELETE \/follows\/\",\n  \"path\": \"\/follows\/\",\n  \"timestamp\": \"2025-06-24T12:06:42.076Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unfollow với bearer token và followingId","description":"","durationMillis":23.0969,"startTime":1750766802060,"failed":false,"refId":"[1:3]","endTime":1750766802086,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":38.0531,"callArg":{"bearerToken":"","followingId":"e7b38cb7-6701-40d9-a3bd-f53fc4d43457"},"failedCount":0,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2809400,"startTime":1750766802105,"endTime":1750766802108,"millis":2.8094,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.091 ❌ TEST FAILED - Status mismatch: Expected 400, got 404 \n19:06:42.091 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"\",\n  \"testDescription\": \"followingId rỗng\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"followingId cannot be empty\\\"}\",\n  \"responseStatus\": \"404\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":404,\\\"message\\\":\\\"Cannot DELETE \/follows\/\\\",\\\"path\\\":\\\"\/follows\/\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.371Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 404\"\n}\n \n19:06:42.091 Expected Status: 400.0 \n19:06:42.091 Expected Result: {\"error\": \"followingId cannot be empty\"} \n19:06:42.093 Actual Status: 404 \n19:06:42.093 Test Status: FAIL \n19:06:42.093 Test case #2 - Status: 404, Test Result: FAIL \n19:06:42.094 Đang chạy test case #3: Thiếu token xác thực \n19:06:42.095 Test case không sử dụng token \n19:06:42.106 karate.env system property was: null \n"},{"result":{"nanos":311300,"startTime":1750766802107,"endTime":1750766802107,"millis":0.3113,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":279800,"startTime":1750766802107,"endTime":1750766802107,"millis":0.2798,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":74900,"startTime":1750766802108,"endTime":1750766802108,"millis":0.0749,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":1595300,"startTime":1750766802108,"endTime":1750766802110,"millis":1.5953,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":17985200,"startTime":1750766802109,"endTime":1750766802127,"millis":17.9852,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":11978700,"startTime":1750766802128,"endTime":1750766802140,"millis":11.9787,"status":"passed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.130 request:\n1 > DELETE http:\/\/localhost:3000\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\n1 > Authorization: #(Authorization)\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:06:42.139 response time in milliseconds: 7\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 153\n1 < ETag: W\/\"99-brba91czQAoZtfVPIPyLR\/qQtx4\"\n1 < Date: Tue, 24 Jun 2025 12:06:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n  \"timestamp\": \"2025-06-24T12:06:42.135Z\"\n}\n\n\n"},{"result":{"nanos":245100,"startTime":1750766802139,"endTime":1750766802139,"millis":0.2451,"status":"passed"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":163200,"startTime":1750766802139,"endTime":1750766802139,"millis":0.1632,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":658200,"startTime":1750766802139,"endTime":1750766802140,"millis":0.6582,"status":"passed"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"},"stepLog":"19:06:42.141 [print] Calling unfollow API với bearerToken:  \n"},{"result":{"nanos":448700,"startTime":1750766802141,"endTime":1750766802141,"millis":0.4487,"status":"passed"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"},"stepLog":"19:06:42.142 [print] Following ID: e7b38cb7-6701-40d9-a3bd-f53fc4d43457 \n"},{"result":{"nanos":868900,"startTime":1750766802142,"endTime":1750766802143,"millis":0.8689,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"},"stepLog":"19:06:42.142 [print] Final URL: http:\/\/localhost:3000\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457 \n"},{"result":{"nanos":634400,"startTime":1750766802142,"endTime":1750766802143,"millis":0.6344,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"19:06:42.143 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n  \"timestamp\": \"2025-06-24T12:06:42.135Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unfollow với bearer token và followingId","description":"","durationMillis":38.0531,"startTime":1750766802104,"failed":false,"refId":"[1:3]","endTime":1750766802143,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":20.7892,"callArg":{"bearerToken":"invalid_token_123","followingId":"e7b38cb7-6701-40d9-a3bd-f53fc4d43457"},"failedCount":0,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3481300,"startTime":1750766802155,"endTime":1750766802158,"millis":3.4813,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.145 ✅ TEST PASSED - All validations passed \n19:06:42.145 Test Case Data: {\n  \"bearerToken\": \"NO_TOKEN\",\n  \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n  \"testDescription\": \"Thiếu token xác thực\",\n  \"expectedStatus\": 401.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.423Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"All validations passed\"\n}\n \n19:06:42.145 Expected Status: 401.0 \n19:06:42.145 Expected Result: {\"error\": \"Unauthorized\"} \n19:06:42.145 Actual Status: 401 \n19:06:42.146 Test Status: PASS \n19:06:42.146 Test case #3 - Status: 401, Test Result: PASS \n19:06:42.147 Đang chạy test case #4: Token không hợp lệ \n19:06:42.147 Test case sử dụng token không hợp lệ \n19:06:42.157 karate.env system property was: null \n"},{"result":{"nanos":741200,"startTime":1750766802158,"endTime":1750766802159,"millis":0.7412,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":583900,"startTime":1750766802159,"endTime":1750766802160,"millis":0.5839,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":247100,"startTime":1750766802161,"endTime":1750766802161,"millis":0.2471,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":490000,"startTime":1750766802161,"endTime":1750766802161,"millis":0.49,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":515500,"startTime":1750766802162,"endTime":1750766802163,"millis":0.5155,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":10525800,"startTime":1750766802162,"endTime":1750766802173,"millis":10.5258,"status":"passed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.164 request:\n1 > DELETE http:\/\/localhost:3000\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\n1 > Authorization: Bearer invalid_token_123\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:06:42.171 response time in milliseconds: 7\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 153\n1 < ETag: W\/\"99-dMvfkkfQ5+IC4pzFC3GdQ5vEMb8\"\n1 < Date: Tue, 24 Jun 2025 12:06:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n  \"timestamp\": \"2025-06-24T12:06:42.168Z\"\n}\n\n\n"},{"result":{"nanos":599800,"startTime":1750766802172,"endTime":1750766802173,"millis":0.5998,"status":"passed"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":248900,"startTime":1750766802172,"endTime":1750766802172,"millis":0.2489,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":1669000,"startTime":1750766802174,"endTime":1750766802176,"millis":1.669,"status":"passed"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"},"stepLog":"19:06:42.175 [print] Calling unfollow API với bearerToken: invalid_token_123 \n"},{"result":{"nanos":441700,"startTime":1750766802175,"endTime":1750766802175,"millis":0.4417,"status":"passed"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"},"stepLog":"19:06:42.175 [print] Following ID: e7b38cb7-6701-40d9-a3bd-f53fc4d43457 \n"},{"result":{"nanos":603300,"startTime":1750766802176,"endTime":1750766802177,"millis":0.6033,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"},"stepLog":"19:06:42.176 [print] Final URL: http:\/\/localhost:3000\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457 \n"},{"result":{"nanos":641700,"startTime":1750766802176,"endTime":1750766802177,"millis":0.6417,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"19:06:42.177 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n  \"timestamp\": \"2025-06-24T12:06:42.168Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unfollow với bearer token và followingId","description":"","durationMillis":20.7892,"startTime":1750766802155,"failed":false,"refId":"[1:3]","endTime":1750766802177,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":96.6586,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":"nonexistent123"},"failedCount":0,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3691900,"startTime":1750766802195,"endTime":1750766802199,"millis":3.6919,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.180 ✅ TEST PASSED - All validations passed \n19:06:42.180 Test Case Data: {\n  \"bearerToken\": \"INVALID_TOKEN\",\n  \"followingId\": \"e7b38cb7-6701-40d9-a3bd-f53fc4d43457\",\n  \"testDescription\": \"Token không hợp lệ\",\n  \"expectedStatus\": 401.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid or expired token\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.451Z\\\"}\",\n  \"testStatus\": \"PASS\",\n  \"failureReason\": \"All validations passed\"\n}\n \n19:06:42.181 Expected Status: 401.0 \n19:06:42.181 Expected Result: {\"error\": \"Invalid or expired token\"} \n19:06:42.181 Actual Status: 401 \n19:06:42.181 Test Status: PASS \n19:06:42.181 Test case #4 - Status: 401, Test Result: PASS \n19:06:42.182 Đang chạy test case #5: followingId không tồn tại \n19:06:42.183 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:42.198 karate.env system property was: null \n"},{"result":{"nanos":417500,"startTime":1750766802199,"endTime":1750766802199,"millis":0.4175,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":353200,"startTime":1750766802199,"endTime":1750766802199,"millis":0.3532,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":121400,"startTime":1750766802200,"endTime":1750766802200,"millis":0.1214,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":373600,"startTime":1750766802200,"endTime":1750766802200,"millis":0.3736,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":458900,"startTime":1750766802200,"endTime":1750766802200,"millis":0.4589,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":90113600,"startTime":1750766802201,"endTime":1750766802291,"millis":90.1136,"status":"passed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.202 request:\n1 > DELETE http:\/\/localhost:3000\/follows\/nonexistent123\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:06:42.291 response time in milliseconds: 76\n1 < 500\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 549\n1 < ETag: W\/\"225-9SbBz8bee0Fp4oc1P2TsgUT1Kuk\"\n1 < Date: Tue, 24 Jun 2025 12:06:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/nonexistent123\",\n  \"timestamp\": \"2025-06-24T12:06:42.278Z\"\n}\n\n\n"},{"result":{"nanos":152500,"startTime":1750766802291,"endTime":1750766802291,"millis":0.1525,"status":"passed"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":88600,"startTime":1750766802292,"endTime":1750766802292,"millis":0.0886,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":349700,"startTime":1750766802292,"endTime":1750766802292,"millis":0.3497,"status":"passed"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"},"stepLog":"19:06:42.292 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n"},{"result":{"nanos":132800,"startTime":1750766802292,"endTime":1750766802292,"millis":0.1328,"status":"passed"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"},"stepLog":"19:06:42.292 [print] Following ID: nonexistent123 \n"},{"result":{"nanos":123300,"startTime":1750766802292,"endTime":1750766802292,"millis":0.1233,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"},"stepLog":"19:06:42.292 [print] Final URL: http:\/\/localhost:3000\/follows\/nonexistent123 \n"},{"result":{"nanos":281600,"startTime":1750766802292,"endTime":1750766802292,"millis":0.2816,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"19:06:42.293 [print] Response status: 500 body: {\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/nonexistent123\",\n  \"timestamp\": \"2025-06-24T12:06:42.278Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unfollow với bearer token và followingId","description":"","durationMillis":96.6586,"startTime":1750766802195,"failed":false,"refId":"[1:3]","endTime":1750766802293,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":70.3078,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":"08515b05-2d3e-4789-ad60-db35525a4970"},"failedCount":0,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1785200,"startTime":1750766802305,"endTime":1750766802307,"millis":1.7852,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.293 ❌ TEST FAILED - Status mismatch: Expected 404, got 500 \n19:06:42.294 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"nonexistent123\",\n  \"testDescription\": \"followingId không tồn tại\",\n  \"expectedStatus\": 404.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"User not found\\\"}\",\n  \"responseStatus\": 500.0,\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/nonexistent123\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.542Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 404, got 500\"\n}\n \n19:06:42.294 Expected Status: 404.0 \n19:06:42.294 Expected Result: {\"error\": \"User not found\"} \n19:06:42.294 Actual Status: 500 \n19:06:42.295 Test Status: FAIL \n19:06:42.295 Test case #5 - Status: 500, Test Result: FAIL \n19:06:42.295 Đang chạy test case #6: Unfollow chính mình \n19:06:42.295 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:42.306 karate.env system property was: null \n"},{"result":{"nanos":241200,"startTime":1750766802306,"endTime":1750766802306,"millis":0.2412,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":153500,"startTime":1750766802307,"endTime":1750766802307,"millis":0.1535,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":51000,"startTime":1750766802307,"endTime":1750766802307,"millis":0.051,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":186100,"startTime":1750766802307,"endTime":1750766802307,"millis":0.1861,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":299200,"startTime":1750766802307,"endTime":1750766802307,"millis":0.2992,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":64756300,"startTime":1750766802307,"endTime":1750766802372,"millis":64.7563,"status":"passed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.308 request:\n1 > DELETE http:\/\/localhost:3000\/follows\/08515b05-2d3e-4789-ad60-db35525a4970\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:06:42.371 response time in milliseconds: 62\n1 < 500\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 571\n1 < ETag: W\/\"23b-H5mp9Vb49auN2qVltNthGmcArc0\"\n1 < Date: Tue, 24 Jun 2025 12:06:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/08515b05-2d3e-4789-ad60-db35525a4970\",\n  \"timestamp\": \"2025-06-24T12:06:42.368Z\"\n}\n\n\n"},{"result":{"nanos":333000,"startTime":1750766802372,"endTime":1750766802372,"millis":0.333,"status":"passed"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":214200,"startTime":1750766802373,"endTime":1750766802373,"millis":0.2142,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":679600,"startTime":1750766802373,"endTime":1750766802374,"millis":0.6796,"status":"passed"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"},"stepLog":"19:06:42.374 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n"},{"result":{"nanos":473200,"startTime":1750766802374,"endTime":1750766802374,"millis":0.4732,"status":"passed"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"},"stepLog":"19:06:42.374 [print] Following ID: 08515b05-2d3e-4789-ad60-db35525a4970 \n"},{"result":{"nanos":455200,"startTime":1750766802374,"endTime":1750766802374,"millis":0.4552,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"},"stepLog":"19:06:42.375 [print] Final URL: http:\/\/localhost:3000\/follows\/08515b05-2d3e-4789-ad60-db35525a4970 \n"},{"result":{"nanos":680100,"startTime":1750766802375,"endTime":1750766802376,"millis":0.6801,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"19:06:42.375 [print] Response status: 500 body: {\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/08515b05-2d3e-4789-ad60-db35525a4970\",\n  \"timestamp\": \"2025-06-24T12:06:42.368Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unfollow với bearer token và followingId","description":"","durationMillis":70.3078,"startTime":1750766802303,"failed":false,"refId":"[1:3]","endTime":1750766802375,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":75.5702,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":"650ce1ed-aaca-438f-9988-1f058ab5aa1a"},"failedCount":0,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1978000,"startTime":1750766802390,"endTime":1750766802392,"millis":1.978,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.377 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 \n19:06:42.378 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n  \"testDescription\": \"Unfollow chính mình\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Cannot unfollow yourself\\\"}\",\n  \"responseStatus\": \"500\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/08515b05-2d3e-4789-ad60-db35525a4970\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.649Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n}\n \n19:06:42.378 Expected Status: 400.0 \n19:06:42.378 Expected Result: {\"error\": \"Cannot unfollow yourself\"} \n19:06:42.378 Actual Status: 500 \n19:06:42.378 Test Status: FAIL \n19:06:42.378 Test case #6 - Status: 500, Test Result: FAIL \n19:06:42.381 Đang chạy test case #7: Chưa follow trước đó \n19:06:42.381 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:42.390 karate.env system property was: null \n"},{"result":{"nanos":211700,"startTime":1750766802391,"endTime":1750766802391,"millis":0.2117,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":218900,"startTime":1750766802391,"endTime":1750766802391,"millis":0.2189,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":57500,"startTime":1750766802392,"endTime":1750766802392,"millis":0.0575,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":181100,"startTime":1750766802392,"endTime":1750766802392,"millis":0.1811,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":288400,"startTime":1750766802392,"endTime":1750766802392,"millis":0.2884,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":71075700,"startTime":1750766802392,"endTime":1750766802463,"millis":71.0757,"status":"passed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.394 request:\n1 > DELETE http:\/\/localhost:3000\/follows\/650ce1ed-aaca-438f-9988-1f058ab5aa1a\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:06:42.463 response time in milliseconds: 68\n1 < 500\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 571\n1 < ETag: W\/\"23b-RYsCJsgsWdxwO6VHG\/oyXMj8XBA\"\n1 < Date: Tue, 24 Jun 2025 12:06:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/650ce1ed-aaca-438f-9988-1f058ab5aa1a\",\n  \"timestamp\": \"2025-06-24T12:06:42.460Z\"\n}\n\n\n"},{"result":{"nanos":159800,"startTime":1750766802463,"endTime":1750766802463,"millis":0.1598,"status":"passed"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":112300,"startTime":1750766802463,"endTime":1750766802463,"millis":0.1123,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":453100,"startTime":1750766802464,"endTime":1750766802464,"millis":0.4531,"status":"passed"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"},"stepLog":"19:06:42.464 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n"},{"result":{"nanos":244600,"startTime":1750766802464,"endTime":1750766802464,"millis":0.2446,"status":"passed"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"},"stepLog":"19:06:42.464 [print] Following ID: 650ce1ed-aaca-438f-9988-1f058ab5aa1a \n"},{"result":{"nanos":172700,"startTime":1750766802464,"endTime":1750766802464,"millis":0.1727,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"},"stepLog":"19:06:42.464 [print] Final URL: http:\/\/localhost:3000\/follows\/650ce1ed-aaca-438f-9988-1f058ab5aa1a \n"},{"result":{"nanos":416400,"startTime":1750766802464,"endTime":1750766802464,"millis":0.4164,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"19:06:42.465 [print] Response status: 500 body: {\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/650ce1ed-aaca-438f-9988-1f058ab5aa1a\",\n  \"timestamp\": \"2025-06-24T12:06:42.460Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unfollow với bearer token và followingId","description":"","durationMillis":75.5702,"startTime":1750766802389,"failed":false,"refId":"[1:3]","endTime":1750766802465,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":86.267,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":"invalid_id!@#"},"failedCount":0,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2795700,"startTime":1750766802476,"endTime":1750766802479,"millis":2.7957,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.467 ❌ TEST FAILED - Status mismatch: Expected 404, got 500 \n19:06:42.467 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"650ce1ed-aaca-438f-9988-1f058ab5aa1a\",\n  \"testDescription\": \"Chưa follow trước đó\",\n  \"expectedStatus\": 404.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"You are not following this user\\\"}\",\n  \"responseStatus\": \"500\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/e7b38cb7-6701-40d9-a3bd-f53fc4d43457\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.742Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 404, got 500\"\n}\n \n19:06:42.467 Expected Status: 404.0 \n19:06:42.467 Expected Result: {\"error\": \"You are not following this user\"} \n19:06:42.467 Actual Status: 500 \n19:06:42.468 Test Status: FAIL \n19:06:42.468 Test case #7 - Status: 500, Test Result: FAIL \n19:06:42.469 Đang chạy test case #8: followingId không hợp lệ \n19:06:42.469 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:42.479 karate.env system property was: null \n"},{"result":{"nanos":261900,"startTime":1750766802480,"endTime":1750766802480,"millis":0.2619,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":176800,"startTime":1750766802480,"endTime":1750766802480,"millis":0.1768,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":54600,"startTime":1750766802480,"endTime":1750766802480,"millis":0.0546,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":258900,"startTime":1750766802480,"endTime":1750766802480,"millis":0.2589,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":375900,"startTime":1750766802481,"endTime":1750766802481,"millis":0.3759,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":80416100,"startTime":1750766802481,"endTime":1750766802561,"millis":80.4161,"status":"passed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.482 request:\n1 > DELETE http:\/\/localhost:3000\/follows\/invalid_id!@#\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:06:42.561 response time in milliseconds: 77\n1 < 500\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 547\n1 < ETag: W\/\"223-cLrtmWTboeXuMS7SVfzeC3ialQs\"\n1 < Date: Tue, 24 Jun 2025 12:06:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/invalid_id!@\",\n  \"timestamp\": \"2025-06-24T12:06:42.559Z\"\n}\n\n\n"},{"result":{"nanos":129000,"startTime":1750766802562,"endTime":1750766802562,"millis":0.129,"status":"passed"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":118800,"startTime":1750766802562,"endTime":1750766802562,"millis":0.1188,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":380000,"startTime":1750766802562,"endTime":1750766802562,"millis":0.38,"status":"passed"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"},"stepLog":"19:06:42.562 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n"},{"result":{"nanos":535700,"startTime":1750766802562,"endTime":1750766802563,"millis":0.5357,"status":"passed"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"},"stepLog":"19:06:42.563 [print] Following ID: invalid_id!@# \n"},{"result":{"nanos":290500,"startTime":1750766802563,"endTime":1750766802563,"millis":0.2905,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"},"stepLog":"19:06:42.563 [print] Final URL: http:\/\/localhost:3000\/follows\/invalid_id!@# \n"},{"result":{"nanos":473100,"startTime":1750766802563,"endTime":1750766802563,"millis":0.4731,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"19:06:42.564 [print] Response status: 500 body: {\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/invalid_id!@\",\n  \"timestamp\": \"2025-06-24T12:06:42.559Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unfollow với bearer token và followingId","description":"","durationMillis":86.267,"startTime":1750766802476,"failed":false,"refId":"[1:3]","endTime":1750766802564,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":4.4241,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":"user123' OR '1'='1"},"failedCount":1,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2946700,"startTime":1750766802575,"endTime":1750766802578,"millis":2.9467,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.565 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 \n19:06:42.567 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"invalid_id!@#\",\n  \"testDescription\": \"followingId không hợp lệ\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid followingId format\\\"}\",\n  \"responseStatus\": \"500\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/invalid_id!@\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.828Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n}\n \n19:06:42.568 Expected Status: 400.0 \n19:06:42.568 Expected Result: {\"error\": \"Invalid followingId format\"} \n19:06:42.568 Actual Status: 500 \n19:06:42.568 Test Status: FAIL \n19:06:42.568 Test case #8 - Status: 500, Test Result: FAIL \n19:06:42.569 Đang chạy test case #9: Kiểm tra SQL Injection \n19:06:42.569 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:42.578 karate.env system property was: null \n"},{"result":{"nanos":335700,"startTime":1750766802579,"endTime":1750766802579,"millis":0.3357,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":206600,"startTime":1750766802579,"endTime":1750766802579,"millis":0.2066,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":54200,"startTime":1750766802579,"endTime":1750766802579,"millis":0.0542,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":243400,"startTime":1750766802579,"endTime":1750766802579,"millis":0.2434,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":285600,"startTime":1750766802580,"endTime":1750766802580,"millis":0.2856,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":351900,"errorMessage":"java.net.URISyntaxException: Illegal character in path at index 38: http:\/\/localhost:3000\/follows\/user123' OR '1'='1\nclasspath:features\/helpers\/unfollow-single-call.feature:15","startTime":1750766802580,"endTime":1750766802580,"millis":0.3519,"status":"failed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.581 classpath:features\/helpers\/unfollow-single-call.feature:15\nWhen method DELETE\njava.net.URISyntaxException: Illegal character in path at index 38: http:\/\/localhost:3000\/follows\/user123' OR '1'='1\nclasspath:features\/helpers\/unfollow-single-call.feature:15\n"},{"result":{"nanos":0,"startTime":1750766802581,"endTime":1750766802581,"millis":0.0,"status":"skipped"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":0,"startTime":1750766802581,"endTime":1750766802581,"millis":0.0,"status":"skipped"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":0,"startTime":1750766802581,"endTime":1750766802581,"millis":0.0,"status":"skipped"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"}},{"result":{"nanos":0,"startTime":1750766802581,"endTime":1750766802581,"millis":0.0,"status":"skipped"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"}},{"result":{"nanos":0,"startTime":1750766802581,"endTime":1750766802581,"millis":0.0,"status":"skipped"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"}},{"result":{"nanos":0,"startTime":1750766802581,"endTime":1750766802581,"millis":0.0,"status":"skipped"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"}}],"line":3,"description":"","durationMillis":4.4241,"failed":true,"error":"java.net.URISyntaxException: Illegal character in path at index 38: http:\/\/localhost:3000\/follows\/user123' OR '1'='1\nclasspath:features\/helpers\/unfollow-single-call.feature:15","executorName":"main","name":"Gọi API unfollow với bearer token và followingId","startTime":1750766802575,"refId":"[1:3]","endTime":1750766802581,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":0},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":2.428,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":"<script>alert(\"xss\")<\/script>"},"failedCount":1,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1372400,"startTime":1750766802595,"endTime":1750766802596,"millis":1.3724,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.588 Test case #9 gặp lỗi: java.net.URISyntaxException: Illegal character in path at index 38: http:\/\/localhost:3000\/follows\/user123' OR '1'='1\nclasspath:features\/helpers\/unfollow-single-call.feature:15 \n19:06:42.589 Đang chạy test case #10: Kiểm tra XSS \n19:06:42.589 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:42.595 karate.env system property was: null \n"},{"result":{"nanos":181900,"startTime":1750766802596,"endTime":1750766802596,"millis":0.1819,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":141200,"startTime":1750766802596,"endTime":1750766802596,"millis":0.1412,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":47200,"startTime":1750766802596,"endTime":1750766802596,"millis":0.0472,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":201600,"startTime":1750766802597,"endTime":1750766802597,"millis":0.2016,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":285000,"startTime":1750766802597,"endTime":1750766802597,"millis":0.285,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":198700,"errorMessage":"java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/<script>alert(\"xss\")<\/script>\nclasspath:features\/helpers\/unfollow-single-call.feature:15","startTime":1750766802597,"endTime":1750766802597,"millis":0.1987,"status":"failed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.597 classpath:features\/helpers\/unfollow-single-call.feature:15\nWhen method DELETE\njava.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/<script>alert(\"xss\")<\/script>\nclasspath:features\/helpers\/unfollow-single-call.feature:15\n"},{"result":{"nanos":0,"startTime":1750766802597,"endTime":1750766802597,"millis":0.0,"status":"skipped"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":0,"startTime":1750766802597,"endTime":1750766802597,"millis":0.0,"status":"skipped"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":0,"startTime":1750766802597,"endTime":1750766802597,"millis":0.0,"status":"skipped"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"}},{"result":{"nanos":0,"startTime":1750766802597,"endTime":1750766802597,"millis":0.0,"status":"skipped"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"}},{"result":{"nanos":0,"startTime":1750766802597,"endTime":1750766802597,"millis":0.0,"status":"skipped"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"}},{"result":{"nanos":0,"startTime":1750766802597,"endTime":1750766802597,"millis":0.0,"status":"skipped"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"}}],"line":3,"description":"","durationMillis":2.428,"failed":true,"error":"java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/<script>alert(\"xss\")<\/script>\nclasspath:features\/helpers\/unfollow-single-call.feature:15","executorName":"main","name":"Gọi API unfollow với bearer token và followingId","startTime":1750766802595,"refId":"[1:3]","endTime":1750766802597,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":0},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":3.9638,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":" "},"failedCount":1,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2573800,"startTime":1750766802607,"endTime":1750766802610,"millis":2.5738,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.597 Test case #10 gặp lỗi: java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/<script>alert(\"xss\")<\/script>\nclasspath:features\/helpers\/unfollow-single-call.feature:15 \n19:06:42.598 Đang chạy test case #11: Kiểm tra khoảng trắng \n19:06:42.598 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:42.608 karate.env system property was: null \n"},{"result":{"nanos":289100,"startTime":1750766802609,"endTime":1750766802609,"millis":0.2891,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":225200,"startTime":1750766802610,"endTime":1750766802610,"millis":0.2252,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":81000,"startTime":1750766802610,"endTime":1750766802610,"millis":0.081,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":302100,"startTime":1750766802610,"endTime":1750766802610,"millis":0.3021,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":303500,"startTime":1750766802610,"endTime":1750766802610,"millis":0.3035,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":189100,"errorMessage":"java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/ \nclasspath:features\/helpers\/unfollow-single-call.feature:15","startTime":1750766802611,"endTime":1750766802611,"millis":0.1891,"status":"failed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.611 classpath:features\/helpers\/unfollow-single-call.feature:15\nWhen method DELETE\njava.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/ \nclasspath:features\/helpers\/unfollow-single-call.feature:15\n"},{"result":{"nanos":0,"startTime":1750766802611,"endTime":1750766802611,"millis":0.0,"status":"skipped"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":0,"startTime":1750766802611,"endTime":1750766802611,"millis":0.0,"status":"skipped"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":0,"startTime":1750766802611,"endTime":1750766802611,"millis":0.0,"status":"skipped"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"}},{"result":{"nanos":0,"startTime":1750766802611,"endTime":1750766802611,"millis":0.0,"status":"skipped"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"}},{"result":{"nanos":0,"startTime":1750766802611,"endTime":1750766802611,"millis":0.0,"status":"skipped"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"}},{"result":{"nanos":0,"startTime":1750766802611,"endTime":1750766802611,"millis":0.0,"status":"skipped"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"}}],"line":3,"description":"","durationMillis":3.9638,"failed":true,"error":"java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/ \nclasspath:features\/helpers\/unfollow-single-call.feature:15","executorName":"main","name":"Gọi API unfollow với bearer token và followingId","startTime":1750766802607,"refId":"[1:3]","endTime":1750766802611,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":0},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":74.2101,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":"user😊123"},"failedCount":0,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1543500,"startTime":1750766802621,"endTime":1750766802623,"millis":1.5435,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.612 Test case #11 gặp lỗi: java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/ \nclasspath:features\/helpers\/unfollow-single-call.feature:15 \n19:06:42.612 Đang chạy test case #12: Kiểm tra ký tự Unicode \n19:06:42.613 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:42.622 karate.env system property was: null \n"},{"result":{"nanos":182100,"startTime":1750766802622,"endTime":1750766802622,"millis":0.1821,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":165800,"startTime":1750766802622,"endTime":1750766802622,"millis":0.1658,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":53900,"startTime":1750766802623,"endTime":1750766802623,"millis":0.0539,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":205100,"startTime":1750766802623,"endTime":1750766802623,"millis":0.2051,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":271400,"startTime":1750766802623,"endTime":1750766802623,"millis":0.2714,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":70569400,"startTime":1750766802623,"endTime":1750766802694,"millis":70.5694,"status":"passed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.630 request:\n1 > DELETE http:\/\/localhost:3000\/follows\/user%F0%9F%98%8A123\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:06:42.693 response time in milliseconds: 63\n1 < 500\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 554\n1 < ETag: W\/\"22a-WsU\/+idLNa7sk0XQxMCSDi5pfdw\"\n1 < Date: Tue, 24 Jun 2025 12:06:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/user%F0%9F%98%8A123\",\n  \"timestamp\": \"2025-06-24T12:06:42.692Z\"\n}\n\n\n"},{"result":{"nanos":194700,"startTime":1750766802694,"endTime":1750766802694,"millis":0.1947,"status":"passed"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":69000,"startTime":1750766802694,"endTime":1750766802694,"millis":0.069,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":345200,"startTime":1750766802694,"endTime":1750766802694,"millis":0.3452,"status":"passed"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"},"stepLog":"19:06:42.694 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n"},{"result":{"nanos":149200,"startTime":1750766802694,"endTime":1750766802694,"millis":0.1492,"status":"passed"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"},"stepLog":"19:06:42.694 [print] Following ID: user😊123 \n"},{"result":{"nanos":137300,"startTime":1750766802694,"endTime":1750766802694,"millis":0.1373,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"},"stepLog":"19:06:42.694 [print] Final URL: http:\/\/localhost:3000\/follows\/user😊123 \n"},{"result":{"nanos":323500,"startTime":1750766802694,"endTime":1750766802694,"millis":0.3235,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"19:06:42.696 [print] Response status: 500 body: {\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/user%F0%9F%98%8A123\",\n  \"timestamp\": \"2025-06-24T12:06:42.692Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unfollow với bearer token và followingId","description":"","durationMillis":74.2101,"startTime":1750766802620,"failed":false,"refId":"[1:3]","endTime":1750766802696,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":77.4852,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":"NULL_VALUE"},"failedCount":0,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2274300,"startTime":1750766802705,"endTime":1750766802707,"millis":2.2743,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.697 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 \n19:06:42.698 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"user😊123\",\n  \"testDescription\": \"Kiểm tra ký tự Unicode\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid followingId format\\\"}\",\n  \"responseStatus\": \"500\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/user%F0%9F%98%8A123\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:19.969Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n}\n \n19:06:42.698 Expected Status: 400.0 \n19:06:42.698 Expected Result: {\"error\": \"Invalid followingId format\"} \n19:06:42.698 Actual Status: 500 \n19:06:42.698 Test Status: FAIL \n19:06:42.698 Test case #12 - Status: 500, Test Result: FAIL \n19:06:42.699 Đang chạy test case #13: Kiểm tra trường null \n19:06:42.699 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:42.707 karate.env system property was: null \n"},{"result":{"nanos":343500,"startTime":1750766802708,"endTime":1750766802708,"millis":0.3435,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":327700,"startTime":1750766802709,"endTime":1750766802709,"millis":0.3277,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":83700,"startTime":1750766802709,"endTime":1750766802709,"millis":0.0837,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":241000,"startTime":1750766802709,"endTime":1750766802709,"millis":0.241,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":719300,"startTime":1750766802709,"endTime":1750766802710,"millis":0.7193,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":71703000,"startTime":1750766802710,"endTime":1750766802782,"millis":71.703,"status":"passed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.712 request:\n1 > DELETE http:\/\/localhost:3000\/follows\/null\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:06:42.781 response time in milliseconds: 68\n1 < 500\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 539\n1 < ETag: W\/\"21b-ocwRMnh5oxBy33r0NBwv3PtUQNI\"\n1 < Date: Tue, 24 Jun 2025 12:06:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/null\",\n  \"timestamp\": \"2025-06-24T12:06:42.779Z\"\n}\n\n\n"},{"result":{"nanos":211200,"startTime":1750766802781,"endTime":1750766802781,"millis":0.2112,"status":"passed"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":89100,"startTime":1750766802781,"endTime":1750766802781,"millis":0.0891,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":589500,"startTime":1750766802782,"endTime":1750766802783,"millis":0.5895,"status":"passed"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"},"stepLog":"19:06:42.782 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n"},{"result":{"nanos":282400,"startTime":1750766802782,"endTime":1750766802782,"millis":0.2824,"status":"passed"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"},"stepLog":"19:06:42.782 [print] Following ID: NULL_VALUE \n"},{"result":{"nanos":167800,"startTime":1750766802782,"endTime":1750766802782,"millis":0.1678,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"},"stepLog":"19:06:42.782 [print] Final URL: http:\/\/localhost:3000\/follows\/null \n"},{"result":{"nanos":452700,"startTime":1750766802782,"endTime":1750766802782,"millis":0.4527,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"19:06:42.784 [print] Response status: 500 body: {\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/null\",\n  \"timestamp\": \"2025-06-24T12:06:42.779Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unfollow với bearer token và followingId","description":"","durationMillis":77.4852,"startTime":1750766802705,"failed":false,"refId":"[1:3]","endTime":1750766802784,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/unfollow-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":72.6135,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w","followingId":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"},"failedCount":0,"packageQualifiedName":"features.helpers.unfollow-single-call","relativePath":"features\/helpers\/unfollow-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2016200,"startTime":1750766802796,"endTime":1750766802798,"millis":2.0162,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"19:06:42.786 ❌ TEST FAILED - Status mismatch: Expected 400, got 500 \n19:06:42.787 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"followingId\": \"NULL_VALUE\",\n  \"testDescription\": \"Kiểm tra trường null\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"followingId cannot be null\\\"}\",\n  \"responseStatus\": \"500\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":500,\\\"message\\\":\\\"\\\\nInvalid `this.prisma.follow.delete()` invocation in\\\\nD:\\\\\\\\Documents\\\\\\\\Workspace\\\\\\\\react_native\\\\\\\\roamly_backend\\\\\\\\src\\\\\\\\modules\\\\\\\\follow\\\\\\\\follow.service.ts:74:52\\\\n\\\\n  71 }\\\\n  72 \\\\n  73 async deleteFollow(followerId: string, followingId: string) {\\\\n→ 74   const deleted = await this.prisma.follow.delete(\\\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\\\",\\\"path\\\":\\\"\/follows\/NULL_VALUE\\\",\\\"timestamp\\\":\\\"2025-06-23T10:13:20.052Z\\\"}\",\n  \"testStatus\": \"FAIL\",\n  \"failureReason\": \"Status mismatch: Expected 400, got 500\"\n}\n \n19:06:42.787 Expected Status: 400.0 \n19:06:42.787 Expected Result: {\"error\": \"followingId cannot be null\"} \n19:06:42.787 Actual Status: 500 \n19:06:42.787 Test Status: FAIL \n19:06:42.788 Test case #13 - Status: 500, Test Result: FAIL \n19:06:42.789 Đang chạy test case #14: Kiểm tra độ dài followingId \n19:06:42.789 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n19:06:42.797 karate.env system property was: null \n"},{"result":{"nanos":152000,"startTime":1750766802797,"endTime":1750766802797,"millis":0.152,"status":"passed"},"step":{"comments":["# Xử lý URL endpoint dựa trên followingId"],"line":7,"prefix":"*","index":1,"text":"def baseEndpoint = config.baseUrl + '\/follows'"}},{"result":{"nanos":106700,"startTime":1750766802797,"endTime":1750766802797,"millis":0.1067,"status":"passed"},"step":{"line":8,"prefix":"*","index":2,"text":"def finalUrl = followingId == 'EMPTY' ? baseEndpoint : (followingId == 'NULL_VALUE' ? baseEndpoint + '\/null' : baseEndpoint + '\/' + followingId)"}},{"result":{"nanos":40000,"startTime":1750766802797,"endTime":1750766802797,"millis":0.04,"status":"passed"},"step":{"line":9,"prefix":"Given","index":3,"text":"url finalUrl"}},{"result":{"nanos":134500,"startTime":1750766802797,"endTime":1750766802797,"millis":0.1345,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":12,"prefix":"*","index":4,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":174200,"startTime":1750766802797,"endTime":1750766802797,"millis":0.1742,"status":"passed"},"step":{"line":13,"prefix":"*","index":5,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":68571800,"startTime":1750766802798,"endTime":1750766802867,"millis":68.5718,"status":"passed"},"step":{"line":15,"prefix":"When","index":6,"text":"method DELETE"},"stepLog":"19:06:42.798 request:\n1 > DELETE http:\/\/localhost:3000\/follows\/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:06:42.867 response time in milliseconds: 67\n1 < 500\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 572\n1 < ETag: W\/\"23c-GxXEn5yxEycr5YoMjLhGWr5zGz8\"\n1 < Date: Tue, 24 Jun 2025 12:06:42 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n  \"timestamp\": \"2025-06-24T12:06:42.864Z\"\n}\n\n\n"},{"result":{"nanos":143000,"startTime":1750766802867,"endTime":1750766802867,"millis":0.143,"status":"passed"},"step":{"line":16,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":113700,"startTime":1750766802867,"endTime":1750766802867,"millis":0.1137,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":626700,"startTime":1750766802867,"endTime":1750766802868,"millis":0.6267,"status":"passed"},"step":{"line":18,"prefix":"And","index":9,"text":"print 'Calling unfollow API với bearerToken:', bearerToken"},"stepLog":"19:06:42.867 [print] Calling unfollow API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDc2NTIwMCwiZXhwIjoxNzUwNzY4ODAwfQ.Af3_A57JrMLa24ZYOUZRdkDHRLYpEEYRaCVTHzBkY5w \n"},{"result":{"nanos":146700,"startTime":1750766802867,"endTime":1750766802867,"millis":0.1467,"status":"passed"},"step":{"line":19,"prefix":"And","index":10,"text":"print 'Following ID:', followingId"},"stepLog":"19:06:42.867 [print] Following ID: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa \n"},{"result":{"nanos":108200,"startTime":1750766802867,"endTime":1750766802867,"millis":0.1082,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"print 'Final URL:', finalUrl"},"stepLog":"19:06:42.867 [print] Final URL: http:\/\/localhost:3000\/follows\/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa \n"},{"result":{"nanos":279800,"startTime":1750766802867,"endTime":1750766802867,"millis":0.2798,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"19:06:42.869 [print] Response status: 500 body: {\n  \"success\": false,\n  \"statusCode\": 500,\n  \"message\": \"\\nInvalid `this.prisma.follow.delete()` invocation in\\nD:\\\\Documents\\\\Workspace\\\\react_native\\\\roamly_backend\\\\src\\\\modules\\\\follow\\\\follow.service.ts:74:52\\n\\n  71 }\\n  72 \\n  73 async deleteFollow(followerId: string, followingId: string) {\\n→ 74   const deleted = await this.prisma.follow.delete(\\nAn operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\",\n  \"path\": \"\/follows\/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n  \"timestamp\": \"2025-06-24T12:06:42.864Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API unfollow với bearer token và followingId","description":"","durationMillis":72.6135,"startTime":1750766802796,"failed":false,"refId":"[1:3]","endTime":1750766802869,"exampleIndex":-1}],"name":"Unfollow Single Call Helper - Thực hiện API call unfollow với bearer token","passedCount":1}]},{"result":{"nanos":137900,"startTime":1750766802871,"endTime":1750766802871,"millis":0.1379,"status":"passed"},"step":{"line":122,"prefix":"*","index":4,"text":"def testResults = results"}},{"result":{"nanos":692900,"startTime":1750766802871,"endTime":1750766802872,"millis":0.6929,"status":"passed"},"step":{"line":123,"prefix":"*","index":5,"text":"print 'Hoàn thành tất cả test cases unfollow. Đang ghi kết quả vào Excel...'"},"stepLog":"19:06:42.871 [print] Hoàn thành tất cả test cases unfollow. Đang ghi kết quả vào Excel... \n"},{"result":{"nanos":1424300,"startTime":1750766802871,"endTime":1750766802872,"millis":1.4243,"status":"passed"},"step":{"comments":["# ===== THỐNG KÊ TEST RESULTS ====="],"line":126,"prefix":"*","index":6,"text":"def passedTests = karate.filter(testResults, function(item) { return item.testStatus === 'PASS'; })"}},{"result":{"nanos":1366300,"startTime":1750766802873,"endTime":1750766802874,"millis":1.3663,"status":"passed"},"step":{"line":127,"prefix":"*","index":7,"text":"def failedTests = karate.filter(testResults, function(item) { return item.testStatus === 'FAIL'; })"}},{"result":{"nanos":476600,"startTime":1750766802874,"endTime":1750766802874,"millis":0.4766,"status":"passed"},"step":{"line":128,"prefix":"*","index":8,"text":"def totalTests = testResults.length"}},{"result":{"nanos":474700,"startTime":1750766802875,"endTime":1750766802875,"millis":0.4747,"status":"passed"},"step":{"line":129,"prefix":"*","index":9,"text":"def passedCount = passedTests.length"}},{"result":{"nanos":364100,"startTime":1750766802875,"endTime":1750766802875,"millis":0.3641,"status":"passed"},"step":{"line":130,"prefix":"*","index":10,"text":"def failedCount = failedTests.length"}},{"result":{"nanos":4285100,"startTime":1750766802875,"endTime":1750766802879,"millis":4.2851,"status":"passed"},"step":{"line":131,"prefix":"*","index":11,"text":"def successRate = passedCount \/ totalTests * 100"}},{"result":{"nanos":894000,"startTime":1750766802880,"endTime":1750766802881,"millis":0.894,"status":"passed"},"step":{"comments":["# Log thống kê"],"line":134,"prefix":"*","index":12,"text":"print '========================================'"},"stepLog":"19:06:42.881 [print] ======================================== \n"},{"result":{"nanos":716100,"startTime":1750766802881,"endTime":1750766802882,"millis":0.7161,"status":"passed"},"step":{"line":135,"prefix":"*","index":13,"text":"print '📊 THỐNG KÊ KẾT QUẢ TEST UNFOLLOW:'"},"stepLog":"19:06:42.882 [print] 📊 THỐNG KÊ KẾT QUẢ TEST UNFOLLOW: \n"},{"result":{"nanos":765300,"startTime":1750766802882,"endTime":1750766802883,"millis":0.7653,"status":"passed"},"step":{"line":136,"prefix":"*","index":14,"text":"print '📁 Tổng số test cases: ' + totalTests"},"stepLog":"19:06:42.882 [print] 📁 Tổng số test cases: 14 \n"},{"result":{"nanos":711000,"startTime":1750766802882,"endTime":1750766802883,"millis":0.711,"status":"passed"},"step":{"line":137,"prefix":"*","index":15,"text":"print '✅ Số test PASSED: ' + passedCount"},"stepLog":"19:06:42.883 [print] ✅ Số test PASSED: 3 \n"},{"result":{"nanos":597200,"startTime":1750766802883,"endTime":1750766802884,"millis":0.5972,"status":"passed"},"step":{"line":138,"prefix":"*","index":16,"text":"print '❌ Số test FAILED: ' + failedCount"},"stepLog":"19:06:42.884 [print] ❌ Số test FAILED: 11 \n"},{"result":{"nanos":6200500,"startTime":1750766802884,"endTime":1750766802890,"millis":6.2005,"status":"passed"},"step":{"line":139,"prefix":"*","index":17,"text":"print '📈 Tỷ lệ thành công: ' + successRate.toFixed(2) + '%'"},"stepLog":"19:06:42.890 [print] 📈 Tỷ lệ thành công: 21.43% \n"},{"result":{"nanos":275400,"startTime":1750766802891,"endTime":1750766802891,"millis":0.2754,"status":"passed"},"step":{"line":140,"prefix":"*","index":18,"text":"print '========================================'"},"stepLog":"19:06:42.891 [print] ======================================== \n"},{"result":{"nanos":6198200,"startTime":1750766802891,"endTime":1750766802897,"millis":6.1982,"status":"passed"},"step":{"comments":["# Log failed tests"],"line":143,"prefix":"*","index":19,"text":"if (failedTests.length > 0) karate.forEach(failedTests, function(test, index) { karate.log('❌ Failed test #' + (index + 1) + ': ' + test.failureReason); })"},"stepLog":"19:06:42.895 ❌ Failed test #1: Status mismatch: Expected 400, got 404 \n19:06:42.896 ❌ Failed test #2: Status mismatch: Expected 404, got 500 \n19:06:42.896 ❌ Failed test #3: Status mismatch: Expected 400, got 500 \n19:06:42.896 ❌ Failed test #4: Status mismatch: Expected 404, got 500 \n19:06:42.896 ❌ Failed test #5: Status mismatch: Expected 400, got 500 \n19:06:42.896 ❌ Failed test #6: Exception: java.net.URISyntaxException: Illegal character in path at index 38: http:\/\/localhost:3000\/follows\/user123' OR '1'='1\nclasspath:features\/helpers\/unfollow-single-call.feature:15 \n19:06:42.896 ❌ Failed test #7: Exception: java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/<script>alert(\"xss\")<\/script>\nclasspath:features\/helpers\/unfollow-single-call.feature:15 \n19:06:42.896 ❌ Failed test #8: Exception: java.net.URISyntaxException: Illegal character in path at index 30: http:\/\/localhost:3000\/follows\/ \nclasspath:features\/helpers\/unfollow-single-call.feature:15 \n19:06:42.896 ❌ Failed test #9: Status mismatch: Expected 400, got 500 \n19:06:42.896 ❌ Failed test #10: Status mismatch: Expected 400, got 500 \n19:06:42.897 ❌ Failed test #11: Status mismatch: Expected 400, got 500 \n"},{"result":{"nanos":695400,"startTime":1750766802897,"endTime":1750766802898,"millis":0.6954,"status":"passed"},"step":{"line":145,"prefix":"*","index":20,"text":"print 'Ghi kết quả vào Excel...'"},"stepLog":"19:06:42.898 [print] Ghi kết quả vào Excel... \n"},{"result":{"nanos":351588000,"startTime":1750766802898,"endTime":1750766803250,"millis":351.588,"status":"passed"},"step":{"line":146,"prefix":"*","index":21,"text":"def writeSuccess = writeToExcel(excelFilePath, sheetName, testResults)"}},{"result":{"nanos":1617700,"startTime":1750766803250,"endTime":1750766803252,"millis":1.6177,"status":"passed"},"step":{"line":147,"prefix":"*","index":22,"text":"if (writeSuccess) karate.log('Đã ghi kết quả unfollow vào Excel thành công!')"},"stepLog":"19:06:43.251 Đã ghi kết quả unfollow vào Excel thành công! \n"},{"result":{"nanos":740500,"startTime":1750766803251,"endTime":1750766803252,"millis":0.7405,"status":"passed"},"step":{"line":148,"prefix":"*","index":23,"text":"if (!writeSuccess) karate.log('Lỗi khi ghi kết quả unfollow vào Excel!')"}}],"executorName":"main","line":16,"name":"Chạy tất cả test cases unfollow từ Excel","description":"","durationMillis":2747.0202,"startTime":1750766800328,"failed":false,"refId":"[1:16]","endTime":1750766803252,"exampleIndex":-1}],"callDepth":0,"name":"Unfollow Testing từ Excel - Sheet unfollow","description":"","resultDate":"2025-06-24 07:06:43 PM","durationMillis":2747.0202,"passedCount":1}