{"failedCount":0,"prefixedPath":"classpath:features\/like\/like-excel.feature","packageQualifiedName":"features.like.like-excel","loopIndex":-1,"relativePath":"features\/like\/like-excel.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2021200,"startTime":1750434441827,"endTime":1750434441829,"millis":2.0212,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"},"stepLog":"22:47:21.776 karate.env system property was: null \n"},{"result":{"nanos":18144700,"startTime":1750434441832,"endTime":1750434441850,"millis":18.1447,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:21.841 karate.env system property was: null \n"},{"result":{"nanos":57781500,"startTime":1750434441850,"endTime":1750434441908,"millis":57.7815,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def readExcel = read('classpath:utils\/read-excel.js')"}},{"result":{"nanos":21746100,"startTime":1750434441908,"endTime":1750434441930,"millis":21.7461,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def writeToExcel = read('classpath:utils\/write-excel.js')"}},{"result":{"nanos":805400,"startTime":1750434441930,"endTime":1750434441931,"millis":0.8054,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def excelFilePath = 'src\/test\/java\/data\/data.xlsx'"}},{"result":{"nanos":722600,"startTime":1750434441932,"endTime":1750434441933,"millis":0.7226,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def sheetName = 'like'"}},{"result":{"nanos":863399900,"startTime":1750434441932,"endTime":1750434442795,"millis":863.3999,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def testData = readExcel(excelFilePath, sheetName)"},"stepLog":"22:47:22.682 Headers found: [\n  \"bearerToken\",\n  \"targetId\",\n  \"testDescription\",\n  \"expectedStatus\",\n  \"expectedResult\",\n  \"responseStatus\",\n  \"result\"\n]\n \n22:47:22.787 Read data from Excel: [\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"testDescription\": \"Like post hợp lệ\",\n    \"expectedStatus\": 200.0,\n    \"expectedResult\": \"{\\\"message\\\": \\\"Liked successfully\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:27.846Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"\",\n    \"testDescription\": \"Thiếu trường targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId is required\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:27.913Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"\",\n    \"testDescription\": \"targetId rỗng\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot be empty\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:27.942Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"NO_TOKEN\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"testDescription\": \"Thiếu token xác thực\",\n    \"expectedStatus\": 401.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:27.995Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"INVALID_TOKEN\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"testDescription\": \"Token không hợp lệ\",\n    \"expectedStatus\": 401.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid or expired token\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.027Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"nonexistent-id-123\",\n    \"testDescription\": \"targetId không tồn tại\",\n    \"expectedStatus\": 404.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Target not found\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.051Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"testDescription\": \"Đã like trước đó\",\n    \"expectedStatus\": 200.0,\n    \"expectedResult\": \"{\\\"message\\\": \\\"Đã thích trước đó\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.073Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"invalid_id!@#\",\n    \"testDescription\": \"targetId không hợp lệ format\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid targetId format\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.094Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"target123' OR '1'='1\",\n    \"testDescription\": \"Kiểm tra SQL Injection trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.142Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"<script>alert(\\\"xss\\\")<\/script>\",\n    \"testDescription\": \"Kiểm tra XSS trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.178Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \" \",\n    \"testDescription\": \"Kiểm tra khoảng trắng trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot contain only whitespace\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.200Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"NULL_VALUE\",\n    \"testDescription\": \"Kiểm tra trường null targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot be null\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.221Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n    \"testDescription\": \"Kiểm tra độ dài targetId quá dài\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId exceeds maximum length\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.248Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"target@#$%^&*()\",\n    \"testDescription\": \"Kiểm tra ký tự đặc biệt trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid targetId format\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.272Z\\\"}\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"testDescription\": \"Like với UUID hợp lệ khác\",\n    \"expectedStatus\": 200.0,\n    \"expectedResult\": \"{\\\"message\\\": \\\"Liked successfully\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.291Z\\\"}\"\n  }\n]\n \n"},{"result":{"nanos":9395900,"startTime":1750434442796,"endTime":1750434442805,"millis":9.3959,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"print 'Đọc được ' + testData.length + ' test cases từ Excel sheet: ' + sheetName"},"stepLog":"22:47:22.805 [print] Đọc được 15 test cases từ Excel sheet: like \n"},{"result":{"nanos":23937400,"startTime":1750434442806,"endTime":1750434442830,"millis":23.9374,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def testResults = []"}},{"result":{"nanos":1564600,"startTime":1750434442830,"endTime":1750434442832,"millis":1.5646,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def globalBearerToken = config.bearerToken"}},{"result":{"nanos":1784300,"startTime":1750434442831,"endTime":1750434442833,"millis":1.7843,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"print 'Sử dụng global bearer token từ config:', globalBearerToken"},"stepLog":"22:47:22.832 [print] Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":9051800,"startTime":1750434442833,"endTime":1750434442842,"millis":9.0518,"status":"passed"},"step":{"endLine":79,"line":17,"prefix":"*","docString":"function(testCase, index) {\n  karate.log('Đang chạy test case #' + (index + 1) + ': ' + testCase.testDescription);\n        \n  var bearerToken = '';\n        \n  \/\/ Sử dụng bearer token từ test case hoặc global config\n  if (testCase.bearerToken && testCase.bearerToken.trim() !== '') {\n    if (testCase.bearerToken === 'NO_TOKEN') {\n      \/\/ TC4: Không có token\n      bearerToken = '';\n      karate.log('Test case không sử dụng token');\n    } else if (testCase.bearerToken === 'INVALID_TOKEN') {\n      \/\/ TC5: Token không hợp lệ\n      bearerToken = 'invalid_token_123';\n      karate.log('Test case sử dụng token không hợp lệ');\n    } else {\n      \/\/ Sử dụng token từ Excel nếu có\n      bearerToken = testCase.bearerToken;\n      karate.log('Sử dụng bearer token từ Excel:', bearerToken);\n    }\n  } else {\n    \/\/ Sử dụng global token từ config\n    bearerToken = globalBearerToken;\n    karate.log('Sử dụng global bearer token từ config:', bearerToken);\n  }\n        \n  \/\/ Gọi API like (type cố định là \"post\")\n  var response = karate.call('classpath:features\/helpers\/like-single-call.feature', {\n    bearerToken: bearerToken,\n    targetId: testCase.targetId || ''\n  });\n        \n  var actualStatus = response.actualStatus;\n  var actualResult = '';\n        \n  \/\/ Ghi response thực tế vào result\n  if (response.actualResponse) {\n    actualResult = JSON.stringify(response.actualResponse);\n  } else {\n    actualResult = 'No response body';\n  }\n        \n  \/\/ Kiểm tra xem kết quả có khớp với expected không (chỉ để log)\n  var isExpectedStatus = (actualStatus == testCase.expectedStatus);\n  if (!isExpectedStatus) {\n    karate.log('STATUS MISMATCH - Expected: ' + testCase.expectedStatus + ', Actual: ' + actualStatus);\n  }\n        \n  \/\/ Log chi tiết để debug\n  karate.log('Test Case Data:', testCase);\n  karate.log('Expected Status:', testCase.expectedStatus);\n  karate.log('Actual Status:', actualStatus);\n        \n  karate.log('Test case #' + (index + 1) + ' - Status: ' + actualStatus + ', Result: ' + actualResult);\n        \n  return {\n    responseStatus: actualStatus,\n    result: actualResult\n  };\n}","index":0,"text":"def runTest ="}},{"result":{"nanos":1248500,"startTime":1750434442843,"endTime":1750434442844,"millis":1.2485,"status":"passed"},"step":{"line":81,"prefix":"*","index":1,"text":"print 'Bắt đầu chạy từng test case...'"},"stepLog":"22:47:22.844 [print] Bắt đầu chạy từng test case... \n"},{"result":{"nanos":2747751400,"startTime":1750434442844,"endTime":1750434445592,"millis":2747.7514,"status":"passed"},"step":{"line":82,"prefix":"*","index":2,"text":"def results = karate.map(testData, runTest)"},"stepLog":"22:47:25.590 STATUS MISMATCH - Expected: 200, Actual: 201 \n22:47:25.591 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"testDescription\": \"Like với UUID hợp lệ khác\",\n  \"expectedStatus\": 200.0,\n  \"expectedResult\": \"{\\\"message\\\": \\\"Liked successfully\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.291Z\\\"}\"\n}\n \n22:47:25.591 Expected Status: 200.0 \n22:47:25.591 Actual Status: 201 \n22:47:25.591 Test case #15 - Status: 201, Result: {\"message\":\"Đã yêu thích\",\"statusCode\":201,\"status\":\"success\",\"data\":{\"id\":\"0bb7ce42-608b-4463-8c86-e51ac4c9f6c0\",\"userId\":\"08515b05-2d3e-4789-ad60-db35525a4970\",\"targetId\":\"550e8400-e29b-41d4-a716-446655440000\",\"type\":\"post\",\"createdAt\":\"2025-06-20T15:47:25.473Z\"}} \n","callResults":[{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":632.4714,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":"c8161412-bc98-49ec-88ff-57b99cc2ce67"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":9519300,"startTime":1750434442878,"endTime":1750434442888,"millis":9.5193,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:22.852 Đang chạy test case #1: Like post hợp lệ \n22:47:22.853 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:22.884 karate.env system property was: null \n"},{"result":{"nanos":1596600,"startTime":1750434442888,"endTime":1750434442890,"millis":1.5966,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":6521700,"startTime":1750434442890,"endTime":1750434442897,"millis":6.5217,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":6745900,"startTime":1750434442896,"endTime":1750434442903,"millis":6.7459,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":4306100,"startTime":1750434442903,"endTime":1750434442907,"millis":4.3061,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":608700,"startTime":1750434442908,"endTime":1750434442909,"millis":0.6087,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":597769300,"startTime":1750434442909,"endTime":1750434443507,"millis":597.7693,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:23.252 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 65\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"type\": \"post\"\n}\n\n\n22:47:23.504 response time in milliseconds: 248\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 270\n1 < ETag: W\/\"10e-RK40J9llM79uZ\/G5yB7EQ8osW9o\"\n1 < Date: Fri, 20 Jun 2025 15:47:23 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"b04814d5-b226-4f85-bd19-4f4d4974b4ff\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:23.340Z\"\n  }\n}\n\n\n"},{"result":{"nanos":616400,"startTime":1750434443507,"endTime":1750434443508,"millis":0.6164,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":342700,"startTime":1750434443507,"endTime":1750434443507,"millis":0.3427,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":1479800,"startTime":1750434443508,"endTime":1750434443509,"millis":1.4798,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:23.509 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":1258100,"startTime":1750434443510,"endTime":1750434443511,"millis":1.2581,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:23.510 [print] Request body: {\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":1706800,"startTime":1750434443510,"endTime":1750434443512,"millis":1.7068,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:23.513 [print] Response status: 201 body: {\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"b04814d5-b226-4f85-bd19-4f4d4974b4ff\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:23.340Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":632.4714,"startTime":1750434442878,"failed":false,"refId":"[1:3]","endTime":1750434443513,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":61.182,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":""},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":5477200,"startTime":1750434443561,"endTime":1750434443566,"millis":5.4772,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:23.540 STATUS MISMATCH - Expected: 200, Actual: 201 \n22:47:23.541 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"testDescription\": \"Like post hợp lệ\",\n  \"expectedStatus\": 200.0,\n  \"expectedResult\": \"{\\\"message\\\": \\\"Liked successfully\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:27.846Z\\\"}\"\n}\n \n22:47:23.541 Expected Status: 200.0 \n22:47:23.542 Actual Status: 201 \n22:47:23.542 Test case #1 - Status: 201, Result: {\"message\":\"Đã yêu thích\",\"statusCode\":201,\"status\":\"success\",\"data\":{\"id\":\"b04814d5-b226-4f85-bd19-4f4d4974b4ff\",\"userId\":\"08515b05-2d3e-4789-ad60-db35525a4970\",\"targetId\":\"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\"type\":\"post\",\"createdAt\":\"2025-06-20T15:47:23.340Z\"}} \n22:47:23.544 Đang chạy test case #2: Thiếu trường targetId \n22:47:23.544 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:23.565 karate.env system property was: null \n"},{"result":{"nanos":603000,"startTime":1750434443567,"endTime":1750434443568,"millis":0.603,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":798100,"startTime":1750434443568,"endTime":1750434443569,"millis":0.7981,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":1078500,"startTime":1750434443569,"endTime":1750434443570,"millis":1.0785,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":847300,"startTime":1750434443570,"endTime":1750434443571,"millis":0.8473,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":371700,"startTime":1750434443571,"endTime":1750434443571,"millis":0.3717,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":49374800,"startTime":1750434443572,"endTime":1750434443621,"millis":49.3748,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:23.574 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 29\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"\",\n  \"type\": \"post\"\n}\n\n\n22:47:23.620 response time in milliseconds: 44\n1 < 403\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 134\n1 < ETag: W\/\"86-du5\/5dkt3nXGsyGDtdkjWHN71ak\"\n1 < Date: Fri, 20 Jun 2025 15:47:23 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 403,\n  \"message\": \"Thiếu thông tin cần thiết\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-20T15:47:23.617Z\"\n}\n\n\n"},{"result":{"nanos":581100,"startTime":1750434443622,"endTime":1750434443623,"millis":0.5811,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":181400,"startTime":1750434443622,"endTime":1750434443622,"millis":0.1814,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":766200,"startTime":1750434443623,"endTime":1750434443624,"millis":0.7662,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:23.623 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":527600,"startTime":1750434443623,"endTime":1750434443624,"millis":0.5276,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:23.624 [print] Request body: {\n  \"targetId\": \"\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":575100,"startTime":1750434443624,"endTime":1750434443625,"millis":0.5751,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:23.624 [print] Response status: 403 body: {\n  \"success\": false,\n  \"statusCode\": 403,\n  \"message\": \"Thiếu thông tin cần thiết\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-20T15:47:23.617Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":61.182,"startTime":1750434443561,"failed":false,"refId":"[1:3]","endTime":1750434443624,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":64.2451,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":""},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3729800,"startTime":1750434443640,"endTime":1750434443644,"millis":3.7298,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:23.628 STATUS MISMATCH - Expected: 400, Actual: 403 \n22:47:23.628 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"\",\n  \"testDescription\": \"Thiếu trường targetId\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"targetId is required\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:27.913Z\\\"}\"\n}\n \n22:47:23.628 Expected Status: 400.0 \n22:47:23.628 Actual Status: 403 \n22:47:23.629 Test case #2 - Status: 403, Result: {\"success\":false,\"statusCode\":403,\"message\":\"Thiếu thông tin cần thiết\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-20T15:47:23.617Z\"} \n22:47:23.630 Đang chạy test case #3: targetId rỗng \n22:47:23.631 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:23.643 karate.env system property was: null \n"},{"result":{"nanos":453100,"startTime":1750434443645,"endTime":1750434443645,"millis":0.4531,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":916200,"startTime":1750434443645,"endTime":1750434443646,"millis":0.9162,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":1141600,"startTime":1750434443646,"endTime":1750434443647,"millis":1.1416,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":1289500,"startTime":1750434443648,"endTime":1750434443649,"millis":1.2895,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":322900,"startTime":1750434443648,"endTime":1750434443648,"millis":0.3229,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":53769200,"startTime":1750434443650,"endTime":1750434443704,"millis":53.7692,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:23.653 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 29\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"\",\n  \"type\": \"post\"\n}\n\n\n22:47:23.702 response time in milliseconds: 49\n1 < 403\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 134\n1 < ETag: W\/\"86-blAm0j1aTwjy06nW9Y4MamFk5n0\"\n1 < Date: Fri, 20 Jun 2025 15:47:23 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 403,\n  \"message\": \"Thiếu thông tin cần thiết\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-20T15:47:23.698Z\"\n}\n\n\n"},{"result":{"nanos":312100,"startTime":1750434443704,"endTime":1750434443704,"millis":0.3121,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":224800,"startTime":1750434443704,"endTime":1750434443704,"millis":0.2248,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":821500,"startTime":1750434443704,"endTime":1750434443705,"millis":0.8215,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:23.705 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":524900,"startTime":1750434443705,"endTime":1750434443706,"millis":0.5249,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:23.705 [print] Request body: {\n  \"targetId\": \"\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":739500,"startTime":1750434443705,"endTime":1750434443706,"millis":0.7395,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:23.706 [print] Response status: 403 body: {\n  \"success\": false,\n  \"statusCode\": 403,\n  \"message\": \"Thiếu thông tin cần thiết\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-20T15:47:23.698Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":64.2451,"startTime":1750434443640,"failed":false,"refId":"[1:3]","endTime":1750434443706,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":33.6274,"callArg":{"bearerToken":"","targetId":"c8161412-bc98-49ec-88ff-57b99cc2ce67"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3003200,"startTime":1750434443720,"endTime":1750434443723,"millis":3.0032,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:23.708 STATUS MISMATCH - Expected: 400, Actual: 403 \n22:47:23.708 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"\",\n  \"testDescription\": \"targetId rỗng\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot be empty\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:27.942Z\\\"}\"\n}\n \n22:47:23.708 Expected Status: 400.0 \n22:47:23.708 Actual Status: 403 \n22:47:23.708 Test case #3 - Status: 403, Result: {\"success\":false,\"statusCode\":403,\"message\":\"Thiếu thông tin cần thiết\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-20T15:47:23.698Z\"} \n22:47:23.709 Đang chạy test case #4: Thiếu token xác thực \n22:47:23.709 Test case không sử dụng token \n22:47:23.722 karate.env system property was: null \n"},{"result":{"nanos":260900,"startTime":1750434443723,"endTime":1750434443723,"millis":0.2609,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":2753100,"startTime":1750434443723,"endTime":1750434443726,"millis":2.7531,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":15509100,"startTime":1750434443727,"endTime":1750434443743,"millis":15.5091,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":807900,"startTime":1750434443742,"endTime":1750434443743,"millis":0.8079,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":140300,"startTime":1750434443743,"endTime":1750434443743,"millis":0.1403,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":9114700,"startTime":1750434443743,"endTime":1750434443752,"millis":9.1147,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:23.745 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: #(Authorization)\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 65\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"type\": \"post\"\n}\n\n\n22:47:23.752 response time in milliseconds: 5\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 114\n1 < ETag: W\/\"72-SOwm\/\/G6J0l913C2BRYGcqI+Bn0\"\n1 < Date: Fri, 20 Jun 2025 15:47:23 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-20T15:47:23.749Z\"\n}\n\n\n"},{"result":{"nanos":273800,"startTime":1750434443753,"endTime":1750434443753,"millis":0.2738,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":135300,"startTime":1750434443753,"endTime":1750434443753,"millis":0.1353,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":757800,"startTime":1750434443753,"endTime":1750434443754,"millis":0.7578,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:23.754 [print] Calling like API với bearerToken:  \n"},{"result":{"nanos":426000,"startTime":1750434443754,"endTime":1750434443754,"millis":0.426,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:23.754 [print] Request body: {\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":445300,"startTime":1750434443754,"endTime":1750434443754,"millis":0.4453,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:23.754 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-20T15:47:23.749Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":33.6274,"startTime":1750434443720,"failed":false,"refId":"[1:3]","endTime":1750434443754,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":21.135,"callArg":{"bearerToken":"invalid_token_123","targetId":"c8161412-bc98-49ec-88ff-57b99cc2ce67"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":4708400,"startTime":1750434443771,"endTime":1750434443776,"millis":4.7084,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:23.756 Test Case Data: {\n  \"bearerToken\": \"NO_TOKEN\",\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"testDescription\": \"Thiếu token xác thực\",\n  \"expectedStatus\": 401.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:27.995Z\\\"}\"\n}\n \n22:47:23.756 Expected Status: 401.0 \n22:47:23.756 Actual Status: 401 \n22:47:23.756 Test case #4 - Status: 401, Result: {\"success\":false,\"statusCode\":401,\"message\":\"Unauthorized\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-20T15:47:23.749Z\"} \n22:47:23.757 Đang chạy test case #5: Token không hợp lệ \n22:47:23.758 Test case sử dụng token không hợp lệ \n22:47:23.774 karate.env system property was: null \n"},{"result":{"nanos":1060600,"startTime":1750434443776,"endTime":1750434443777,"millis":1.0606,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":738800,"startTime":1750434443777,"endTime":1750434443778,"millis":0.7388,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":751200,"startTime":1750434443778,"endTime":1750434443779,"millis":0.7512,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":694200,"startTime":1750434443779,"endTime":1750434443780,"millis":0.6942,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":216000,"startTime":1750434443779,"endTime":1750434443779,"millis":0.216,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":10430800,"startTime":1750434443780,"endTime":1750434443790,"millis":10.4308,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:23.782 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer invalid_token_123\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 65\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"type\": \"post\"\n}\n\n\n22:47:23.790 response time in milliseconds: 6\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 114\n1 < ETag: W\/\"72-wOMvOK4\/itnJd40IsB7+Sf4mWqE\"\n1 < Date: Fri, 20 Jun 2025 15:47:23 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-20T15:47:23.786Z\"\n}\n\n\n"},{"result":{"nanos":373800,"startTime":1750434443791,"endTime":1750434443791,"millis":0.3738,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":183500,"startTime":1750434443791,"endTime":1750434443791,"millis":0.1835,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":1234200,"startTime":1750434443791,"endTime":1750434443792,"millis":1.2342,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:23.792 [print] Calling like API với bearerToken: invalid_token_123 \n"},{"result":{"nanos":430600,"startTime":1750434443793,"endTime":1750434443793,"millis":0.4306,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:23.793 [print] Request body: {\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":312900,"startTime":1750434443793,"endTime":1750434443793,"millis":0.3129,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:23.793 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-20T15:47:23.786Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":21.135,"startTime":1750434443771,"failed":false,"refId":"[1:3]","endTime":1750434443793,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":186.4462,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":"nonexistent-id-123"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2630400,"startTime":1750434443806,"endTime":1750434443809,"millis":2.6304,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:23.794 Test Case Data: {\n  \"bearerToken\": \"INVALID_TOKEN\",\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"testDescription\": \"Token không hợp lệ\",\n  \"expectedStatus\": 401.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid or expired token\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.027Z\\\"}\"\n}\n \n22:47:23.795 Expected Status: 401.0 \n22:47:23.795 Actual Status: 401 \n22:47:23.796 Test case #5 - Status: 401, Result: {\"success\":false,\"statusCode\":401,\"message\":\"Unauthorized\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-20T15:47:23.786Z\"} \n22:47:23.797 Đang chạy test case #6: targetId không tồn tại \n22:47:23.798 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:23.808 karate.env system property was: null \n"},{"result":{"nanos":289200,"startTime":1750434443808,"endTime":1750434443808,"millis":0.2892,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":464600,"startTime":1750434443809,"endTime":1750434443809,"millis":0.4646,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":416600,"startTime":1750434443809,"endTime":1750434443809,"millis":0.4166,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":407600,"startTime":1750434443810,"endTime":1750434443810,"millis":0.4076,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":92500,"startTime":1750434443810,"endTime":1750434443810,"millis":0.0925,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":180746700,"startTime":1750434443810,"endTime":1750434443991,"millis":180.7467,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:23.811 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 47\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"nonexistent-id-123\",\n  \"type\": \"post\"\n}\n\n\n22:47:23.990 response time in milliseconds: 179\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 252\n1 < ETag: W\/\"fc-ubaQmOIt3IPrytzwSkKAJs37lhU\"\n1 < Date: Fri, 20 Jun 2025 15:47:23 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"bba00302-f69d-4f48-87f5-606657e3cd0e\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"nonexistent-id-123\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:23.875Z\"\n  }\n}\n\n\n"},{"result":{"nanos":176200,"startTime":1750434443992,"endTime":1750434443992,"millis":0.1762,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":90400,"startTime":1750434443992,"endTime":1750434443992,"millis":0.0904,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":458600,"startTime":1750434443992,"endTime":1750434443992,"millis":0.4586,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:23.992 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":260400,"startTime":1750434443993,"endTime":1750434443993,"millis":0.2604,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:23.993 [print] Request body: {\n  \"targetId\": \"nonexistent-id-123\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":413000,"startTime":1750434443993,"endTime":1750434443993,"millis":0.413,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:23.993 [print] Response status: 201 body: {\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"bba00302-f69d-4f48-87f5-606657e3cd0e\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"nonexistent-id-123\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:23.875Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":186.4462,"startTime":1750434443806,"failed":false,"refId":"[1:3]","endTime":1750434443993,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":70.3654,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":"c8161412-bc98-49ec-88ff-57b99cc2ce67"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3434300,"startTime":1750434444005,"endTime":1750434444008,"millis":3.4343,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:23.994 STATUS MISMATCH - Expected: 404, Actual: 201 \n22:47:23.995 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"nonexistent-id-123\",\n  \"testDescription\": \"targetId không tồn tại\",\n  \"expectedStatus\": 404.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Target not found\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.051Z\\\"}\"\n}\n \n22:47:23.995 Expected Status: 404.0 \n22:47:23.995 Actual Status: 201 \n22:47:23.995 Test case #6 - Status: 201, Result: {\"message\":\"Đã yêu thích\",\"statusCode\":201,\"status\":\"success\",\"data\":{\"id\":\"bba00302-f69d-4f48-87f5-606657e3cd0e\",\"userId\":\"08515b05-2d3e-4789-ad60-db35525a4970\",\"targetId\":\"nonexistent-id-123\",\"type\":\"post\",\"createdAt\":\"2025-06-20T15:47:23.875Z\"}} \n22:47:23.996 Đang chạy test case #7: Đã like trước đó \n22:47:23.996 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:24.008 karate.env system property was: null \n"},{"result":{"nanos":316700,"startTime":1750434444009,"endTime":1750434444009,"millis":0.3167,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":337500,"startTime":1750434444009,"endTime":1750434444009,"millis":0.3375,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":318600,"startTime":1750434444010,"endTime":1750434444010,"millis":0.3186,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":183800,"startTime":1750434444010,"endTime":1750434444010,"millis":0.1838,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":85300,"startTime":1750434444010,"endTime":1750434444010,"millis":0.0853,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":63354200,"startTime":1750434444010,"endTime":1750434444073,"millis":63.3542,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:24.011 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 65\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"type\": \"post\"\n}\n\n\n22:47:24.073 response time in milliseconds: 61\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 279\n1 < ETag: W\/\"117-4X3Bv6OI16Y3CTfWDvr\/57aiM5M\"\n1 < Date: Fri, 20 Jun 2025 15:47:24 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"b04814d5-b226-4f85-bd19-4f4d4974b4ff\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:23.340Z\"\n  }\n}\n\n\n"},{"result":{"nanos":152800,"startTime":1750434444073,"endTime":1750434444073,"millis":0.1528,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":344900,"startTime":1750434444074,"endTime":1750434444074,"millis":0.3449,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":665600,"startTime":1750434444074,"endTime":1750434444075,"millis":0.6656,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:24.074 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":581100,"startTime":1750434444074,"endTime":1750434444075,"millis":0.5811,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:24.076 [print] Request body: {\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":590600,"startTime":1750434444076,"endTime":1750434444077,"millis":0.5906,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:24.076 [print] Response status: 201 body: {\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"b04814d5-b226-4f85-bd19-4f4d4974b4ff\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:23.340Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":70.3654,"startTime":1750434444005,"failed":false,"refId":"[1:3]","endTime":1750434444076,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":176.9616,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":"invalid_id!@#"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3818500,"startTime":1750434444084,"endTime":1750434444088,"millis":3.8185,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:24.078 STATUS MISMATCH - Expected: 200, Actual: 201 \n22:47:24.078 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n  \"testDescription\": \"Đã like trước đó\",\n  \"expectedStatus\": 200.0,\n  \"expectedResult\": \"{\\\"message\\\": \\\"Đã thích trước đó\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.073Z\\\"}\"\n}\n \n22:47:24.078 Expected Status: 200.0 \n22:47:24.078 Actual Status: 201 \n22:47:24.078 Test case #7 - Status: 201, Result: {\"message\":\"Đã thích trước đó\",\"statusCode\":200,\"status\":\"success\",\"data\":{\"id\":\"b04814d5-b226-4f85-bd19-4f4d4974b4ff\",\"userId\":\"08515b05-2d3e-4789-ad60-db35525a4970\",\"targetId\":\"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\"type\":\"post\",\"createdAt\":\"2025-06-20T15:47:23.340Z\"}} \n22:47:24.078 Đang chạy test case #8: targetId không hợp lệ format \n22:47:24.079 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:24.087 karate.env system property was: null \n"},{"result":{"nanos":293700,"startTime":1750434444088,"endTime":1750434444088,"millis":0.2937,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":255800,"startTime":1750434444088,"endTime":1750434444088,"millis":0.2558,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":351800,"startTime":1750434444090,"endTime":1750434444090,"millis":0.3518,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":180100,"startTime":1750434444090,"endTime":1750434444090,"millis":0.1801,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":53800,"startTime":1750434444090,"endTime":1750434444090,"millis":0.0538,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":170784400,"startTime":1750434444090,"endTime":1750434444261,"millis":170.7844,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:24.090 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 42\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"invalid_id!@#\",\n  \"type\": \"post\"\n}\n\n\n22:47:24.260 response time in milliseconds: 169\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 247\n1 < ETag: W\/\"f7-fGI+b2zT2Pe34qJ\/qR7M2ObXC14\"\n1 < Date: Fri, 20 Jun 2025 15:47:24 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"f185040a-e1c8-4962-89d2-b8357a2d7635\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"invalid_id!@#\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:24.149Z\"\n  }\n}\n\n\n"},{"result":{"nanos":155800,"startTime":1750434444260,"endTime":1750434444260,"millis":0.1558,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":86000,"startTime":1750434444260,"endTime":1750434444260,"millis":0.086,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":397100,"startTime":1750434444262,"endTime":1750434444262,"millis":0.3971,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:24.262 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":256500,"startTime":1750434444262,"endTime":1750434444262,"millis":0.2565,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:24.262 [print] Request body: {\n  \"targetId\": \"invalid_id!@#\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":328100,"startTime":1750434444262,"endTime":1750434444262,"millis":0.3281,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:24.262 [print] Response status: 201 body: {\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"f185040a-e1c8-4962-89d2-b8357a2d7635\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"invalid_id!@#\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:24.149Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":176.9616,"startTime":1750434444084,"failed":false,"refId":"[1:3]","endTime":1750434444263,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":181.6935,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":"target123' OR '1'='1"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1899500,"startTime":1750434444270,"endTime":1750434444272,"millis":1.8995,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:24.263 STATUS MISMATCH - Expected: 400, Actual: 201 \n22:47:24.263 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"invalid_id!@#\",\n  \"testDescription\": \"targetId không hợp lệ format\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid targetId format\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.094Z\\\"}\"\n}\n \n22:47:24.263 Expected Status: 400.0 \n22:47:24.263 Actual Status: 201 \n22:47:24.263 Test case #8 - Status: 201, Result: {\"message\":\"Đã yêu thích\",\"statusCode\":201,\"status\":\"success\",\"data\":{\"id\":\"f185040a-e1c8-4962-89d2-b8357a2d7635\",\"userId\":\"08515b05-2d3e-4789-ad60-db35525a4970\",\"targetId\":\"invalid_id!@#\",\"type\":\"post\",\"createdAt\":\"2025-06-20T15:47:24.149Z\"}} \n22:47:24.264 Đang chạy test case #9: Kiểm tra SQL Injection trong targetId \n22:47:24.264 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:24.271 karate.env system property was: null \n"},{"result":{"nanos":146500,"startTime":1750434444272,"endTime":1750434444272,"millis":0.1465,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":170400,"startTime":1750434444272,"endTime":1750434444272,"millis":0.1704,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":235200,"startTime":1750434444272,"endTime":1750434444272,"millis":0.2352,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":153400,"startTime":1750434444272,"endTime":1750434444272,"millis":0.1534,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":46000,"startTime":1750434444272,"endTime":1750434444272,"millis":0.046,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":177869200,"startTime":1750434444272,"endTime":1750434444450,"millis":177.8692,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:24.273 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 49\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"target123' OR '1'='1\",\n  \"type\": \"post\"\n}\n\n\n22:47:24.450 response time in milliseconds: 176\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 254\n1 < ETag: W\/\"fe-jNfwwnPErPsldPWZrPN\/w0B9G4Q\"\n1 < Date: Fri, 20 Jun 2025 15:47:24 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"b28f1077-b7f1-4202-9245-1974f5036d1b\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"target123' OR '1'='1\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:24.337Z\"\n  }\n}\n\n\n"},{"result":{"nanos":174100,"startTime":1750434444451,"endTime":1750434444451,"millis":0.1741,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":74300,"startTime":1750434444451,"endTime":1750434444451,"millis":0.0743,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":456400,"startTime":1750434444451,"endTime":1750434444451,"millis":0.4564,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:24.452 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":237800,"startTime":1750434444452,"endTime":1750434444452,"millis":0.2378,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:24.452 [print] Request body: {\n  \"targetId\": \"target123' OR '1'='1\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":230700,"startTime":1750434444452,"endTime":1750434444452,"millis":0.2307,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:24.452 [print] Response status: 201 body: {\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"b28f1077-b7f1-4202-9245-1974f5036d1b\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"target123' OR '1'='1\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:24.337Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":181.6935,"startTime":1750434444270,"failed":false,"refId":"[1:3]","endTime":1750434444452,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":186.2108,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":"<script>alert(\"xss\")<\/script>"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2722900,"startTime":1750434444462,"endTime":1750434444465,"millis":2.7229,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:24.453 STATUS MISMATCH - Expected: 400, Actual: 201 \n22:47:24.453 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"target123' OR '1'='1\",\n  \"testDescription\": \"Kiểm tra SQL Injection trong targetId\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.142Z\\\"}\"\n}\n \n22:47:24.453 Expected Status: 400.0 \n22:47:24.453 Actual Status: 201 \n22:47:24.454 Test case #9 - Status: 201, Result: {\"message\":\"Đã yêu thích\",\"statusCode\":201,\"status\":\"success\",\"data\":{\"id\":\"b28f1077-b7f1-4202-9245-1974f5036d1b\",\"userId\":\"08515b05-2d3e-4789-ad60-db35525a4970\",\"targetId\":\"target123' OR '1'='1\",\"type\":\"post\",\"createdAt\":\"2025-06-20T15:47:24.337Z\"}} \n22:47:24.454 Đang chạy test case #10: Kiểm tra XSS trong targetId \n22:47:24.454 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:24.464 karate.env system property was: null \n"},{"result":{"nanos":344500,"startTime":1750434444465,"endTime":1750434444465,"millis":0.3445,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":424400,"startTime":1750434444465,"endTime":1750434444465,"millis":0.4244,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":400600,"startTime":1750434444465,"endTime":1750434444465,"millis":0.4006,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":287000,"startTime":1750434444466,"endTime":1750434444466,"millis":0.287,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":125100,"startTime":1750434444466,"endTime":1750434444466,"millis":0.1251,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":180992600,"startTime":1750434444466,"endTime":1750434444647,"millis":180.9926,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:24.468 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 61\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"<script>alert(\\\"xss\\\")<\/script>\",\n  \"type\": \"post\"\n}\n\n\n22:47:24.647 response time in milliseconds: 178\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 265\n1 < ETag: W\/\"109-eMWjRsuann7IXRQX52GQZI1h0\/U\"\n1 < Date: Fri, 20 Jun 2025 15:47:24 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"a058d824-c290-4560-87bc-bb1f1fe7f9fe\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"<script>alert(\\\"xss\\\")<\/script>\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:24.534Z\"\n  }\n}\n\n\n"},{"result":{"nanos":123900,"startTime":1750434444647,"endTime":1750434444647,"millis":0.1239,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":71700,"startTime":1750434444648,"endTime":1750434444648,"millis":0.0717,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":332600,"startTime":1750434444648,"endTime":1750434444648,"millis":0.3326,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:24.648 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":154700,"startTime":1750434444648,"endTime":1750434444648,"millis":0.1547,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:24.648 [print] Request body: {\n  \"targetId\": \"<script>alert(\\\"xss\\\")<\/script>\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":230800,"startTime":1750434444648,"endTime":1750434444648,"millis":0.2308,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:24.648 [print] Response status: 201 body: {\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"a058d824-c290-4560-87bc-bb1f1fe7f9fe\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"<script>alert(\\\"xss\\\")<\/script>\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:24.534Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":186.2108,"startTime":1750434444462,"failed":false,"refId":"[1:3]","endTime":1750434444648,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":177.2456,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":" "},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3179900,"startTime":1750434444654,"endTime":1750434444657,"millis":3.1799,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:24.649 STATUS MISMATCH - Expected: 400, Actual: 201 \n22:47:24.649 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"<script>alert(\\\"xss\\\")<\/script>\",\n  \"testDescription\": \"Kiểm tra XSS trong targetId\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.178Z\\\"}\"\n}\n \n22:47:24.649 Expected Status: 400.0 \n22:47:24.649 Actual Status: 201 \n22:47:24.649 Test case #10 - Status: 201, Result: {\"message\":\"Đã yêu thích\",\"statusCode\":201,\"status\":\"success\",\"data\":{\"id\":\"a058d824-c290-4560-87bc-bb1f1fe7f9fe\",\"userId\":\"08515b05-2d3e-4789-ad60-db35525a4970\",\"targetId\":\"<script>alert(\\\"xss\\\")<\/script>\",\"type\":\"post\",\"createdAt\":\"2025-06-20T15:47:24.534Z\"}} \n22:47:24.649 Đang chạy test case #11: Kiểm tra khoảng trắng trong targetId \n22:47:24.649 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:24.657 karate.env system property was: null \n"},{"result":{"nanos":404800,"startTime":1750434444658,"endTime":1750434444658,"millis":0.4048,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":682200,"startTime":1750434444668,"endTime":1750434444669,"millis":0.6822,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":312000,"startTime":1750434444670,"endTime":1750434444670,"millis":0.312,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":149200,"startTime":1750434444670,"endTime":1750434444670,"millis":0.1492,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":166500,"startTime":1750434444670,"endTime":1750434444670,"millis":0.1665,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":171128200,"startTime":1750434444670,"endTime":1750434444841,"millis":171.1282,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:24.672 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 30\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \" \",\n  \"type\": \"post\"\n}\n\n\n22:47:24.841 response time in milliseconds: 168\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 235\n1 < ETag: W\/\"eb-NcPjPjE4lXYrvHSaTJ\/xYJ+kaWw\"\n1 < Date: Fri, 20 Jun 2025 15:47:24 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"9716cd50-4ae8-471f-9d4c-6a26cbbd0e39\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \" \",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:24.729Z\"\n  }\n}\n\n\n"},{"result":{"nanos":204800,"startTime":1750434444841,"endTime":1750434444841,"millis":0.2048,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":136200,"startTime":1750434444842,"endTime":1750434444842,"millis":0.1362,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":437800,"startTime":1750434444842,"endTime":1750434444842,"millis":0.4378,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:24.842 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":168300,"startTime":1750434444842,"endTime":1750434444842,"millis":0.1683,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:24.842 [print] Request body: {\n  \"targetId\": \" \",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":275700,"startTime":1750434444843,"endTime":1750434444843,"millis":0.2757,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:24.843 [print] Response status: 201 body: {\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"9716cd50-4ae8-471f-9d4c-6a26cbbd0e39\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \" \",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:24.729Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":177.2456,"startTime":1750434444654,"failed":false,"refId":"[1:3]","endTime":1750434444843,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":180.7495,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":"NULL_VALUE"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1586900,"startTime":1750434444850,"endTime":1750434444852,"millis":1.5869,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:24.843 STATUS MISMATCH - Expected: 400, Actual: 201 \n22:47:24.844 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \" \",\n  \"testDescription\": \"Kiểm tra khoảng trắng trong targetId\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot contain only whitespace\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.200Z\\\"}\"\n}\n \n22:47:24.844 Expected Status: 400.0 \n22:47:24.844 Actual Status: 201 \n22:47:24.844 Test case #11 - Status: 201, Result: {\"message\":\"Đã yêu thích\",\"statusCode\":201,\"status\":\"success\",\"data\":{\"id\":\"9716cd50-4ae8-471f-9d4c-6a26cbbd0e39\",\"userId\":\"08515b05-2d3e-4789-ad60-db35525a4970\",\"targetId\":\" \",\"type\":\"post\",\"createdAt\":\"2025-06-20T15:47:24.729Z\"}} \n22:47:24.844 Đang chạy test case #12: Kiểm tra trường null targetId \n22:47:24.845 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:24.851 karate.env system property was: null \n"},{"result":{"nanos":109500,"startTime":1750434444851,"endTime":1750434444851,"millis":0.1095,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":170800,"startTime":1750434444853,"endTime":1750434444853,"millis":0.1708,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":188000,"startTime":1750434444853,"endTime":1750434444853,"millis":0.188,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":127500,"startTime":1750434444853,"endTime":1750434444853,"millis":0.1275,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":41700,"startTime":1750434444853,"endTime":1750434444853,"millis":0.0417,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":177600300,"startTime":1750434444853,"endTime":1750434445031,"millis":177.6003,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:24.854 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"NULL_VALUE\",\n  \"type\": \"post\"\n}\n\n\n22:47:25.030 response time in milliseconds: 176\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 244\n1 < ETag: W\/\"f4-PKqE6DZEOMbJlBT6iD0O9LkIzcg\"\n1 < Date: Fri, 20 Jun 2025 15:47:25 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"03f5c9e3-10d0-4bd6-a9de-e25ec496b7a3\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"NULL_VALUE\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:24.917Z\"\n  }\n}\n\n\n"},{"result":{"nanos":117000,"startTime":1750434445030,"endTime":1750434445030,"millis":0.117,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":72600,"startTime":1750434445030,"endTime":1750434445030,"millis":0.0726,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":287200,"startTime":1750434445030,"endTime":1750434445030,"millis":0.2872,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:25.031 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":221900,"startTime":1750434445031,"endTime":1750434445031,"millis":0.2219,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:25.031 [print] Request body: {\n  \"targetId\": \"NULL_VALUE\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":226100,"startTime":1750434445031,"endTime":1750434445031,"millis":0.2261,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:25.031 [print] Response status: 201 body: {\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"03f5c9e3-10d0-4bd6-a9de-e25ec496b7a3\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"NULL_VALUE\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:24.917Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":180.7495,"startTime":1750434444850,"failed":false,"refId":"[1:3]","endTime":1750434445031,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":184.0048,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1885000,"startTime":1750434445038,"endTime":1750434445040,"millis":1.885,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:25.032 STATUS MISMATCH - Expected: 400, Actual: 201 \n22:47:25.032 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"NULL_VALUE\",\n  \"testDescription\": \"Kiểm tra trường null targetId\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot be null\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.221Z\\\"}\"\n}\n \n22:47:25.032 Expected Status: 400.0 \n22:47:25.032 Actual Status: 201 \n22:47:25.032 Test case #12 - Status: 201, Result: {\"message\":\"Đã yêu thích\",\"statusCode\":201,\"status\":\"success\",\"data\":{\"id\":\"03f5c9e3-10d0-4bd6-a9de-e25ec496b7a3\",\"userId\":\"08515b05-2d3e-4789-ad60-db35525a4970\",\"targetId\":\"NULL_VALUE\",\"type\":\"post\",\"createdAt\":\"2025-06-20T15:47:24.917Z\"}} \n22:47:25.033 Đang chạy test case #13: Kiểm tra độ dài targetId quá dài \n22:47:25.033 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:25.039 karate.env system property was: null \n"},{"result":{"nanos":187600,"startTime":1750434445040,"endTime":1750434445040,"millis":0.1876,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":197500,"startTime":1750434445040,"endTime":1750434445040,"millis":0.1975,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":228700,"startTime":1750434445040,"endTime":1750434445040,"millis":0.2287,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":153000,"startTime":1750434445041,"endTime":1750434445041,"millis":0.153,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":40100,"startTime":1750434445041,"endTime":1750434445041,"millis":0.0401,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":180373400,"startTime":1750434445041,"endTime":1750434445221,"millis":180.3734,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:25.042 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 529\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n  \"type\": \"post\"\n}\n\n\n22:47:25.221 response time in milliseconds: 178\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 734\n1 < ETag: W\/\"2de-upqQuIOK2yH87Ke9iUUhQIOJuBg\"\n1 < Date: Fri, 20 Jun 2025 15:47:25 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"91a7e66c-e271-45db-834c-de19b6bc4665\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:25.101Z\"\n  }\n}\n\n\n"},{"result":{"nanos":109400,"startTime":1750434445221,"endTime":1750434445221,"millis":0.1094,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":55400,"startTime":1750434445221,"endTime":1750434445221,"millis":0.0554,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":349100,"startTime":1750434445221,"endTime":1750434445221,"millis":0.3491,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:25.223 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":179100,"startTime":1750434445223,"endTime":1750434445223,"millis":0.1791,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:25.223 [print] Request body: {\n  \"targetId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":246500,"startTime":1750434445223,"endTime":1750434445223,"millis":0.2465,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:25.223 [print] Response status: 201 body: {\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"91a7e66c-e271-45db-834c-de19b6bc4665\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:25.101Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":184.0048,"startTime":1750434445038,"failed":false,"refId":"[1:3]","endTime":1750434445223,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":172.4976,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":"target@#$%^&*()"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1719700,"startTime":1750434445230,"endTime":1750434445232,"millis":1.7197,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:25.224 STATUS MISMATCH - Expected: 400, Actual: 201 \n22:47:25.224 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n  \"testDescription\": \"Kiểm tra độ dài targetId quá dài\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"targetId exceeds maximum length\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.248Z\\\"}\"\n}\n \n22:47:25.224 Expected Status: 400.0 \n22:47:25.224 Actual Status: 201 \n22:47:25.224 Test case #13 - Status: 201, Result: {\"message\":\"Đã yêu thích\",\"statusCode\":201,\"status\":\"success\",\"data\":{\"id\":\"91a7e66c-e271-45db-834c-de19b6bc4665\",\"userId\":\"08515b05-2d3e-4789-ad60-db35525a4970\",\"targetId\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"type\":\"post\",\"createdAt\":\"2025-06-20T15:47:25.101Z\"}} \n22:47:25.225 Đang chạy test case #14: Kiểm tra ký tự đặc biệt trong targetId \n22:47:25.225 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:25.231 karate.env system property was: null \n"},{"result":{"nanos":107200,"startTime":1750434445232,"endTime":1750434445232,"millis":0.1072,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":163900,"startTime":1750434445232,"endTime":1750434445232,"millis":0.1639,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":182200,"startTime":1750434445232,"endTime":1750434445232,"millis":0.1822,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":119300,"startTime":1750434445232,"endTime":1750434445232,"millis":0.1193,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":40000,"startTime":1750434445233,"endTime":1750434445233,"millis":0.04,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":169302800,"startTime":1750434445233,"endTime":1750434445402,"millis":169.3028,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:25.233 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 44\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"target@#$%^&*()\",\n  \"type\": \"post\"\n}\n\n\n22:47:25.402 response time in milliseconds: 168\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 249\n1 < ETag: W\/\"f9-zLoTuOmg5kO6uYo2kgeU1A2OyRI\"\n1 < Date: Fri, 20 Jun 2025 15:47:25 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"c4142562-28ed-46e4-997e-ba75d14d7ef1\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"target@#$%^&*()\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:25.293Z\"\n  }\n}\n\n\n"},{"result":{"nanos":163000,"startTime":1750434445402,"endTime":1750434445402,"millis":0.163,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":88100,"startTime":1750434445403,"endTime":1750434445403,"millis":0.0881,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":305600,"startTime":1750434445403,"endTime":1750434445403,"millis":0.3056,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:25.403 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":118500,"startTime":1750434445403,"endTime":1750434445403,"millis":0.1185,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:25.403 [print] Request body: {\n  \"targetId\": \"target@#$%^&*()\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":187300,"startTime":1750434445403,"endTime":1750434445403,"millis":0.1873,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:25.403 [print] Response status: 201 body: {\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"c4142562-28ed-46e4-997e-ba75d14d7ef1\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"target@#$%^&*()\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:25.293Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":172.4976,"startTime":1750434445230,"failed":false,"refId":"[1:3]","endTime":1750434445403,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":179.6814,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4","targetId":"550e8400-e29b-41d4-a716-446655440000"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1984100,"startTime":1750434445410,"endTime":1750434445412,"millis":1.9841,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"22:47:25.404 STATUS MISMATCH - Expected: 400, Actual: 201 \n22:47:25.404 Test Case Data: {\n  \"bearerToken\": \"\",\n  \"targetId\": \"target@#$%^&*()\",\n  \"testDescription\": \"Kiểm tra ký tự đặc biệt trong targetId\",\n  \"expectedStatus\": 400.0,\n  \"expectedResult\": \"{\\\"error\\\": \\\"Invalid targetId format\\\"}\",\n  \"responseStatus\": \"401\",\n  \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-20T15:40:28.272Z\\\"}\"\n}\n \n22:47:25.405 Expected Status: 400.0 \n22:47:25.405 Actual Status: 201 \n22:47:25.405 Test case #14 - Status: 201, Result: {\"message\":\"Đã yêu thích\",\"statusCode\":201,\"status\":\"success\",\"data\":{\"id\":\"c4142562-28ed-46e4-997e-ba75d14d7ef1\",\"userId\":\"08515b05-2d3e-4789-ad60-db35525a4970\",\"targetId\":\"target@#$%^&*()\",\"type\":\"post\",\"createdAt\":\"2025-06-20T15:47:25.293Z\"}} \n22:47:25.405 Đang chạy test case #15: Like với UUID hợp lệ khác \n22:47:25.405 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n22:47:25.411 karate.env system property was: null \n"},{"result":{"nanos":408800,"startTime":1750434445412,"endTime":1750434445412,"millis":0.4088,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":158700,"startTime":1750434445412,"endTime":1750434445412,"millis":0.1587,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":183900,"startTime":1750434445413,"endTime":1750434445413,"millis":0.1839,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":121300,"startTime":1750434445413,"endTime":1750434445413,"millis":0.1213,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\""],"line":12,"prefix":"*","index":4,"text":"def requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":38000,"startTime":1750434445413,"endTime":1750434445413,"millis":0.038,"status":"passed"},"step":{"line":13,"prefix":"And","index":5,"text":"request requestBody"}},{"result":{"nanos":175652700,"startTime":1750434445413,"endTime":1750434445589,"millis":175.6527,"status":"passed"},"step":{"line":14,"prefix":"When","index":6,"text":"method POST"},"stepLog":"22:47:25.414 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 65\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"type\": \"post\"\n}\n\n\n22:47:25.587 response time in milliseconds: 172\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 270\n1 < ETag: W\/\"10e-KMOfR7DSSIiiarHRfupUsKnted0\"\n1 < Date: Fri, 20 Jun 2025 15:47:25 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"0bb7ce42-608b-4463-8c86-e51ac4c9f6c0\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:25.473Z\"\n  }\n}\n\n\n"},{"result":{"nanos":203400,"startTime":1750434445589,"endTime":1750434445589,"millis":0.2034,"status":"passed"},"step":{"line":15,"prefix":"Then","index":7,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":63500,"startTime":1750434445589,"endTime":1750434445589,"millis":0.0635,"status":"passed"},"step":{"line":16,"prefix":"And","index":8,"text":"def actualResponse = response"}},{"result":{"nanos":490000,"startTime":1750434445589,"endTime":1750434445589,"millis":0.49,"status":"passed"},"step":{"line":17,"prefix":"And","index":9,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"22:47:25.590 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwODUxNWIwNS0yZDNlLTQ3ODktYWQ2MC1kYjM1NTI1YTQ5NzAiLCJ1c2VybmFtZSI6Im5hbSIsInJvbGUiOjAsImlhdCI6MTc1MDQzMzEyOCwiZXhwIjoxNzUwNDM2NzI4fQ.LLNWdGI7R_rFyU4cQg2wm-V3Jq9O_6TIXzyRgCE6Uf4 \n"},{"result":{"nanos":173800,"startTime":1750434445590,"endTime":1750434445590,"millis":0.1738,"status":"passed"},"step":{"line":18,"prefix":"And","index":10,"text":"print 'Request body:', requestBody"},"stepLog":"22:47:25.590 [print] Request body: {\n  \"targetId\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":203200,"startTime":1750434445590,"endTime":1750434445590,"millis":0.2032,"status":"passed"},"step":{"line":19,"prefix":"And","index":11,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"22:47:25.590 [print] Response status: 201 body: {\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"0bb7ce42-608b-4463-8c86-e51ac4c9f6c0\",\n    \"userId\": \"08515b05-2d3e-4789-ad60-db35525a4970\",\n    \"targetId\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-20T15:47:25.473Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":179.6814,"startTime":1750434445410,"failed":false,"refId":"[1:3]","endTime":1750434445590,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1}]},{"result":{"nanos":101400,"startTime":1750434445591,"endTime":1750434445591,"millis":0.1014,"status":"passed"},"step":{"line":83,"prefix":"*","index":3,"text":"def testResults = results"}},{"result":{"nanos":709800,"startTime":1750434445591,"endTime":1750434445592,"millis":0.7098,"status":"passed"},"step":{"line":84,"prefix":"*","index":4,"text":"print 'Hoàn thành tất cả test cases like. Đang ghi kết quả vào Excel...'"},"stepLog":"22:47:25.592 [print] Hoàn thành tất cả test cases like. Đang ghi kết quả vào Excel... \n"},{"result":{"nanos":319900,"startTime":1750434445592,"endTime":1750434445592,"millis":0.3199,"status":"passed"},"step":{"line":86,"prefix":"*","index":5,"text":"print 'Ghi kết quả vào Excel...'"},"stepLog":"22:47:25.592 [print] Ghi kết quả vào Excel... \n"},{"result":{"nanos":224028300,"startTime":1750434445592,"endTime":1750434445816,"millis":224.0283,"status":"passed"},"step":{"line":87,"prefix":"*","index":6,"text":"def writeSuccess = writeToExcel(excelFilePath, sheetName, testResults)"}},{"result":{"nanos":1271900,"startTime":1750434445817,"endTime":1750434445818,"millis":1.2719,"status":"passed"},"step":{"line":88,"prefix":"*","index":7,"text":"if (writeSuccess) karate.log('Đã ghi kết quả like vào Excel thành công!')"},"stepLog":"22:47:25.818 Đã ghi kết quả like vào Excel thành công! \n"},{"result":{"nanos":380900,"startTime":1750434445818,"endTime":1750434445818,"millis":0.3809,"status":"passed"},"step":{"line":89,"prefix":"*","index":8,"text":"if (!writeSuccess) karate.log('Lỗi khi ghi kết quả like vào Excel!')"}}],"executorName":"main","line":16,"name":"Chạy tất cả test cases like từ Excel","description":"","durationMillis":3986.1675,"startTime":1750434441615,"failed":false,"refId":"[1:16]","endTime":1750434445819,"exampleIndex":-1}],"callDepth":0,"name":"Like Testing từ Excel - Sheet like","description":"","resultDate":"2025-06-20 10:47:25 PM","durationMillis":3986.1675,"passedCount":1}