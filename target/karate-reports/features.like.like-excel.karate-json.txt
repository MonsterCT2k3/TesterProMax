{"failedCount":0,"prefixedPath":"classpath:features\/like\/like-excel.feature","packageQualifiedName":"features.like.like-excel","loopIndex":-1,"relativePath":"features\/like\/like-excel.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":933900,"startTime":1750696995748,"endTime":1750696995749,"millis":0.9339,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"},"stepLog":"23:43:15.715 karate.env system property was: null \n"},{"result":{"nanos":10136900,"startTime":1750696995753,"endTime":1750696995763,"millis":10.1369,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:15.758 karate.env system property was: null \n"},{"result":{"nanos":32407000,"startTime":1750696995763,"endTime":1750696995795,"millis":32.407,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def readExcel = read('classpath:utils\/read-excel.js')"}},{"result":{"nanos":15631600,"startTime":1750696995796,"endTime":1750696995812,"millis":15.6316,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def writeToExcel = read('classpath:utils\/write-excel.js')"}},{"result":{"nanos":1009800,"startTime":1750696995811,"endTime":1750696995812,"millis":1.0098,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def excelFilePath = 'src\/test\/java\/data\/data.xlsx'"}},{"result":{"nanos":1461800,"startTime":1750696995812,"endTime":1750696995813,"millis":1.4618,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def sheetName = 'like'"}},{"result":{"nanos":873660900,"startTime":1750696995814,"endTime":1750696996688,"millis":873.6609,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def testData = readExcel(excelFilePath, sheetName)"},"stepLog":"23:43:16.601 Headers found: [\n  \"bearerToken\",\n  \"targetId\",\n  \"testDescription\",\n  \"expectedStatus\",\n  \"expectedResult\",\n  \"responseStatus\",\n  \"result\",\n  \"testStatus\",\n  \"failureReason\"\n]\n \n23:43:16.683 Read data from Excel: [\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"e3f481cc-53c6-41c8-9a28-cd2f9c4f2f46\",\n    \"testDescription\": \"Like post hợp lệ\",\n    \"expectedStatus\": 201.0,\n    \"expectedResult\": \"{\\\"message\\\": \\\"Liked successfully\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Đã yêu thích\\\",\\\"statusCode\\\":201,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"73106efc-4dbb-4d96-ad96-abd643684f1b\\\",\\\"userId\\\":\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\\"targetId\\\":\\\"#(targetId)\\\",\\\"type\\\":\\\"post\\\",\\\"createdAt\\\":\\\"2025-06-23T16:19:21.263Z\\\"}}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"EMPTY\",\n    \"testDescription\": \"Thiếu trường targetId\",\n    \"expectedStatus\": 403.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId is required\\\"}\",\n    \"responseStatus\": \"403\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":403,\\\"message\\\":\\\"Thiếu thông tin cần thiết\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:19:21.495Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"\",\n    \"testDescription\": \"targetId rỗng\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot be empty\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Đã thích trước đó\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"73106efc-4dbb-4d96-ad96-abd643684f1b\\\",\\\"userId\\\":\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\\"targetId\\\":\\\"#(targetId)\\\",\\\"type\\\":\\\"post\\\",\\\"createdAt\\\":\\\"2025-06-23T16:19:21.263Z\\\"}}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 201\"\n  },\n  {\n    \"bearerToken\": \"NO_TOKEN\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"testDescription\": \"Thiếu token xác thực\",\n    \"expectedStatus\": 401.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Unauthorized\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:19:21.652Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"INVALID_TOKEN\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"testDescription\": \"Token không hợp lệ\",\n    \"expectedStatus\": 401.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid or expired token\\\"}\",\n    \"responseStatus\": \"401\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":401,\\\"message\\\":\\\"Unauthorized\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:19:21.676Z\\\"}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"nonexistent-id-123\",\n    \"testDescription\": \"targetId không tồn tại\",\n    \"expectedStatus\": 404.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Target not found\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Đã thích trước đó\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"73106efc-4dbb-4d96-ad96-abd643684f1b\\\",\\\"userId\\\":\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\\"targetId\\\":\\\"#(targetId)\\\",\\\"type\\\":\\\"post\\\",\\\"createdAt\\\":\\\"2025-06-23T16:19:21.263Z\\\"}}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 404, got 201\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"c8161412-bc98-49ec-88ff-57b99cc2ce67\",\n    \"testDescription\": \"Đã like trước đó\",\n    \"expectedStatus\": 201.0,\n    \"expectedResult\": \"{\\\"message\\\": \\\"Đã thích trước đó\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Đã thích trước đó\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"73106efc-4dbb-4d96-ad96-abd643684f1b\\\",\\\"userId\\\":\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\\"targetId\\\":\\\"#(targetId)\\\",\\\"type\\\":\\\"post\\\",\\\"createdAt\\\":\\\"2025-06-23T16:19:21.263Z\\\"}}\",\n    \"testStatus\": \"PASS\",\n    \"failureReason\": \"All validations passed\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"invalid_id!@#\",\n    \"testDescription\": \"targetId không hợp lệ format\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid targetId format\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Đã thích trước đó\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"73106efc-4dbb-4d96-ad96-abd643684f1b\\\",\\\"userId\\\":\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\\"targetId\\\":\\\"#(targetId)\\\",\\\"type\\\":\\\"post\\\",\\\"createdAt\\\":\\\"2025-06-23T16:19:21.263Z\\\"}}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 201\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"target123' OR '1'='1\",\n    \"testDescription\": \"Kiểm tra SQL Injection trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Đã thích trước đó\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"73106efc-4dbb-4d96-ad96-abd643684f1b\\\",\\\"userId\\\":\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\\"targetId\\\":\\\"#(targetId)\\\",\\\"type\\\":\\\"post\\\",\\\"createdAt\\\":\\\"2025-06-23T16:19:21.263Z\\\"}}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 201\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"<script>alert(\\\"xss\\\")<\/script>\",\n    \"testDescription\": \"Kiểm tra XSS trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid input\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Đã thích trước đó\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"73106efc-4dbb-4d96-ad96-abd643684f1b\\\",\\\"userId\\\":\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\\"targetId\\\":\\\"#(targetId)\\\",\\\"type\\\":\\\"post\\\",\\\"createdAt\\\":\\\"2025-06-23T16:19:21.263Z\\\"}}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 201\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \" \",\n    \"testDescription\": \"Kiểm tra khoảng trắng trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot contain only whitespace\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Đã thích trước đó\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"73106efc-4dbb-4d96-ad96-abd643684f1b\\\",\\\"userId\\\":\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\\"targetId\\\":\\\"#(targetId)\\\",\\\"type\\\":\\\"post\\\",\\\"createdAt\\\":\\\"2025-06-23T16:19:21.263Z\\\"}}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 201\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n    \"testDescription\": \"Kiểm tra độ dài targetId quá dài\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId exceeds maximum length\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Đã thích trước đó\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"73106efc-4dbb-4d96-ad96-abd643684f1b\\\",\\\"userId\\\":\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\\"targetId\\\":\\\"#(targetId)\\\",\\\"type\\\":\\\"post\\\",\\\"createdAt\\\":\\\"2025-06-23T16:19:21.263Z\\\"}}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 201\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"target@#$%^&*()\",\n    \"testDescription\": \"Kiểm tra ký tự đặc biệt trong targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"Invalid targetId format\\\"}\",\n    \"responseStatus\": \"201\",\n    \"result\": \"{\\\"message\\\":\\\"Đã thích trước đó\\\",\\\"statusCode\\\":200,\\\"status\\\":\\\"success\\\",\\\"data\\\":{\\\"id\\\":\\\"73106efc-4dbb-4d96-ad96-abd643684f1b\\\",\\\"userId\\\":\\\"f6284532-8f1e-4b05-ac54-d8037386e80c\\\",\\\"targetId\\\":\\\"#(targetId)\\\",\\\"type\\\":\\\"post\\\",\\\"createdAt\\\":\\\"2025-06-23T16:19:21.263Z\\\"}}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 201\"\n  },\n  {\n    \"bearerToken\": \"\",\n    \"targetId\": \"NULL_VALUE\",\n    \"testDescription\": \"Kiểm tra trường null targetId\",\n    \"expectedStatus\": 400.0,\n    \"expectedResult\": \"{\\\"error\\\": \\\"targetId cannot be null\\\"}\",\n    \"responseStatus\": \"403\",\n    \"result\": \"{\\\"success\\\":false,\\\"statusCode\\\":403,\\\"message\\\":\\\"Thiếu thông tin cần thiết\\\",\\\"path\\\":\\\"\/likes\\\",\\\"timestamp\\\":\\\"2025-06-23T16:19:22.451Z\\\"}\",\n    \"testStatus\": \"FAIL\",\n    \"failureReason\": \"Status mismatch: Expected 400, got 403\"\n  }\n]\n \n"},{"result":{"nanos":6261100,"startTime":1750696996688,"endTime":1750696996694,"millis":6.2611,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"print 'Đọc được ' + testData.length + ' test cases từ Excel sheet: ' + sheetName"},"stepLog":"23:43:16.694 [print] Đọc được 14 test cases từ Excel sheet: like \n"},{"result":{"nanos":21234700,"startTime":1750696996694,"endTime":1750696996715,"millis":21.2347,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def testResults = []"}},{"result":{"nanos":1876700,"startTime":1750696996716,"endTime":1750696996718,"millis":1.8767,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def globalBearerToken = config.bearerToken"}},{"result":{"nanos":1451000,"startTime":1750696996718,"endTime":1750696996719,"millis":1.451,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"print 'Sử dụng global bearer token từ config:', globalBearerToken"},"stepLog":"23:43:16.719 [print] Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":3507300,"startTime":1750696996719,"endTime":1750696996723,"millis":3.5073,"status":"passed"},"step":{"endLine":36,"line":17,"prefix":"*","docString":"function(testCase, actualStatus, actualResponse) {\n  var expectedStatus = testCase.expectedStatus;\n        \n  \/\/ Kiểm tra Status Code (Bắt buộc)\n  if (actualStatus != expectedStatus) {\n    return {\n      status: 'FAIL',\n      reason: 'Status mismatch: Expected ' + expectedStatus + ', got ' + actualStatus\n    };\n  }\n        \n  \/\/ Nếu status code khớp thì PASS\n  return {\n    status: 'PASS',\n    reason: 'All validations passed'\n  };\n}","index":0,"text":"def evaluateTestCase ="}},{"result":{"nanos":8486700,"startTime":1750696996723,"endTime":1750696996731,"millis":8.4867,"status":"passed"},"step":{"endLine":100,"line":38,"prefix":"*","docString":"function(testCase, index) {\n  karate.log('Đang chạy test case #' + (index + 1) + ': ' + testCase.testDescription);\n        \n  var bearerToken = '';\n        \n  \/\/ Sử dụng bearer token từ test case hoặc global config\n  if (testCase.bearerToken && testCase.bearerToken.trim() !== '') {\n    if (testCase.bearerToken === 'NO_TOKEN') {\n      \/\/ TC4: Không có token\n      bearerToken = '';\n      karate.log('Test case không sử dụng token');\n    } else if (testCase.bearerToken === 'INVALID_TOKEN') {\n      \/\/ TC5: Token không hợp lệ\n      bearerToken = 'invalid_token_123';\n      karate.log('Test case sử dụng token không hợp lệ');\n    } else {\n      \/\/ Sử dụng token từ Excel nếu có\n      bearerToken = testCase.bearerToken;\n      karate.log('Sử dụng bearer token từ Excel:', bearerToken);\n    }\n  } else {\n    \/\/ Sử dụng global token từ config\n    bearerToken = globalBearerToken;\n    karate.log('Sử dụng global bearer token từ config:', bearerToken);\n  }\n        \n  \/\/ Gọi API like (type cố định là \"post\")\n  var response = karate.call('classpath:features\/helpers\/like-single-call.feature', {\n    bearerToken: bearerToken,\n    targetId: testCase.targetId || ''\n  });\n        \n  var actualStatus = response.actualStatus;\n  var actualResult = '';\n        \n  \/\/ Ghi response thực tế vào result\n  if (response.actualResponse) {\n    actualResult = JSON.stringify(response.actualResponse);\n  } else {\n    actualResult = 'No response body';\n  }\n        \n  \/\/ ===== ĐÁNH GIÁ TEST CASE =====\n  var testEvaluation = evaluateTestCase(testCase, actualStatus, response.actualResponse);\n        \n  if (testEvaluation.status === 'PASS') {\n    karate.log('✅ TEST PASSED - ' + testEvaluation.reason);\n  } else {\n    karate.log('❌ TEST FAILED - ' + testEvaluation.reason);\n  }\n        \n  karate.log('Test case #' + (index + 1) + ' - Status: ' + actualStatus + ', Result: ' + actualResult);\n        \n  return {\n    responseStatus: actualStatus,\n    result: actualResult,\n    testStatus: testEvaluation.status,\n    failureReason: testEvaluation.reason\n  };\n}","index":1,"text":"def runTest ="}},{"result":{"nanos":1471100,"startTime":1750696996731,"endTime":1750696996732,"millis":1.4711,"status":"passed"},"step":{"line":102,"prefix":"*","index":2,"text":"print 'Bắt đầu chạy từng test case...'"},"stepLog":"23:43:16.733 [print] Bắt đầu chạy từng test case... \n"},{"result":{"nanos":1775513300,"startTime":1750696996733,"endTime":1750696998509,"millis":1775.5133,"status":"passed"},"step":{"line":103,"prefix":"*","index":3,"text":"def results = karate.map(testData, runTest)"},"stepLog":"23:43:18.508 ❌ TEST FAILED - Status mismatch: Expected 400, got 403 \n23:43:18.509 Test case #14 - Status: 403, Result: {\"success\":false,\"statusCode\":403,\"message\":\"Thiếu thông tin cần thiết\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:43:18.501Z\"} \n","callResults":[{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":593.3773,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"e3f481cc-53c6-41c8-9a28-cd2f9c4f2f46"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":6297900,"startTime":1750696996763,"endTime":1750696996769,"millis":6.2979,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:16.736 Đang chạy test case #1: Like post hợp lệ \n23:43:16.737 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:16.766 karate.env system property was: null \n"},{"result":{"nanos":726600,"startTime":1750696996769,"endTime":1750696996770,"millis":0.7266,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":9781400,"startTime":1750696996769,"endTime":1750696996779,"millis":9.7814,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":4443200,"startTime":1750696996779,"endTime":1750696996783,"millis":4.4432,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":715100,"startTime":1750696996784,"endTime":1750696996785,"millis":0.7151,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":5514600,"startTime":1750696996785,"endTime":1750696996791,"millis":5.5146,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":1386600,"startTime":1750696996790,"endTime":1750696996791,"millis":1.3866,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":1803000,"startTime":1750696996792,"endTime":1750696996794,"millis":1.803,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":426100,"startTime":1750696996794,"endTime":1750696996794,"millis":0.4261,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":556097000,"startTime":1750696996794,"endTime":1750696997350,"millis":556.097,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:17.134 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:17.350 response time in milliseconds: 211\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 245\n1 < ETag: W\/\"f5-SS5KxlF9MelIpzSvgicqC2wLrmM\"\n1 < Date: Mon, 23 Jun 2025 16:43:17 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n\n\n"},{"result":{"nanos":566000,"startTime":1750696997351,"endTime":1750696997352,"millis":0.566,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":300200,"startTime":1750696997352,"endTime":1750696997352,"millis":0.3002,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":1738400,"startTime":1750696997352,"endTime":1750696997354,"millis":1.7384,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:17.353 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":1896800,"startTime":1750696997354,"endTime":1750696997356,"millis":1.8968,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:17.355 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":1684400,"startTime":1750696997355,"endTime":1750696997357,"millis":1.6844,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:17.357 [print] Response status: 201 body: {\n  \"message\": \"Đã yêu thích\",\n  \"statusCode\": 201,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":593.3773,"startTime":1750696996763,"failed":false,"refId":"[1:3]","endTime":1750696997357,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":57.5117,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"EMPTY"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3746100,"startTime":1750696997391,"endTime":1750696997395,"millis":3.7461,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:17.375 ✅ TEST PASSED - All validations passed \n23:43:17.377 Test case #1 - Status: 201, Result: {\"message\":\"Đã yêu thích\",\"statusCode\":201,\"status\":\"success\",\"data\":{\"id\":\"d35f0632-2680-446d-a024-60dfa77edcfc\",\"userId\":\"f6284532-8f1e-4b05-ac54-d8037386e80c\",\"targetId\":\"#(targetId)\",\"type\":\"post\",\"createdAt\":\"2025-06-23T16:43:17.229Z\"}} \n23:43:17.378 Đang chạy test case #2: Thiếu trường targetId \n23:43:17.378 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:17.394 karate.env system property was: null \n"},{"result":{"nanos":423200,"startTime":1750696997395,"endTime":1750696997395,"millis":0.4232,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":428100,"startTime":1750696997396,"endTime":1750696997396,"millis":0.4281,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":470000,"startTime":1750696997396,"endTime":1750696997396,"millis":0.47,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":225700,"startTime":1750696997396,"endTime":1750696997396,"millis":0.2257,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":788600,"startTime":1750696997396,"endTime":1750696997397,"millis":0.7886,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":87700,"startTime":1750696997398,"endTime":1750696997398,"millis":0.0877,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":63000,"startTime":1750696997398,"endTime":1750696997398,"millis":0.063,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":276500,"startTime":1750696997398,"endTime":1750696997398,"millis":0.2765,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":46459100,"startTime":1750696997399,"endTime":1750696997445,"millis":46.4591,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:17.400 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 15\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"type\": \"post\"\n}\n\n\n23:43:17.443 response time in milliseconds: 43\n1 < 403\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 134\n1 < ETag: W\/\"86-UB5gTf5TiGlk8PicXDoKvNA23Z4\"\n1 < Date: Mon, 23 Jun 2025 16:43:17 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 403,\n  \"message\": \"Thiếu thông tin cần thiết\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:43:17.440Z\"\n}\n\n\n"},{"result":{"nanos":989600,"startTime":1750696997444,"endTime":1750696997445,"millis":0.9896,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":385800,"startTime":1750696997446,"endTime":1750696997446,"millis":0.3858,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":992100,"startTime":1750696997446,"endTime":1750696997447,"millis":0.9921,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:17.447 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":1251700,"startTime":1750696997448,"endTime":1750696997449,"millis":1.2517,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:17.448 [print] Request body: {\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":924500,"startTime":1750696997448,"endTime":1750696997449,"millis":0.9245,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:17.450 [print] Response status: 403 body: {\n  \"success\": false,\n  \"statusCode\": 403,\n  \"message\": \"Thiếu thông tin cần thiết\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:43:17.440Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":57.5117,"startTime":1750696997391,"failed":false,"refId":"[1:3]","endTime":1750696997450,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":98.6304,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":""},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":5885800,"startTime":1750696997472,"endTime":1750696997478,"millis":5.8858,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:17.455 ✅ TEST PASSED - All validations passed \n23:43:17.455 Test case #2 - Status: 403, Result: {\"success\":false,\"statusCode\":403,\"message\":\"Thiếu thông tin cần thiết\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:43:17.440Z\"} \n23:43:17.457 Đang chạy test case #3: targetId rỗng \n23:43:17.458 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:17.476 karate.env system property was: null \n"},{"result":{"nanos":775200,"startTime":1750696997478,"endTime":1750696997479,"millis":0.7752,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":640300,"startTime":1750696997479,"endTime":1750696997480,"millis":0.6403,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":797700,"startTime":1750696997480,"endTime":1750696997481,"millis":0.7977,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":735600,"startTime":1750696997481,"endTime":1750696997482,"millis":0.7356,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":200300,"startTime":1750696997481,"endTime":1750696997481,"millis":0.2003,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":157000,"startTime":1750696997482,"endTime":1750696997482,"millis":0.157,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":687300,"startTime":1750696997482,"endTime":1750696997483,"millis":0.6873,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":320100,"startTime":1750696997483,"endTime":1750696997483,"millis":0.3201,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":82424600,"startTime":1750696997483,"endTime":1750696997565,"millis":82.4246,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:17.485 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:17.563 response time in milliseconds: 77\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 254\n1 < ETag: W\/\"fe-hkbE5QrqHIGSut50mxWAIrVwEE8\"\n1 < Date: Mon, 23 Jun 2025 16:43:17 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n\n\n"},{"result":{"nanos":425700,"startTime":1750696997565,"endTime":1750696997565,"millis":0.4257,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":426100,"startTime":1750696997566,"endTime":1750696997566,"millis":0.4261,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":1722500,"startTime":1750696997566,"endTime":1750696997568,"millis":1.7225,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:17.568 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":2171400,"startTime":1750696997568,"endTime":1750696997570,"millis":2.1714,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:17.571 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":1260800,"startTime":1750696997571,"endTime":1750696997572,"millis":1.2608,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:17.572 [print] Response status: 201 body: {\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":98.6304,"startTime":1750696997472,"failed":false,"refId":"[1:3]","endTime":1750696997573,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":52.3311,"callArg":{"bearerToken":"","targetId":"c8161412-bc98-49ec-88ff-57b99cc2ce67"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":6409300,"startTime":1750696997602,"endTime":1750696997608,"millis":6.4093,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:17.584 ❌ TEST FAILED - Status mismatch: Expected 400, got 201 \n23:43:17.585 Test case #3 - Status: 201, Result: {\"message\":\"Đã thích trước đó\",\"statusCode\":200,\"status\":\"success\",\"data\":{\"id\":\"d35f0632-2680-446d-a024-60dfa77edcfc\",\"userId\":\"f6284532-8f1e-4b05-ac54-d8037386e80c\",\"targetId\":\"#(targetId)\",\"type\":\"post\",\"createdAt\":\"2025-06-23T16:43:17.229Z\"}} \n23:43:17.587 Đang chạy test case #4: Thiếu token xác thực \n23:43:17.588 Test case không sử dụng token \n23:43:17.606 karate.env system property was: null \n"},{"result":{"nanos":462800,"startTime":1750696997609,"endTime":1750696997609,"millis":0.4628,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":205700,"startTime":1750696997609,"endTime":1750696997609,"millis":0.2057,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":26115700,"startTime":1750696997609,"endTime":1750696997635,"millis":26.1157,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":2053400,"startTime":1750696997637,"endTime":1750696997639,"millis":2.0534,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":395200,"startTime":1750696997639,"endTime":1750696997639,"millis":0.3952,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":239500,"startTime":1750696997639,"endTime":1750696997639,"millis":0.2395,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":1626800,"startTime":1750696997640,"endTime":1750696997642,"millis":1.6268,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":1412500,"startTime":1750696997642,"endTime":1750696997643,"millis":1.4125,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":10960700,"startTime":1750696997643,"endTime":1750696997654,"millis":10.9607,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:17.646 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: #(Authorization)\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:17.652 response time in milliseconds: 5\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 114\n1 < ETag: W\/\"72-c4QCJ5k89G+Ol34HvtPcldrN5x8\"\n1 < Date: Mon, 23 Jun 2025 16:43:17 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:43:17.650Z\"\n}\n\n\n"},{"result":{"nanos":218700,"startTime":1750696997653,"endTime":1750696997653,"millis":0.2187,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":132200,"startTime":1750696997653,"endTime":1750696997653,"millis":0.1322,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":715200,"startTime":1750696997655,"endTime":1750696997656,"millis":0.7152,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:17.655 [print] Calling like API với bearerToken:  \n"},{"result":{"nanos":865000,"startTime":1750696997655,"endTime":1750696997656,"millis":0.865,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:17.656 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":518400,"startTime":1750696997656,"endTime":1750696997657,"millis":0.5184,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:17.657 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:43:17.650Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":52.3311,"startTime":1750696997602,"failed":false,"refId":"[1:3]","endTime":1750696997657,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":24.1602,"callArg":{"bearerToken":"invalid_token_123","targetId":"c8161412-bc98-49ec-88ff-57b99cc2ce67"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3849000,"startTime":1750696997670,"endTime":1750696997674,"millis":3.849,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:17.658 ✅ TEST PASSED - All validations passed \n23:43:17.658 Test case #4 - Status: 401, Result: {\"success\":false,\"statusCode\":401,\"message\":\"Unauthorized\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:43:17.650Z\"} \n23:43:17.659 Đang chạy test case #5: Token không hợp lệ \n23:43:17.659 Test case sử dụng token không hợp lệ \n23:43:17.672 karate.env system property was: null \n"},{"result":{"nanos":574000,"startTime":1750696997673,"endTime":1750696997674,"millis":0.574,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":943200,"startTime":1750696997674,"endTime":1750696997675,"millis":0.9432,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":743500,"startTime":1750696997675,"endTime":1750696997676,"millis":0.7435,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":499600,"startTime":1750696997676,"endTime":1750696997676,"millis":0.4996,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":134300,"startTime":1750696997676,"endTime":1750696997676,"millis":0.1343,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":79400,"startTime":1750696997676,"endTime":1750696997676,"millis":0.0794,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":640300,"startTime":1750696997676,"endTime":1750696997677,"millis":0.6403,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":369400,"startTime":1750696997678,"endTime":1750696997678,"millis":0.3694,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":13939400,"startTime":1750696997678,"endTime":1750696997692,"millis":13.9394,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:17.683 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer invalid_token_123\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:17.691 response time in milliseconds: 7\n1 < 401\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 114\n1 < ETag: W\/\"72-0aBC3OjsqfT7XENqI82WfWecaj8\"\n1 < Date: Mon, 23 Jun 2025 16:43:17 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:43:17.688Z\"\n}\n\n\n"},{"result":{"nanos":310200,"startTime":1750696997693,"endTime":1750696997693,"millis":0.3102,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":148100,"startTime":1750696997693,"endTime":1750696997693,"millis":0.1481,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":950400,"startTime":1750696997693,"endTime":1750696997694,"millis":0.9504,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:17.694 [print] Calling like API với bearerToken: invalid_token_123 \n"},{"result":{"nanos":599800,"startTime":1750696997694,"endTime":1750696997695,"millis":0.5998,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:17.695 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":379600,"startTime":1750696997695,"endTime":1750696997695,"millis":0.3796,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:17.695 [print] Response status: 401 body: {\n  \"success\": false,\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:43:17.688Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":24.1602,"startTime":1750696997670,"failed":false,"refId":"[1:3]","endTime":1750696997695,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":82.7691,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"nonexistent-id-123"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3384300,"startTime":1750696997708,"endTime":1750696997711,"millis":3.3843,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:17.696 ✅ TEST PASSED - All validations passed \n23:43:17.696 Test case #5 - Status: 401, Result: {\"success\":false,\"statusCode\":401,\"message\":\"Unauthorized\",\"path\":\"\/likes\",\"timestamp\":\"2025-06-23T16:43:17.688Z\"} \n23:43:17.697 Đang chạy test case #6: targetId không tồn tại \n23:43:17.698 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:17.710 karate.env system property was: null \n"},{"result":{"nanos":291000,"startTime":1750696997711,"endTime":1750696997711,"millis":0.291,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":443500,"startTime":1750696997711,"endTime":1750696997711,"millis":0.4435,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":429500,"startTime":1750696997712,"endTime":1750696997712,"millis":0.4295,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":282500,"startTime":1750696997712,"endTime":1750696997712,"millis":0.2825,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":110000,"startTime":1750696997713,"endTime":1750696997713,"millis":0.11,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":89300,"startTime":1750696997713,"endTime":1750696997713,"millis":0.0893,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":378800,"startTime":1750696997713,"endTime":1750696997713,"millis":0.3788,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":255300,"startTime":1750696997713,"endTime":1750696997713,"millis":0.2553,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":72891100,"startTime":1750696997714,"endTime":1750696997787,"millis":72.8911,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:17.715 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:17.786 response time in milliseconds: 70\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 254\n1 < ETag: W\/\"fe-hkbE5QrqHIGSut50mxWAIrVwEE8\"\n1 < Date: Mon, 23 Jun 2025 16:43:17 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n\n\n"},{"result":{"nanos":364800,"startTime":1750696997786,"endTime":1750696997786,"millis":0.3648,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":211600,"startTime":1750696997788,"endTime":1750696997788,"millis":0.2116,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":1119900,"startTime":1750696997788,"endTime":1750696997789,"millis":1.1199,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:17.788 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":1645600,"startTime":1750696997789,"endTime":1750696997791,"millis":1.6456,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:17.790 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":871900,"startTime":1750696997790,"endTime":1750696997791,"millis":0.8719,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:17.791 [print] Response status: 201 body: {\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":82.7691,"startTime":1750696997708,"failed":false,"refId":"[1:3]","endTime":1750696997791,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":82.9753,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"c8161412-bc98-49ec-88ff-57b99cc2ce67"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":7037800,"startTime":1750696997813,"endTime":1750696997820,"millis":7.0378,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:17.795 ❌ TEST FAILED - Status mismatch: Expected 404, got 201 \n23:43:17.796 Test case #6 - Status: 201, Result: {\"message\":\"Đã thích trước đó\",\"statusCode\":200,\"status\":\"success\",\"data\":{\"id\":\"d35f0632-2680-446d-a024-60dfa77edcfc\",\"userId\":\"f6284532-8f1e-4b05-ac54-d8037386e80c\",\"targetId\":\"#(targetId)\",\"type\":\"post\",\"createdAt\":\"2025-06-23T16:43:17.229Z\"}} \n23:43:17.798 Đang chạy test case #7: Đã like trước đó \n23:43:17.798 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:17.817 karate.env system property was: null \n"},{"result":{"nanos":527800,"startTime":1750696997820,"endTime":1750696997821,"millis":0.5278,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":631900,"startTime":1750696997821,"endTime":1750696997822,"millis":0.6319,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":975000,"startTime":1750696997821,"endTime":1750696997822,"millis":0.975,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":671700,"startTime":1750696997822,"endTime":1750696997823,"millis":0.6717,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":182700,"startTime":1750696997823,"endTime":1750696997823,"millis":0.1827,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":136900,"startTime":1750696997823,"endTime":1750696997823,"millis":0.1369,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":419000,"startTime":1750696997824,"endTime":1750696997824,"millis":0.419,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":280100,"startTime":1750696997824,"endTime":1750696997824,"millis":0.2801,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":69852300,"startTime":1750696997824,"endTime":1750696997894,"millis":69.8523,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:17.828 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:17.894 response time in milliseconds: 65\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 254\n1 < ETag: W\/\"fe-hkbE5QrqHIGSut50mxWAIrVwEE8\"\n1 < Date: Mon, 23 Jun 2025 16:43:17 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n\n\n"},{"result":{"nanos":304800,"startTime":1750696997895,"endTime":1750696997895,"millis":0.3048,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":108800,"startTime":1750696997895,"endTime":1750696997895,"millis":0.1088,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":597900,"startTime":1750696997895,"endTime":1750696997896,"millis":0.5979,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:17.896 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":728400,"startTime":1750696997896,"endTime":1750696997897,"millis":0.7284,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:17.896 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":520200,"startTime":1750696997897,"endTime":1750696997898,"millis":0.5202,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:17.897 [print] Response status: 201 body: {\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":82.9753,"startTime":1750696997812,"failed":false,"refId":"[1:3]","endTime":1750696997897,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":77.6836,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"invalid_id!@#"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":4217000,"startTime":1750696997907,"endTime":1750696997911,"millis":4.217,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:17.899 ✅ TEST PASSED - All validations passed \n23:43:17.899 Test case #7 - Status: 201, Result: {\"message\":\"Đã thích trước đó\",\"statusCode\":200,\"status\":\"success\",\"data\":{\"id\":\"d35f0632-2680-446d-a024-60dfa77edcfc\",\"userId\":\"f6284532-8f1e-4b05-ac54-d8037386e80c\",\"targetId\":\"#(targetId)\",\"type\":\"post\",\"createdAt\":\"2025-06-23T16:43:17.229Z\"}} \n23:43:17.900 Đang chạy test case #8: targetId không hợp lệ format \n23:43:17.900 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:17.910 karate.env system property was: null \n"},{"result":{"nanos":466200,"startTime":1750696997911,"endTime":1750696997911,"millis":0.4662,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":472800,"startTime":1750696997913,"endTime":1750696997913,"millis":0.4728,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":628900,"startTime":1750696997913,"endTime":1750696997914,"millis":0.6289,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":544700,"startTime":1750696997914,"endTime":1750696997915,"millis":0.5447,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":115400,"startTime":1750696997915,"endTime":1750696997915,"millis":0.1154,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":95500,"startTime":1750696997915,"endTime":1750696997915,"millis":0.0955,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":461500,"startTime":1750696997915,"endTime":1750696997915,"millis":0.4615,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":213700,"startTime":1750696997915,"endTime":1750696997915,"millis":0.2137,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":67570400,"startTime":1750696997916,"endTime":1750696997984,"millis":67.5704,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:17.918 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:17.982 response time in milliseconds: 62\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 254\n1 < ETag: W\/\"fe-hkbE5QrqHIGSut50mxWAIrVwEE8\"\n1 < Date: Mon, 23 Jun 2025 16:43:17 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n\n\n"},{"result":{"nanos":256300,"startTime":1750696997983,"endTime":1750696997983,"millis":0.2563,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":228900,"startTime":1750696997983,"endTime":1750696997983,"millis":0.2289,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":786600,"startTime":1750696997983,"endTime":1750696997984,"millis":0.7866,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:17.984 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":810700,"startTime":1750696997984,"endTime":1750696997985,"millis":0.8107,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:17.985 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":815000,"startTime":1750696997985,"endTime":1750696997986,"millis":0.815,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:17.986 [print] Response status: 201 body: {\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":77.6836,"startTime":1750696997907,"failed":false,"refId":"[1:3]","endTime":1750696997986,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":83.2922,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"target123' OR '1'='1"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3640900,"startTime":1750696998000,"endTime":1750696998004,"millis":3.6409,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:17.990 ❌ TEST FAILED - Status mismatch: Expected 400, got 201 \n23:43:17.990 Test case #8 - Status: 201, Result: {\"message\":\"Đã thích trước đó\",\"statusCode\":200,\"status\":\"success\",\"data\":{\"id\":\"d35f0632-2680-446d-a024-60dfa77edcfc\",\"userId\":\"f6284532-8f1e-4b05-ac54-d8037386e80c\",\"targetId\":\"#(targetId)\",\"type\":\"post\",\"createdAt\":\"2025-06-23T16:43:17.229Z\"}} \n23:43:17.991 Đang chạy test case #9: Kiểm tra SQL Injection trong targetId \n23:43:17.991 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:18.003 karate.env system property was: null \n"},{"result":{"nanos":512400,"startTime":1750696998004,"endTime":1750696998005,"millis":0.5124,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":648900,"startTime":1750696998005,"endTime":1750696998006,"millis":0.6489,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":486500,"startTime":1750696998005,"endTime":1750696998005,"millis":0.4865,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":351200,"startTime":1750696998007,"endTime":1750696998007,"millis":0.3512,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":115700,"startTime":1750696998007,"endTime":1750696998007,"millis":0.1157,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":65300,"startTime":1750696998007,"endTime":1750696998007,"millis":0.0653,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":244800,"startTime":1750696998007,"endTime":1750696998007,"millis":0.2448,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":178100,"startTime":1750696998008,"endTime":1750696998008,"millis":0.1781,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":75097500,"startTime":1750696998008,"endTime":1750696998083,"millis":75.0975,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:18.009 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:18.082 response time in milliseconds: 71\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 254\n1 < ETag: W\/\"fe-hkbE5QrqHIGSut50mxWAIrVwEE8\"\n1 < Date: Mon, 23 Jun 2025 16:43:18 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n\n\n"},{"result":{"nanos":247100,"startTime":1750696998082,"endTime":1750696998082,"millis":0.2471,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":94200,"startTime":1750696998083,"endTime":1750696998083,"millis":0.0942,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":454300,"startTime":1750696998083,"endTime":1750696998083,"millis":0.4543,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:18.083 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":600100,"startTime":1750696998083,"endTime":1750696998084,"millis":0.6001,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:18.084 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":555200,"startTime":1750696998084,"endTime":1750696998085,"millis":0.5552,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:18.084 [print] Response status: 201 body: {\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":83.2922,"startTime":1750696998000,"failed":false,"refId":"[1:3]","endTime":1750696998084,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":72.9159,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"<script>alert(\"xss\")<\/script>"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2190000,"startTime":1750696998093,"endTime":1750696998095,"millis":2.19,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:18.086 ❌ TEST FAILED - Status mismatch: Expected 400, got 201 \n23:43:18.086 Test case #9 - Status: 201, Result: {\"message\":\"Đã thích trước đó\",\"statusCode\":200,\"status\":\"success\",\"data\":{\"id\":\"d35f0632-2680-446d-a024-60dfa77edcfc\",\"userId\":\"f6284532-8f1e-4b05-ac54-d8037386e80c\",\"targetId\":\"#(targetId)\",\"type\":\"post\",\"createdAt\":\"2025-06-23T16:43:17.229Z\"}} \n23:43:18.086 Đang chạy test case #10: Kiểm tra XSS trong targetId \n23:43:18.086 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:18.094 karate.env system property was: null \n"},{"result":{"nanos":173000,"startTime":1750696998095,"endTime":1750696998095,"millis":0.173,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":230900,"startTime":1750696998095,"endTime":1750696998095,"millis":0.2309,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":314600,"startTime":1750696998096,"endTime":1750696998096,"millis":0.3146,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":182200,"startTime":1750696998096,"endTime":1750696998096,"millis":0.1822,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":71500,"startTime":1750696998096,"endTime":1750696998096,"millis":0.0715,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":46600,"startTime":1750696998096,"endTime":1750696998096,"millis":0.0466,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":162500,"startTime":1750696998096,"endTime":1750696998096,"millis":0.1625,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":128700,"startTime":1750696998096,"endTime":1750696998096,"millis":0.1287,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":66497400,"startTime":1750696998096,"endTime":1750696998162,"millis":66.4974,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:18.098 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:18.163 response time in milliseconds: 64\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 254\n1 < ETag: W\/\"fe-hkbE5QrqHIGSut50mxWAIrVwEE8\"\n1 < Date: Mon, 23 Jun 2025 16:43:18 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n\n\n"},{"result":{"nanos":252700,"startTime":1750696998164,"endTime":1750696998164,"millis":0.2527,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":152400,"startTime":1750696998164,"endTime":1750696998164,"millis":0.1524,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":862700,"startTime":1750696998164,"endTime":1750696998165,"millis":0.8627,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:18.165 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":850000,"startTime":1750696998165,"endTime":1750696998166,"millis":0.85,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:18.166 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":800700,"startTime":1750696998166,"endTime":1750696998167,"millis":0.8007,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:18.166 [print] Response status: 201 body: {\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":72.9159,"startTime":1750696998093,"failed":false,"refId":"[1:3]","endTime":1750696998166,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":74.6286,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":" "},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3027300,"startTime":1750696998178,"endTime":1750696998181,"millis":3.0273,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:18.169 ❌ TEST FAILED - Status mismatch: Expected 400, got 201 \n23:43:18.169 Test case #10 - Status: 201, Result: {\"message\":\"Đã thích trước đó\",\"statusCode\":200,\"status\":\"success\",\"data\":{\"id\":\"d35f0632-2680-446d-a024-60dfa77edcfc\",\"userId\":\"f6284532-8f1e-4b05-ac54-d8037386e80c\",\"targetId\":\"#(targetId)\",\"type\":\"post\",\"createdAt\":\"2025-06-23T16:43:17.229Z\"}} \n23:43:18.170 Đang chạy test case #11: Kiểm tra khoảng trắng trong targetId \n23:43:18.170 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:18.181 karate.env system property was: null \n"},{"result":{"nanos":241100,"startTime":1750696998181,"endTime":1750696998181,"millis":0.2411,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":418700,"startTime":1750696998181,"endTime":1750696998181,"millis":0.4187,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":464200,"startTime":1750696998182,"endTime":1750696998182,"millis":0.4642,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":288500,"startTime":1750696998182,"endTime":1750696998182,"millis":0.2885,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":136200,"startTime":1750696998183,"endTime":1750696998183,"millis":0.1362,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":97300,"startTime":1750696998183,"endTime":1750696998183,"millis":0.0973,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":308900,"startTime":1750696998183,"endTime":1750696998183,"millis":0.3089,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":163300,"startTime":1750696998183,"endTime":1750696998183,"millis":0.1633,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":65640100,"startTime":1750696998184,"endTime":1750696998250,"millis":65.6401,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:18.185 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:18.249 response time in milliseconds: 63\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 254\n1 < ETag: W\/\"fe-hkbE5QrqHIGSut50mxWAIrVwEE8\"\n1 < Date: Mon, 23 Jun 2025 16:43:18 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n\n\n"},{"result":{"nanos":351300,"startTime":1750696998250,"endTime":1750696998250,"millis":0.3513,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":169200,"startTime":1750696998250,"endTime":1750696998250,"millis":0.1692,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":1150500,"startTime":1750696998250,"endTime":1750696998251,"millis":1.1505,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:18.251 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":1489800,"startTime":1750696998251,"endTime":1750696998252,"millis":1.4898,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:18.252 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":682200,"startTime":1750696998253,"endTime":1750696998254,"millis":0.6822,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:18.253 [print] Response status: 201 body: {\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":74.6286,"startTime":1750696998178,"failed":false,"refId":"[1:3]","endTime":1750696998253,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":88.2747,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3140000,"startTime":1750696998268,"endTime":1750696998271,"millis":3.14,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:18.256 ❌ TEST FAILED - Status mismatch: Expected 400, got 201 \n23:43:18.256 Test case #11 - Status: 201, Result: {\"message\":\"Đã thích trước đó\",\"statusCode\":200,\"status\":\"success\",\"data\":{\"id\":\"d35f0632-2680-446d-a024-60dfa77edcfc\",\"userId\":\"f6284532-8f1e-4b05-ac54-d8037386e80c\",\"targetId\":\"#(targetId)\",\"type\":\"post\",\"createdAt\":\"2025-06-23T16:43:17.229Z\"}} \n23:43:18.258 Đang chạy test case #12: Kiểm tra độ dài targetId quá dài \n23:43:18.258 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:18.270 karate.env system property was: null \n"},{"result":{"nanos":342100,"startTime":1750696998271,"endTime":1750696998271,"millis":0.3421,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":418900,"startTime":1750696998272,"endTime":1750696998272,"millis":0.4189,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":558600,"startTime":1750696998272,"endTime":1750696998273,"millis":0.5586,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":293700,"startTime":1750696998273,"endTime":1750696998273,"millis":0.2937,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":176400,"startTime":1750696998273,"endTime":1750696998273,"millis":0.1764,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":175700,"startTime":1750696998274,"endTime":1750696998274,"millis":0.1757,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":500400,"startTime":1750696998274,"endTime":1750696998275,"millis":0.5004,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":259800,"startTime":1750696998274,"endTime":1750696998274,"millis":0.2598,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":77072400,"startTime":1750696998274,"endTime":1750696998351,"millis":77.0724,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:18.278 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:18.351 response time in milliseconds: 71\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 254\n1 < ETag: W\/\"fe-hkbE5QrqHIGSut50mxWAIrVwEE8\"\n1 < Date: Mon, 23 Jun 2025 16:43:18 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n\n\n"},{"result":{"nanos":375300,"startTime":1750696998352,"endTime":1750696998352,"millis":0.3753,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":297700,"startTime":1750696998352,"endTime":1750696998352,"millis":0.2977,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":1073700,"startTime":1750696998353,"endTime":1750696998354,"millis":1.0737,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:18.353 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":1830100,"startTime":1750696998354,"endTime":1750696998356,"millis":1.8301,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:18.355 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":1759900,"startTime":1750696998356,"endTime":1750696998358,"millis":1.7599,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:18.358 [print] Response status: 201 body: {\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":88.2747,"startTime":1750696998268,"failed":false,"refId":"[1:3]","endTime":1750696998358,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":76.8593,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"target@#$%^&*()"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":5391000,"startTime":1750696998371,"endTime":1750696998376,"millis":5.391,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:18.361 ❌ TEST FAILED - Status mismatch: Expected 400, got 201 \n23:43:18.361 Test case #12 - Status: 201, Result: {\"message\":\"Đã thích trước đó\",\"statusCode\":200,\"status\":\"success\",\"data\":{\"id\":\"d35f0632-2680-446d-a024-60dfa77edcfc\",\"userId\":\"f6284532-8f1e-4b05-ac54-d8037386e80c\",\"targetId\":\"#(targetId)\",\"type\":\"post\",\"createdAt\":\"2025-06-23T16:43:17.229Z\"}} \n23:43:18.362 Đang chạy test case #13: Kiểm tra ký tự đặc biệt trong targetId \n23:43:18.363 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:18.375 karate.env system property was: null \n"},{"result":{"nanos":547800,"startTime":1750696998376,"endTime":1750696998377,"millis":0.5478,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":402200,"startTime":1750696998378,"endTime":1750696998378,"millis":0.4022,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":640600,"startTime":1750696998378,"endTime":1750696998379,"millis":0.6406,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":536700,"startTime":1750696998379,"endTime":1750696998380,"millis":0.5367,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":203000,"startTime":1750696998379,"endTime":1750696998379,"millis":0.203,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":139500,"startTime":1750696998380,"endTime":1750696998380,"millis":0.1395,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":672500,"startTime":1750696998380,"endTime":1750696998381,"millis":0.6725,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":264900,"startTime":1750696998381,"endTime":1750696998381,"millis":0.2649,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":66722300,"startTime":1750696998381,"endTime":1750696998448,"millis":66.7223,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:18.383 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 40\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n\n\n23:43:18.448 response time in milliseconds: 64\n1 < 201\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 254\n1 < ETag: W\/\"fe-hkbE5QrqHIGSut50mxWAIrVwEE8\"\n1 < Date: Mon, 23 Jun 2025 16:43:18 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n\n\n"},{"result":{"nanos":153800,"startTime":1750696998448,"endTime":1750696998448,"millis":0.1538,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":82600,"startTime":1750696998448,"endTime":1750696998448,"millis":0.0826,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":415500,"startTime":1750696998448,"endTime":1750696998448,"millis":0.4155,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:18.449 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":351400,"startTime":1750696998449,"endTime":1750696998449,"millis":0.3514,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:18.449 [print] Request body: {\n  \"targetId\": \"#(targetId)\",\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":335500,"startTime":1750696998449,"endTime":1750696998449,"millis":0.3355,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:18.449 [print] Response status: 201 body: {\n  \"message\": \"Đã thích trước đó\",\n  \"statusCode\": 200,\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"d35f0632-2680-446d-a024-60dfa77edcfc\",\n    \"userId\": \"f6284532-8f1e-4b05-ac54-d8037386e80c\",\n    \"targetId\": \"#(targetId)\",\n    \"type\": \"post\",\n    \"createdAt\": \"2025-06-23T16:43:17.229Z\"\n  }\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":76.8593,"startTime":1750696998371,"failed":false,"refId":"[1:3]","endTime":1750696998450,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1},{"prefixedPath":"classpath:features\/helpers\/like-single-call.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":44.958,"callArg":{"bearerToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw","targetId":"NULL_VALUE"},"failedCount":0,"packageQualifiedName":"features.helpers.like-single-call","relativePath":"features\/helpers\/like-single-call.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3303700,"startTime":1750696998461,"endTime":1750696998464,"millis":3.3037,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def config = karate.call('classpath:karate-config.js')"},"stepLog":"23:43:18.451 ❌ TEST FAILED - Status mismatch: Expected 400, got 201 \n23:43:18.452 Test case #13 - Status: 201, Result: {\"message\":\"Đã thích trước đó\",\"statusCode\":200,\"status\":\"success\",\"data\":{\"id\":\"d35f0632-2680-446d-a024-60dfa77edcfc\",\"userId\":\"f6284532-8f1e-4b05-ac54-d8037386e80c\",\"targetId\":\"#(targetId)\",\"type\":\"post\",\"createdAt\":\"2025-06-23T16:43:17.229Z\"}} \n23:43:18.453 Đang chạy test case #14: Kiểm tra trường null targetId \n23:43:18.453 Sử dụng global bearer token từ config: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n23:43:18.463 karate.env system property was: null \n"},{"result":{"nanos":220600,"startTime":1750696998464,"endTime":1750696998464,"millis":0.2206,"status":"passed"},"step":{"line":5,"prefix":"Given","index":1,"text":"url config.baseUrl + '\/likes'"}},{"result":{"nanos":301200,"startTime":1750696998464,"endTime":1750696998464,"millis":0.3012,"status":"passed"},"step":{"comments":["# Thêm header Authorization nếu có bearer token"],"line":8,"prefix":"*","index":2,"text":"if (bearerToken && bearerToken.trim() !== '') karate.set('Authorization', 'Bearer ' + bearerToken)"}},{"result":{"nanos":309700,"startTime":1750696998466,"endTime":1750696998466,"millis":0.3097,"status":"passed"},"step":{"line":9,"prefix":"*","index":3,"text":"configure headers = { Authorization: '#(Authorization)' }"}},{"result":{"nanos":165300,"startTime":1750696998466,"endTime":1750696998466,"millis":0.1653,"status":"passed"},"step":{"comments":["# Xử lý request body với type cố định là \"post\"","# Logic kiểm tra targetId đặc biệt"],"line":13,"prefix":"*","index":4,"text":"def requestBody = { type: 'post' }"}},{"result":{"nanos":80800,"startTime":1750696998466,"endTime":1750696998466,"millis":0.0808,"status":"passed"},"step":{"line":14,"prefix":"*","index":5,"text":"if (targetId == 'EMPTY') requestBody = { type: 'post' }"}},{"result":{"nanos":441300,"startTime":1750696998466,"endTime":1750696998466,"millis":0.4413,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"if (targetId == 'NULL_VALUE') requestBody = { targetId: null, type: 'post' }"}},{"result":{"nanos":100900,"startTime":1750696998467,"endTime":1750696998467,"millis":0.1009,"status":"passed"},"step":{"line":16,"prefix":"*","index":7,"text":"if (targetId != 'EMPTY' && targetId != 'NULL_VALUE') requestBody = { targetId: '#(targetId)', type: 'post' }"}},{"result":{"nanos":208800,"startTime":1750696998467,"endTime":1750696998467,"millis":0.2088,"status":"passed"},"step":{"line":17,"prefix":"And","index":8,"text":"request requestBody"}},{"result":{"nanos":37519800,"startTime":1750696998467,"endTime":1750696998505,"millis":37.5198,"status":"passed"},"step":{"line":18,"prefix":"When","index":9,"text":"method POST"},"stepLog":"23:43:18.469 request:\n1 > POST http:\/\/localhost:3000\/likes\n1 > Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 31\n1 > Host: localhost:3000\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.9)\n1 > Accept-Encoding: gzip,deflate\n{\n  \"targetId\": null,\n  \"type\": \"post\"\n}\n\n\n23:43:18.504 response time in milliseconds: 34\n1 < 403\n1 < X-Powered-By: Express\n1 < Access-Control-Allow-Origin: *\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 134\n1 < ETag: W\/\"86-mRsNM+GJwmP+Ajj9RiTGNY4CFec\"\n1 < Date: Mon, 23 Jun 2025 16:43:18 GMT\n1 < Connection: keep-alive\n1 < Keep-Alive: timeout=5\n{\n  \"success\": false,\n  \"statusCode\": 403,\n  \"message\": \"Thiếu thông tin cần thiết\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:43:18.501Z\"\n}\n\n\n"},{"result":{"nanos":224200,"startTime":1750696998505,"endTime":1750696998505,"millis":0.2242,"status":"passed"},"step":{"line":19,"prefix":"Then","index":10,"text":"def actualStatus = responseStatus"}},{"result":{"nanos":94500,"startTime":1750696998505,"endTime":1750696998505,"millis":0.0945,"status":"passed"},"step":{"line":20,"prefix":"And","index":11,"text":"def actualResponse = response"}},{"result":{"nanos":440900,"startTime":1750696998505,"endTime":1750696998505,"millis":0.4409,"status":"passed"},"step":{"line":21,"prefix":"And","index":12,"text":"print 'Calling like API với bearerToken:', bearerToken"},"stepLog":"23:43:18.506 [print] Calling like API với bearerToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmNjI4NDUzMi04ZjFlLTRiMDUtYWM1NC1kODAzNzM4NmU4MGMiLCJ1c2VybmFtZSI6InVzZXJubzIiLCJyb2xlIjowLCJpYXQiOjE3NTA2OTQzNTQsImV4cCI6MTc1MDY5Nzk1NH0.cn4pcMTzJbKyd0aw-bN_KvZNRCfEwxef9wljw6vUgkw \n"},{"result":{"nanos":1094900,"startTime":1750696998506,"endTime":1750696998507,"millis":1.0949,"status":"passed"},"step":{"line":22,"prefix":"And","index":13,"text":"print 'Request body:', requestBody"},"stepLog":"23:43:18.507 [print] Request body: {\n  \"targetId\": null,\n  \"type\": \"post\"\n}\n \n"},{"result":{"nanos":451400,"startTime":1750696998507,"endTime":1750696998507,"millis":0.4514,"status":"passed"},"step":{"line":23,"prefix":"And","index":14,"text":"print 'Response status:', actualStatus, 'body:', actualResponse"},"stepLog":"23:43:18.507 [print] Response status: 403 body: {\n  \"success\": false,\n  \"statusCode\": 403,\n  \"message\": \"Thiếu thông tin cần thiết\",\n  \"path\": \"\/likes\",\n  \"timestamp\": \"2025-06-23T16:43:18.501Z\"\n}\n \n"}],"executorName":"main","line":3,"name":"Gọi API like với bearer token và targetId (type cố định là post)","description":"","durationMillis":44.958,"startTime":1750696998461,"failed":false,"refId":"[1:3]","endTime":1750696998507,"exampleIndex":-1}],"name":"Like Single Call Helper - Thực hiện API call like với bearer token","passedCount":1}]},{"result":{"nanos":194300,"startTime":1750696998509,"endTime":1750696998509,"millis":0.1943,"status":"passed"},"step":{"line":104,"prefix":"*","index":4,"text":"def testResults = results"}},{"result":{"nanos":1118800,"startTime":1750696998509,"endTime":1750696998510,"millis":1.1188,"status":"passed"},"step":{"line":105,"prefix":"*","index":5,"text":"print 'Hoàn thành tất cả test cases like. Đang ghi kết quả vào Excel...'"},"stepLog":"23:43:18.510 [print] Hoàn thành tất cả test cases like. Đang ghi kết quả vào Excel... \n"},{"result":{"nanos":2076500,"startTime":1750696998510,"endTime":1750696998512,"millis":2.0765,"status":"passed"},"step":{"comments":["# ===== THỐNG KÊ TEST RESULTS ====="],"line":108,"prefix":"*","index":6,"text":"def passedTests = karate.filter(testResults, function(item) { return item.testStatus === 'PASS'; })"}},{"result":{"nanos":1380800,"startTime":1750696998512,"endTime":1750696998513,"millis":1.3808,"status":"passed"},"step":{"line":109,"prefix":"*","index":7,"text":"def failedTests = karate.filter(testResults, function(item) { return item.testStatus === 'FAIL'; })"}},{"result":{"nanos":428600,"startTime":1750696998513,"endTime":1750696998513,"millis":0.4286,"status":"passed"},"step":{"line":110,"prefix":"*","index":8,"text":"def totalTests = testResults.length"}},{"result":{"nanos":425000,"startTime":1750696998514,"endTime":1750696998514,"millis":0.425,"status":"passed"},"step":{"line":111,"prefix":"*","index":9,"text":"def passedCount = passedTests.length"}},{"result":{"nanos":436200,"startTime":1750696998514,"endTime":1750696998514,"millis":0.4362,"status":"passed"},"step":{"line":112,"prefix":"*","index":10,"text":"def failedCount = failedTests.length"}},{"result":{"nanos":10763400,"startTime":1750696998515,"endTime":1750696998526,"millis":10.7634,"status":"passed"},"step":{"line":113,"prefix":"*","index":11,"text":"def successRate = Math.round((passedCount \/ totalTests) * 100 * 100) \/ 100"}},{"result":{"nanos":2745800,"startTime":1750696998526,"endTime":1750696998529,"millis":2.7458,"status":"passed"},"step":{"comments":["# Log thống kê tổng quan"],"line":116,"prefix":"*","index":12,"text":"karate.log('📊 ===== THỐNG KÊ LIKE API TESTING =====')"},"stepLog":"23:43:18.528 📊 ===== THỐNG KÊ LIKE API TESTING ===== \n"},{"result":{"nanos":1459200,"startTime":1750696998530,"endTime":1750696998531,"millis":1.4592,"status":"passed"},"step":{"line":117,"prefix":"*","index":13,"text":"karate.log('📈 Tổng số test cases: ' + totalTests)"},"stepLog":"23:43:18.531 📈 Tổng số test cases: 14 \n"},{"result":{"nanos":3111300,"startTime":1750696998531,"endTime":1750696998534,"millis":3.1113,"status":"passed"},"step":{"line":118,"prefix":"*","index":14,"text":"karate.log('✅ PASSED: ' + passedCount + ' test cases')"},"stepLog":"23:43:18.534 ✅ PASSED: 5 test cases \n"},{"result":{"nanos":2528000,"startTime":1750696998534,"endTime":1750696998537,"millis":2.528,"status":"passed"},"step":{"line":119,"prefix":"*","index":15,"text":"karate.log('❌ FAILED: ' + failedCount + ' test cases')"},"stepLog":"23:43:18.536 ❌ FAILED: 9 test cases \n"},{"result":{"nanos":8552500,"startTime":1750696998537,"endTime":1750696998546,"millis":8.5525,"status":"passed"},"step":{"line":120,"prefix":"*","index":16,"text":"karate.log('📊 Success Rate: ' + successRate + '%')"},"stepLog":"23:43:18.545 📊 Success Rate: 35.71% \n"},{"result":{"nanos":1460100,"startTime":1750696998545,"endTime":1750696998546,"millis":1.4601,"status":"passed"},"step":{"line":121,"prefix":"*","index":17,"text":"karate.log('🏁 ===== END STATISTICS =====')"},"stepLog":"23:43:18.546 🏁 ===== END STATISTICS ===== \n"},{"result":{"nanos":16034800,"startTime":1750696998547,"endTime":1750696998563,"millis":16.0348,"status":"passed"},"step":{"comments":["# Log failed tests"],"line":124,"prefix":"*","index":18,"text":"if (failedTests.length > 0) karate.forEach(failedTests, function(test, index) { karate.log('❌ Failed test #' + (index + 1) + ': ' + test.failureReason); })"},"stepLog":"23:43:18.556 ❌ Failed test #1: Status mismatch: Expected 400, got 201 \n23:43:18.560 ❌ Failed test #2: Status mismatch: Expected 404, got 201 \n23:43:18.560 ❌ Failed test #3: Status mismatch: Expected 400, got 201 \n23:43:18.561 ❌ Failed test #4: Status mismatch: Expected 400, got 201 \n23:43:18.561 ❌ Failed test #5: Status mismatch: Expected 400, got 201 \n23:43:18.562 ❌ Failed test #6: Status mismatch: Expected 400, got 201 \n23:43:18.562 ❌ Failed test #7: Status mismatch: Expected 400, got 201 \n23:43:18.563 ❌ Failed test #8: Status mismatch: Expected 400, got 201 \n23:43:18.563 ❌ Failed test #9: Status mismatch: Expected 400, got 403 \n"},{"result":{"nanos":2290000,"startTime":1750696998564,"endTime":1750696998566,"millis":2.29,"status":"passed"},"step":{"line":126,"prefix":"*","index":19,"text":"print 'Ghi kết quả vào Excel...'"},"stepLog":"23:43:18.566 [print] Ghi kết quả vào Excel... \n"},{"result":{"nanos":501725100,"startTime":1750696998566,"endTime":1750696999068,"millis":501.7251,"status":"passed"},"step":{"line":127,"prefix":"*","index":20,"text":"def writeSuccess = writeToExcel(excelFilePath, sheetName, testResults)"}},{"result":{"nanos":3061600,"startTime":1750696999068,"endTime":1750696999071,"millis":3.0616,"status":"passed"},"step":{"line":128,"prefix":"*","index":21,"text":"if (writeSuccess) karate.log('Đã ghi kết quả like vào Excel thành công!')"},"stepLog":"23:43:19.071 Đã ghi kết quả like vào Excel thành công! \n"},{"result":{"nanos":916100,"startTime":1750696999071,"endTime":1750696999072,"millis":0.9161,"status":"passed"},"step":{"line":129,"prefix":"*","index":22,"text":"if (!writeSuccess) karate.log('Lỗi khi ghi kết quả like vào Excel!')"}}],"executorName":"main","line":16,"name":"Chạy tất cả test cases like từ Excel","description":"","durationMillis":3315.7519,"startTime":1750696995595,"failed":false,"refId":"[1:16]","endTime":1750696999072,"exampleIndex":-1}],"callDepth":0,"name":"Like Testing từ Excel - Sheet like","description":"","resultDate":"2025-06-23 11:43:19 PM","durationMillis":3315.7519,"passedCount":1}